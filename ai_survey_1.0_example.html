<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Survey v1.0 - ÂøÉÁêÜÂ≠¶AIÂÆûÈ™åÂπ≥Âè∞</title>
    
    <!-- jsPsych Ê†∏ÂøÉÊñá‰ª∂ -->
    <script src="https://unpkg.com/jspsych@7.3.4"></script>
    <link rel="stylesheet" href="https://unpkg.com/jspsych@7.3.4/css/jspsych.css">
    
    <!-- jsPsych ÈóÆÂç∑Êèí‰ª∂ -->
    <script src="https://unpkg.com/@jspsych/plugin-survey-likert@1.1.3"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.1.3"></script>
    <script src="https://unpkg.com/@jspsych/plugin-instructions@1.1.4"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-text@1.1.3"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-multi-choice@1.1.3"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-button-response@1.1.3"></script>
    <link rel="stylesheet" href="https://unpkg.com/@jspsych/plugin-survey@1.0.1/css/survey.css">
    
    <!-- jsPsych Èº†Ê†áËΩ®ËøπÊâ©Â±ï -->
    <script src="https://unpkg.com/@jspsych/extension-mouse-tracking@1.0.3"></script>
    
    <!-- AI Survey Êèí‰ª∂ -->
    <script src="ai_survey_1.0.js"></script>
    <link rel="stylesheet" href="ai_survey_1.0.css">
    
    <style>
        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', 'Open Sans', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .demo-header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .demo-header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .demo-header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .demo-container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .demo-nav {
            background: #f8f9fa;
            padding: 20px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .demo-nav h3 {
            margin: 0 0 15px 0;
            color: #495057;
        }
        
        .api-config-panel {
            background: #fff;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .api-config-panel h4 {
            margin: 0 0 15px 0;
            color: #495057;
            font-size: 16px;
        }
        
        .config-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }
        
        .config-group {
            display: flex;
            flex-direction: column;
        }
        
        .config-group label {
            font-weight: 600;
            margin-bottom: 5px;
            color: #495057;
            font-size: 14px;
        }
        
        .config-group input,
        .config-group select {
            padding: 8px 12px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        
        .config-group input:focus,
        .config-group select:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0,123,255,0.1);
        }
        
        .config-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .config-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .config-btn:hover {
            background: #5a6268;
        }
        
        .config-btn.primary {
            background: #007bff;
        }
        
        .config-btn.primary:hover {
            background: #0056b3;
        }
        
        .config-btn.success {
            background: #28a745;
        }
        
        .config-btn.success:hover {
            background: #218838;
        }
        
        .config-btn.warning {
            background: #ffc107;
            color: #212529;
        }
        
        .config-btn.warning:hover {
            background: #e0a800;
        }
        
        .config-status {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            font-size: 14px;
            display: none;
        }
        
        .config-status.success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        
        .config-status.error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        
        .config-status.info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }
        
        .collapsible {
            cursor: pointer;
            user-select: none;
        }
        
        .collapsible:hover {
            background: #e9ecef;
        }
        
        .collapsible::after {
            content: ' ‚ñº';
            font-size: 12px;
            float: right;
            transition: transform 0.3s;
        }
        
        .collapsible.collapsed::after {
            transform: rotate(-90deg);
        }
        
        .collapsible-content {
            display: block;
            transition: all 0.3s;
        }
        
        .collapsible-content.hidden {
            display: none;
        }
        
        .demo-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .demo-btn {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            color: #495057;
            border: 2px solid #dee2e6;
            padding: 15px 20px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        .demo-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }
        
        .demo-btn:hover {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-color: #667eea;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(102,126,234,0.2);
        }
        
        .demo-btn:hover::before {
            transform: scaleX(1);
        }
        
        .demo-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #5a67d8;
            box-shadow: 0 4px 16px rgba(102,126,234,0.3);
        }
        
        .demo-btn.active::before {
            transform: scaleX(1);
            background: linear-gradient(90deg, #ffffff 0%, #f8f9fa 100%);
        }
        
        #jspsych-container {
            padding: 30px;
            min-height: 400px;
        }
        
        .demo-description {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            border: 1px solid #e1e8ed;
            border-left: 5px solid #667eea;
            padding: 25px 30px;
            margin-bottom: 30px;
            border-radius: 0 12px 12px 0;
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
            position: relative;
        }
        
        .demo-description::before {
            content: 'üéØ';
            position: absolute;
            top: -10px;
            left: 20px;
            background: white;
            padding: 5px 10px;
            border-radius: 50%;
            font-size: 20px;
        }
        
        .demo-description h4 {
            margin: 0 0 15px 0;
            color: #2c3e50;
            font-size: 20px;
            font-weight: 700;
        }
        
        .demo-description p {
            margin: 10px 0;
            color: #495057;
            line-height: 1.6;
            font-size: 15px;
        }
        
        .demo-description ul {
            margin: 15px 0;
            padding-left: 0;
        }
        
        .demo-description li {
            list-style: none;
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
            color: #495057;
            line-height: 1.5;
        }
        
        .demo-description li::before {
            content: '‚ú®';
            position: absolute;
            left: 0;
            color: #667eea;
        }
        
        /* AI Survey Êèí‰ª∂Ê†∑Âºè‰ºòÂåñ - ÂÖ®Èù¢ÁæéÂåñ */
        #jspsych-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .jspsych-ai-survey {
            font-family: 'Segoe UI', 'Microsoft YaHei', Arial, sans-serif;
        }
        
        .jspsych-ai-survey-question {
            margin-bottom: 30px;
            padding: 25px;
            border: 1px solid #e1e8ed;
            border-radius: 12px;
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .jspsych-ai-survey-question:hover {
            box-shadow: 0 4px 16px rgba(0,0,0,0.12);
        }
        
        .jspsych-ai-survey-question::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px 12px 0 0;
        }
        
        .jspsych-ai-survey-text {
            font-size: 17px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            line-height: 1.5;
            padding-top: 5px;
        }
        
        .jspsych-ai-survey-input-container {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .jspsych-ai-survey-input-section {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .jspsych-ai-survey-label {
            font-weight: 600;
            color: #34495e;
            font-size: 15px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .jspsych-ai-survey-label::before {
            content: '‚úèÔ∏è';
            font-size: 16px;
        }
        
        .jspsych-ai-survey-textbox {
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            padding: 16px 20px;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            font-size: 15px;
            line-height: 1.5;
            font-family: inherit;
            transition: all 0.3s ease;
            resize: vertical;
            background: #ffffff;
            min-height: 120px;
        }
        
        .jspsych-ai-survey-textbox:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102,126,234,0.1);
            background: #fdfdff;
        }
        
        .jspsych-ai-survey-textbox::placeholder {
            color: #95a5a6;
            font-style: italic;
        }
        
        .jspsych-ai-survey-ai-section {
            margin-top: 30px;
            padding-top: 25px;
            border-top: 2px solid #ecf0f1;
            position: relative;
        }
        
        .jspsych-ai-survey-ai-section::before {
            content: 'AI Âçè‰ΩúÂå∫Âüü';
            position: absolute;
            top: -12px;
            left: 20px;
            background: white;
            padding: 0 15px;
            font-size: 14px;
            font-weight: 600;
            color: #667eea;
        }
        
        .jspsych-ai-survey-button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 20px;
            padding: 20px;
            background: linear-gradient(145deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 10px;
            border: 1px solid #dee2e6;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
        }
        
        .jspsych-ai-survey-ai-button,
        .jspsych-ai-survey-confirm-button,
        .jspsych-ai-survey-regenerate-button,
        .jspsych-ai-survey-edit-button,
        .jspsych-ai-survey-custom-button {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-transform: none;
            letter-spacing: 0.3px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .jspsych-ai-survey-ai-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .jspsych-ai-survey-ai-button:hover:not(:disabled) {
            background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102,126,234,0.3);
        }
        
        .jspsych-ai-survey-ai-button:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .jspsych-ai-survey-confirm-button {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            color: white;
        }
        
        .jspsych-ai-survey-confirm-button:hover:not(:disabled) {
            background: linear-gradient(135deg, #00a085 0%, #00b7b8 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,184,148,0.3);
        }
        
        .jspsych-ai-survey-regenerate-button {
            background: linear-gradient(135deg, #fdcb6e 0%, #e17055 100%);
            color: white;
        }
        
        .jspsych-ai-survey-regenerate-button:hover:not(:disabled) {
            background: linear-gradient(135deg, #f39c12 0%, #d63031 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(253,203,110,0.3);
        }
        
        .jspsych-ai-survey-edit-button {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
        }
        
        .jspsych-ai-survey-edit-button:hover:not(:disabled) {
            background: linear-gradient(135deg, #5a9bd4 0%, #2d3436 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(116,185,255,0.3);
        }
        
        .jspsych-ai-survey-custom-button {
            background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
            color: white;
        }
        
        .jspsych-ai-survey-custom-button:hover {
            background: linear-gradient(135deg, #f368a0 0%, #d63384 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(253,121,168,0.3);
        }
        
        .jspsych-ai-survey-label[for*="ai-response"]::before {
            content: 'ü§ñ';
        }
        
        .jspsych-ai-survey-ai-response {
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            margin-top: 15px;
            padding: 16px 20px;
            border: 2px solid #00b894;
            border-radius: 10px;
            background: linear-gradient(145deg, #f8fff8 0%, #e8f5e8 100%);
            font-size: 14px;
            line-height: 1.6;
            min-height: 120px;
            font-family: inherit;
            resize: vertical;
        }
        
        .jspsych-ai-survey-ai-response.readonly {
            background: linear-gradient(145deg, #f8f9fa 0%, #e9ecef 100%);
            border-color: #dee2e6;
            color: #495057;
        }
        
        .jspsych-ai-survey-ai-response.locked {
            background: linear-gradient(145deg, #fff3cd 0%, #ffeaa7 100%);
            border-color: #ffc107;
        }
        
        .jspsych-ai-survey-status {
            margin-top: 12px;
            padding: 10px 16px;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-radius: 8px;
            font-size: 13px;
            color: #1565c0;
            font-weight: 500;
            border-left: 4px solid #2196f3;
        }
        
        .jspsych-ai-survey-loading {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 20px;
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border: 1px solid #ffc107;
            border-radius: 10px;
            color: #856404;
            font-size: 14px;
            font-weight: 500;
            margin: 15px 0;
        }
        
        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 3px solid rgba(133,100,4,0.3);
            border-top: 3px solid #856404;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* ‰∏ªÊèê‰∫§ÊåâÈíÆÊ†∑Âºè */
        .jspsych-btn.jspsych-ai-survey {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 30px auto 20px;
            display: block;
            min-width: 200px;
            box-shadow: 0 4px 12px rgba(102,126,234,0.2);
        }
        
        .jspsych-btn.jspsych-ai-survey:hover {
            background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102,126,234,0.3);
        }
        
        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 768px) {
            .jspsych-ai-survey-question {
                padding: 20px 15px;
                margin-bottom: 25px;
            }
            
            .jspsych-ai-survey-button-group {
                padding: 15px;
                gap: 8px;
            }
            
            .jspsych-ai-survey-ai-button,
            .jspsych-ai-survey-confirm-button,
            .jspsych-ai-survey-regenerate-button,
            .jspsych-ai-survey-edit-button,
            .jspsych-ai-survey-custom-button {
                min-width: 100px;
                font-size: 13px;
                padding: 10px 16px;
            }
        }
    </style>
</head>
<body>
    <div class="demo-header">
        <h1>üß† AIÂøÉÁêÜÂ≠¶ÂÆûÈ™åÂπ≥Âè∞</h1>
        <p>Âü∫‰∫éÈ°∂Á∫ßÊúüÂàäÂÆûÈ™åËÆæËÆ° - Â±ïÁé∞AIÊèí‰ª∂Âú®ÂøÉÁêÜÂ≠¶Á†îÁ©∂‰∏≠ÁöÑÂº∫Â§ßËÉΩÂäõ</p>
    </div>
    
    <div class="demo-container">
        <div class="demo-nav">
            <h3>ÈÄâÊã©ÂøÉÁêÜÂ≠¶AIÂÆûÈ™å</h3>
            <div class="demo-buttons">
                <button class="demo-btn active" onclick="runDemo('multi_plugin_integration')">üîó Â§öÊèí‰ª∂Êï∞ÊçÆÈõÜÊàê</button>
                <button class="demo-btn" onclick="runDemo('survey_choice_analysis')">üìä ÈÄâÊã©È¢ò+AIÂàÜÊûê</button>
                <button class="demo-btn" onclick="runDemo('reaction_time_analysis')">‚ö° ÂèçÂ∫îÊó∂+AIÊ¥ûÂØü</button>
                <button class="demo-btn" onclick="runDemo('mouse_tracking_decision')">üñ±Ô∏è Èº†Ê†áËΩ®ËøπÂÜ≥Á≠ñ</button>
                <button class="demo-btn" onclick="runDemo('comprehensive_experiment')">üß™ ÁªºÂêàÂÆûÈ™åËÆæËÆ°</button>
                <button class="demo-btn" onclick="runDemo('creativity_ai')">üé® ÂàõÈÄ†Âäõ‰∏éAIÂçè‰Ωú</button>
                <button class="demo-btn" onclick="runDemo('ai_personality_moral')">‚öñÔ∏è AI‰∫∫Ê†ºÈÅìÂæ∑Âà§Êñ≠</button>
                <button class="demo-btn" onclick="runDemo('multi_ai_analysis')">üîÑ ‰∏ÄÊ¨°ËæìÂÖ•Â§öAIÂàÜÊûê</button>
            </div>
            
            <!-- APIÈÖçÁΩÆÈù¢Êùø -->
            <div class="api-config-panel">
                <h4 class="collapsible" onclick="toggleConfigPanel()">üîß APIÈÖçÁΩÆ (ÁÇπÂáªÂ±ïÂºÄ/Êî∂Ëµ∑)</h4>
                <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 4px; padding: 10px; margin: 10px 0; font-size: 14px;">
                    <strong>‚ö†Ô∏è ÈáçË¶ÅÊèêÁ§∫Ôºö</strong> Ë¶Å‰ΩøÁî®AIÂàÜÊûêÂäüËÉΩÔºåËØ∑ÂÖàÈÖçÁΩÆÊÇ®ÁöÑAPIÂØÜÈí•„ÄÇÊ≤°ÊúâAPIÈÖçÁΩÆÂè™ËÉΩÊî∂ÈõÜÈóÆÂç∑Êï∞ÊçÆÔºåÊó†Ê≥ïÁîüÊàêAIÂàÜÊûêÊä•Âëä„ÄÇ
                </div>
                <div id="config-content" class="collapsible-content">
                    <div class="config-form">
                        <div class="config-group">
                            <label for="api-preset">Âø´ÈÄüÈ¢ÑËÆæÔºö</label>
                            <select id="api-preset" onchange="loadPreset()">
                                <option value="">-- ÈÄâÊã©APIÈ¢ÑËÆæ --</option>
                                <option value="deepseek">DeepSeek</option>
                                <option value="openai">OpenAI</option>
                                <option value="alibaba">ÈòøÈáå‰∫ëÈÄö‰πâÂçÉÈóÆ</option>
                                <option value="custom">Ëá™ÂÆö‰πâÈÖçÁΩÆ</option>
                            </select>
                        </div>
                        
                        <div class="config-group">
                            <label for="api-base-url">API Base URLÔºö</label>
                            <input type="text" id="api-base-url" placeholder="https://api.deepseek.com">
                        </div>
                        
                        <div class="config-group">
                            <label for="api-endpoint">APIÁ´ØÁÇπÔºö</label>
                            <input type="text" id="api-endpoint" placeholder="/v1/chat/completions">
                        </div>
                        
                        <div class="config-group">
                            <label for="api-key">API KeyÔºö</label>
                            <input type="password" id="api-key" placeholder="sk-xxxxxxxxxxxxxxxx">
                        </div>
                        
                        <div class="config-group">
                            <label for="api-model">Ê®°ÂûãÂêçÁß∞Ôºö</label>
                            <input type="text" id="api-model" placeholder="qwen-max">
                        </div>
                        
                        <div class="config-group">
                            <label for="api-timeout">Ë∂ÖÊó∂Êó∂Èó¥(ms)Ôºö</label>
                            <input type="number" id="api-timeout" value="45000" min="5000" max="120000">
                        </div>
                    </div>
                    
                    <div class="config-actions">
                        <button class="config-btn primary" onclick="testConnection()">ÊµãËØïËøûÊé•</button>
                        <button class="config-btn success" onclick="saveConfig()">‰øùÂ≠òÈÖçÁΩÆ</button>
                        <button class="config-btn" onclick="loadConfig()">Âä†ËΩΩÈÖçÁΩÆ</button>
                        <button class="config-btn warning" onclick="resetConfig()">ÈáçÁΩÆÈÖçÁΩÆ</button>
                    </div>
                    
                    <div id="config-status" class="config-status"></div>
                </div>
            </div>
        </div>
        
        <div id="jspsych-container">
                <div class="demo-description">
                    <h4>üîó Â§öÊèí‰ª∂Êï∞ÊçÆÈõÜÊàêÊºîÁ§∫Âπ≥Âè∞</h4>
                    <p>Â±ïÁ§∫Â¶Ç‰ΩïÂ∞ÜjsPsychÂêÑÁßçÊèí‰ª∂Ôºàsurvey„ÄÅÂèçÂ∫îÊó∂„ÄÅÊåâÈíÆÂìçÂ∫î„ÄÅÈº†Ê†áËΩ®ËøπÁ≠âÔºâÁöÑÊï∞ÊçÆÊó†Áºù‰º†ÈÄíÁªôAIËøõË°åÊô∫ËÉΩÂàÜÊûê„ÄÇ</p>
                    <div style="background: #e8f4fd; border: 1px solid #2196f3; border-radius: 4px; padding: 15px; margin: 15px 0; font-size: 14px;">
                        <strong>üéØ Ê†∏ÂøÉÁâπÊÄßÔºö</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li><strong>Â§öÊèí‰ª∂ÂÖºÂÆπÔºö</strong>ÊîØÊåÅsurvey„ÄÅÂèçÂ∫îÊó∂„ÄÅÊåâÈíÆÂìçÂ∫î„ÄÅÈº†Ê†áËΩ®ËøπÁ≠âÂêÑÁ±ªÊèí‰ª∂</li>
                            <li><strong>Êï∞ÊçÆÂÆåÊï¥‰º†ÈÄíÔºö</strong>Data GeneratedÔºàrt, response, stimulus, correctÁ≠âÔºâ+ ParametersÔºàprompt, targetsÁ≠âÔºâ</li>
                            <li><strong>Êô∫ËÉΩÁªüËÆ°ÂàÜÊûêÔºö</strong>Ëá™Âä®ËÆ°ÁÆóÂèçÂ∫îÊó∂ÁªüËÆ°„ÄÅÂáÜÁ°ÆÁéá„ÄÅËÆ§Áü•ÊåáÊ†áÁ≠â</li>
                            <li><strong>AIÊ∑±Â∫¶Ê¥ûÂØüÔºö</strong>Âü∫‰∫éÂ§öÊ∫êÊï∞ÊçÆÊèê‰æõËÆ§Áü•ËÉΩÂäõ„ÄÅÂÜ≥Á≠ñÈ£éÊ†º„ÄÅË°å‰∏∫ÁâπÂæÅÂàÜÊûê</li>
                        </ul>
                    </div>
                </div>
        </div>
    </div>

    <script>
        // APIÈÖçÁΩÆÁÆ°ÁêÜ
        const ApiConfigManager = {
            // È¢ÑËÆæÈÖçÁΩÆ
            presets: {
                deepseek: {
                    base_url: "https://api.deepseek.com",
                    api: "/v1/chat/completions",
                    model: "deepseek-chat",
                    timeout: 30000
                },
                openai: {
                    base_url: "https://api.openai.com",
                    api: "/v1/chat/completions", 
                    model: "gpt-3.5-turbo",
                    timeout: 30000
                },
                alibaba: {
                    base_url: "https://dashscope.aliyuncs.com",
                    api: "/compatible-mode/v1/chat/completions",
                    model: "qwen-max",  // ‰ΩøÁî®ÈÄö‰πâÂçÉÈóÆÊúÄÂº∫Ê®°Âûã
                    timeout: 45000
                }
            },
            
            // Ëé∑ÂèñÂΩìÂâçÈÖçÁΩÆ
            getCurrentConfig() {
                return {
                    base_url: document.getElementById('api-base-url').value || "https://dashscope.aliyuncs.com",
                    api: document.getElementById('api-endpoint').value || "/compatible-mode/v1/chat/completions",
                    api_key: document.getElementById('api-key').value || "",
                    llm_model: document.getElementById('api-model').value || "qwen-max",
                    api_timeout: parseInt(document.getElementById('api-timeout').value) || 45000
                };
            },
            
            // ËÆæÁΩÆÈÖçÁΩÆÂà∞Ë°®Âçï
            setConfig(config) {
                document.getElementById('api-base-url').value = config.base_url || "";
                document.getElementById('api-endpoint').value = config.api || "";
                document.getElementById('api-key').value = config.api_key || "";
                document.getElementById('api-model').value = config.llm_model || config.model || "";
                document.getElementById('api-timeout').value = config.api_timeout || config.timeout || 45000;
            },
            
            // ÊòæÁ§∫Áä∂ÊÄÅÊ∂àÊÅØ
            showStatus(message, type = 'info') {
                const statusDiv = document.getElementById('config-status');
                statusDiv.className = `config-status ${type}`;
                statusDiv.textContent = message;
                statusDiv.style.display = 'block';
                
                // 3ÁßíÂêéËá™Âä®ÈöêËóè
                setTimeout(() => {
                    statusDiv.style.display = 'none';
                }, 3000);
            }
        };
        
        // ÂàáÊç¢ÈÖçÁΩÆÈù¢Êùø
        function toggleConfigPanel() {
            const content = document.getElementById('config-content');
            const header = document.querySelector('.collapsible');
            
            if (content.classList.contains('hidden')) {
                content.classList.remove('hidden');
                header.classList.remove('collapsed');
            } else {
                content.classList.add('hidden');
                header.classList.add('collapsed');
            }
        }
        
        // Âä†ËΩΩÈ¢ÑËÆæÈÖçÁΩÆ
        function loadPreset() {
            const preset = document.getElementById('api-preset').value;
            if (preset && ApiConfigManager.presets[preset]) {
                ApiConfigManager.setConfig(ApiConfigManager.presets[preset]);
                ApiConfigManager.showStatus(`Â∑≤Âä†ËΩΩ ${preset} È¢ÑËÆæÈÖçÁΩÆ`, 'success');
            }
        }
        
        // ÊµãËØïAPIËøûÊé•
        async function testConnection() {
            const config = ApiConfigManager.getCurrentConfig();
            
            if (!config.api_key.trim()) {
                ApiConfigManager.showStatus('ËØ∑ÂÖàËæìÂÖ•API Key', 'error');
                return;
            }
            
            ApiConfigManager.showStatus('Ê≠£Âú®ÊµãËØïËøûÊé•...', 'info');
            
            try {
                const url = config.base_url + config.api;
                const headers = {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${config.api_key}`
                };
                
                const testPayload = {
                    model: config.llm_model,
                    messages: [
                        { role: "user", content: "ÊµãËØïËøûÊé•" }
                    ],
                    max_tokens: 10,
                    temperature: 0.1
                };
                
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), config.api_timeout);
                
                const response = await fetch(url, {
                    method: 'POST',
                    headers: headers,
                    body: JSON.stringify(testPayload),
                    signal: controller.signal
                });
                
                clearTimeout(timeoutId);
                
                if (response.ok) {
                    const data = await response.json();
                    ApiConfigManager.showStatus('‚úÖ ËøûÊé•ÊµãËØïÊàêÂäüÔºÅAPIÈÖçÁΩÆÊ≠£Â∏∏', 'success');
                    console.log('APIÊµãËØïÊàêÂäü:', data);
                } else {
                    const errorText = await response.text();
                    ApiConfigManager.showStatus(`‚ùå ËøûÊé•Â§±Ë¥•: HTTP ${response.status}`, 'error');
                    console.error('APIÊµãËØïÂ§±Ë¥•:', errorText);
                }
            } catch (error) {
                if (error.name === 'AbortError') {
                    ApiConfigManager.showStatus('‚ùå ËøûÊé•Ë∂ÖÊó∂ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúÂíåÈÖçÁΩÆ', 'error');
                } else {
                    ApiConfigManager.showStatus(`‚ùå ËøûÊé•ÈîôËØØ: ${error.message}`, 'error');
                }
                console.error('APIÊµãËØïÈîôËØØ:', error);
            }
        }
        
        // ‰øùÂ≠òÈÖçÁΩÆÂà∞localStorage
        function saveConfig() {
            const config = ApiConfigManager.getCurrentConfig();
            localStorage.setItem('ai_survey_config', JSON.stringify(config));
            ApiConfigManager.showStatus('‚úÖ ÈÖçÁΩÆÂ∑≤‰øùÂ≠òÂà∞Êú¨Âú∞', 'success');
        }
        
        // ‰ªélocalStorageÂä†ËΩΩÈÖçÁΩÆ
        function loadConfig() {
            try {
                const saved = localStorage.getItem('ai_survey_config');
                if (saved) {
                    const config = JSON.parse(saved);
                    ApiConfigManager.setConfig(config);
                    ApiConfigManager.showStatus('‚úÖ Â∑≤Âä†ËΩΩ‰øùÂ≠òÁöÑÈÖçÁΩÆ', 'success');
                } else {
                    ApiConfigManager.showStatus('Ê≤°ÊúâÊâæÂà∞‰øùÂ≠òÁöÑÈÖçÁΩÆ', 'info');
                }
            } catch (error) {
                ApiConfigManager.showStatus('Âä†ËΩΩÈÖçÁΩÆÂ§±Ë¥•', 'error');
            }
        }
        
        // ÈáçÁΩÆÈÖçÁΩÆ
        function resetConfig() {
            ApiConfigManager.setConfig(ApiConfigManager.presets.alibaba);
            document.getElementById('api-preset').value = 'alibaba';
            ApiConfigManager.showStatus('‚úÖ Â∑≤ÈáçÁΩÆ‰∏∫ÊúÄÊñ∞Ê®°ÂûãÈÖçÁΩÆ (Qwen-Max)', 'success');
        }
        
        // Ëé∑ÂèñÂä®ÊÄÅÈÖçÁΩÆÁî®‰∫éÊºîÁ§∫
        function getDynamicConfig() {
            const userConfig = ApiConfigManager.getCurrentConfig();
            return {
                base_url: userConfig.base_url,
                api: userConfig.api,
                api_key: userConfig.api_key,
                llm_model: userConfig.llm_model,
                api_timeout: userConfig.api_timeout
            };
        }

        // ÁÆÄÂåñÁâàÊï∞ÊçÆÁªüËÆ°ÂáΩÊï∞ÔºåÈò≤Ê≠¢‰æùËµñÈóÆÈ¢ò
        function getSimpleStats(data, field = 'rt') {
            if (!data || data.count() === 0) return null;
            
            try {
                // ÊñπÊ≥ï1Ôºö‰ΩøÁî®jsPsychÂÜÖÁΩÆÁöÑDataColumnÁªüËÆ°ÊñπÊ≥ï
                const dataColumn = data.select(field);
                if (!dataColumn || dataColumn.count() === 0) return null;
                
                return {
                    count: dataColumn.count(),
                    mean: dataColumn.mean(),
                    min: dataColumn.min(),
                    max: dataColumn.max(),
                    sum: dataColumn.sum(),
                    variance: dataColumn.variance(),
                    sd: dataColumn.sd(),
                    median: dataColumn.median()
                };
            } catch (error) {
                console.log('DataColumnÊñπÊ≥ïÂ§±Ë¥•Ôºå‰ΩøÁî®ÊâãÂä®ËÆ°ÁÆó:', error);
                
                // ÊñπÊ≥ï2ÔºöÊâãÂä®ËÆ°ÁÆófallback
                const rawData = data.values();
                const values = rawData.map(trial => trial[field]).filter(v => v !== null && v !== undefined && !isNaN(v));
                
                if (values.length === 0) return null;
                
                const sum = values.reduce((a, b) => a + b, 0);
                const mean = sum / values.length;
                const variance = values.reduce((a, b) => a + Math.pow(b - mean, 2), 0) / values.length;
                
                return {
                    count: values.length,
                    mean: mean,
                    min: Math.min(...values),
                    max: Math.max(...values),
                    sum: sum,
                    variance: variance,
                    sd: Math.sqrt(variance),
                    median: values.sort((a, b) => a - b)[Math.floor(values.length / 2)]
                };
            }
        }

        // ÂøÉÁêÜÂ≠¶AIÂÆûÈ™åÈÖçÁΩÆ
        const demoConfigs = {
            multi_plugin_integration: {
                title: "Â§öÊèí‰ª∂Êï∞ÊçÆÈõÜÊàêÊºîÁ§∫",
                description: "Â±ïÁ§∫Â¶Ç‰ΩïÂ∞Üsurvey„ÄÅÂèçÂ∫îÊó∂„ÄÅÊåâÈíÆÂìçÂ∫îÁ≠âÂ§öÁßçÊèí‰ª∂ÁöÑÊï∞ÊçÆ‰º†ÈÄíÁªôAIËøõË°åÁªºÂêàÂàÜÊûê„ÄÇÂåÖÂê´Data GeneratedÔºàrt, response, stimulusÁ≠âÔºâÂíåParametersÔºàprompt, targetsÁ≠âÔºâ‰∏§Á±ªÊï∞ÊçÆÁöÑÂÆåÊï¥‰º†ÈÄí„ÄÇ",
                trial: [
                    // Èò∂ÊÆµ1ÔºöÂ§öÈÄâÈ¢òË∞ÉÊü•
                    {
                        type: jsPsychSurveyMultiChoice,
                        preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>Â§öÊèí‰ª∂Êï∞ÊçÆÈõÜÊàê - Èò∂ÊÆµ1ÔºöÈÄâÊã©ÂÅèÂ•ΩË∞ÉÊü•</h2>
                                <div style="background: #e8f5e8; border-left: 4px solid #4caf50; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>Êï∞ÊçÆÊî∂ÈõÜÔºö</strong>‰ΩøÁî®survey-multi-choiceÊèí‰ª∂Êî∂ÈõÜÈÄâÊã©Êï∞ÊçÆ</p>
                                    <p><strong>ËÆ∞ÂΩï‰ø°ÊÅØÔºö</strong>response, question_order, choice_options, rtÁ≠â</p>
                                </div>
                            </div>
                        `,
                        questions: [
                            {
                                prompt: "ÊÇ®Êõ¥ÂÄæÂêë‰∫éÂì™ÁßçÂ∑•‰ΩúÊñπÂºèÔºü",
                                name: 'work_preference',
                                options: ['Áã¨Á´ãÂ∑•‰Ωú', 'Âõ¢ÈòüÂçè‰Ωú', 'Ê∑∑ÂêàÊ®°Âºè'],
                                required: true
                            },
                            {
                                prompt: "Âú®ÂÅöÂÜ≥Á≠ñÊó∂ÔºåÊÇ®ÊúÄÈáçËßÜ‰ªÄ‰πàÔºü",
                                name: 'decision_factor',
                                options: ['ÊïàÁéá‰ºòÂÖà', 'Ë¥®Èáè‰ºòÂÖà', 'Âπ≥Ë°°ËÄÉËôë'],
                                required: true
                            },
                            {
                                prompt: "ÊÇ®ÁêÜÊÉ≥ÁöÑÂäûÂÖ¨ÁéØÂ¢ÉÊòØÔºü",
                                name: 'office_preference',
                                options: ['Â∏Ç‰∏≠ÂøÉÔºàÁßüÈáëÈ´ò‰ΩÜ‰∫§ÈÄö‰æøÂà©Ôºâ', 'ÈÉäÂå∫ÔºàÁßüÈáë‰Ωé‰ΩÜÈÄöÂã§Âõ∞ÈöæÔºâ', 'Ê∑∑ÂêàÂäûÂÖ¨ÔºàÈÉ®ÂàÜËøúÁ®ãÔºâ'],
                                required: true
                            }
                        ]
                    },
                    
                    // Èò∂ÊÆµ2ÔºöÂèçÂ∫îÊó∂‰ªªÂä°
                    {
                        type: jsPsychHtmlKeyboardResponse,
                        preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>Â§öÊèí‰ª∂Êï∞ÊçÆÈõÜÊàê - Èò∂ÊÆµ2ÔºöÂèçÂ∫îÊó∂ÊµãËØï</h2>
                                <div style="background: #fff3e0; border-left: 4px solid #ff9800; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>‰ªªÂä°ËØ¥ÊòéÔºö</strong>ÁúãÂà∞ÁªøËâ≤ÂúÜÂúàÊó∂ÊåâÁ©∫Ê†ºÈîÆÔºåÊµãËØïÊÇ®ÁöÑÂèçÂ∫îÈÄüÂ∫¶</p>
                                    <p><strong>Êï∞ÊçÆÊî∂ÈõÜÔºö</strong>rt, response, stimulus, correctÁ≠â</p>
                                </div>
                            </div>
                        `,
                        stimulus: function() {
                            const colors = ['red', 'green', 'blue'];
                            const shapes = ['circle', 'square', 'triangle'];
                            const randomColor = colors[Math.floor(Math.random() * colors.length)];
                            const randomShape = shapes[Math.floor(Math.random() * shapes.length)];
                            
                            let shapeHtml;
                            if (randomShape === 'circle') {
                                shapeHtml = `<div style="width: 100px; height: 100px; background-color: ${randomColor}; border-radius: 50%; margin: 50px auto;"></div>`;
                            } else if (randomShape === 'square') {
                                shapeHtml = `<div style="width: 100px; height: 100px; background-color: ${randomColor}; margin: 50px auto;"></div>`;
                            } else {
                                shapeHtml = `<div style="width: 0; height: 0; border-left: 50px solid transparent; border-right: 50px solid transparent; border-bottom: 87px solid ${randomColor}; margin: 50px auto;"></div>`;
                            }
                            
                            return `
                                <div style="text-align: center;">
                                    <h3>ÁúãÂà∞ÁªøËâ≤ÂúÜÂúàÊó∂ÊåâÁ©∫Ê†ºÈîÆ</h3>
                                    ${shapeHtml}
                                    <p style="margin-top: 30px;">ÂΩìÂâçÂõæÂΩ¢Ôºö${randomColor} ${randomShape}</p>
                                </div>
                            `;
                        },
                        choices: [' '],
                        data: function() {
                            const colors = ['red', 'green', 'blue'];
                            const shapes = ['circle', 'square', 'triangle'];
                            const randomColor = colors[Math.floor(Math.random() * colors.length)];
                            const randomShape = shapes[Math.floor(Math.random() * shapes.length)];
                            return {
                                color: randomColor,
                                shape: randomShape,
                                target: randomColor === 'green' && randomShape === 'circle',
                                task_type: 'reaction_time'
                            };
                        },
                        on_finish: function(data) {
                            data.correct = data.target && data.response === ' ';
                            data.stimulus_type = `${data.color}_${data.shape}`;
                        },
                        trial_duration: 3000,
                        prompt: "<p>ÊåâÁ©∫Ê†ºÈîÆÂìçÂ∫îÁªøËâ≤ÂúÜÂúà</p>"
                    },
                    
                    // ÈáçÂ§çÂèçÂ∫îÊó∂‰ªªÂä°Âá†Ê¨°
                    {
                        timeline: [
                            {
                                type: jsPsychHtmlKeyboardResponse,
                                stimulus: function() {
                                    const colors = ['red', 'green', 'blue'];
                                    const shapes = ['circle', 'square', 'triangle'];
                                    const randomColor = colors[Math.floor(Math.random() * colors.length)];
                                    const randomShape = shapes[Math.floor(Math.random() * shapes.length)];
                                    
                                    let shapeHtml;
                                    if (randomShape === 'circle') {
                                        shapeHtml = `<div style="width: 100px; height: 100px; background-color: ${randomColor}; border-radius: 50%; margin: 50px auto;"></div>`;
                                    } else if (randomShape === 'square') {
                                        shapeHtml = `<div style="width: 100px; height: 100px; background-color: ${randomColor}; margin: 50px auto;"></div>`;
                                    } else {
                                        shapeHtml = `<div style="width: 0; height: 0; border-left: 50px solid transparent; border-right: 50px solid transparent; border-bottom: 87px solid ${randomColor}; margin: 50px auto;"></div>`;
                                    }
                                    
                                    return `
                                        <div style="text-align: center;">
                                            <h3>ÁúãÂà∞ÁªøËâ≤ÂúÜÂúàÊó∂ÊåâÁ©∫Ê†ºÈîÆ</h3>
                                            ${shapeHtml}
                                        </div>
                                    `;
                                },
                                choices: [' '],
                                data: function() {
                                    const colors = ['red', 'green', 'blue'];
                                    const shapes = ['circle', 'square', 'triangle'];
                                    const randomColor = colors[Math.floor(Math.random() * colors.length)];
                                    const randomShape = shapes[Math.floor(Math.random() * shapes.length)];
                                    return {
                                        color: randomColor,
                                        shape: randomShape,
                                        target: randomColor === 'green' && randomShape === 'circle',
                                        task_type: 'reaction_time'
                                    };
                                },
                                on_finish: function(data) {
                                    data.correct = data.target && data.response === ' ';
                                    data.stimulus_type = `${data.color}_${data.shape}`;
                                },
                                trial_duration: 3000
                            }
                        ],
                        repetitions: 5
                    },
                    
                    // Èò∂ÊÆµ3ÔºöÊåâÈíÆÂìçÂ∫î‰ªªÂä°
                    {
                        type: jsPsychHtmlButtonResponse,
                        preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>Â§öÊèí‰ª∂Êï∞ÊçÆÈõÜÊàê - Èò∂ÊÆµ3ÔºöÊåâÈíÆÈÄâÊã©‰ªªÂä°</h2>
                                <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>‰ªªÂä°ËØ¥ÊòéÔºö</strong>Ê†πÊçÆÈóÆÈ¢òÈÄâÊã©ÊúÄ‰Ω≥Á≠îÊ°à</p>
                                    <p><strong>Êï∞ÊçÆÊî∂ÈõÜÔºö</strong>button_pressed, rt, response, stimulusÁ≠â</p>
                                </div>
                            </div>
                        `,
                        stimulus: `
                            <div style="text-align: center; padding: 30px;">
                                <h3>ÊÉÖÂ¢ÉÂÜ≥Á≠ñÔºöÂ∑•‰ΩúÂú∞ÁÇπÈÄâÊã©</h3>
                                <p style="font-size: 16px; line-height: 1.6; margin: 20px 0;">
                                    ÂÅáËÆæÊÇ®ÈúÄË¶Å‰∏∫Âõ¢ÈòüÈÄâÊã©Êñ∞ÁöÑÂäûÂÖ¨Âú∞ÁÇπÔºåËÄÉËôëÂà∞ÊàêÊú¨„ÄÅ‰æøÂà©ÊÄßÂíåÂëòÂ∑•Êª°ÊÑèÂ∫¶ÔºåÊÇ®‰ºöÈÄâÊã©Âì™‰∏™ÈÄâÈ°πÔºü
                                </p>
                                <div style="background: #f5f5f5; padding: 20px; border-radius: 8px; margin: 20px 0;">
                                    <p><strong>ÈÄâÈ°πËØ¶ÊÉÖÔºö</strong></p>
                                    <p>üè¢ <strong>Â∏Ç‰∏≠ÂøÉÔºö</strong>ÁßüÈáëÈ´ò‰ΩÜ‰∫§ÈÄö‰æøÂà©ÔºåÂëòÂ∑•ÈÄöÂã§Êñπ‰æø</p>
                                    <p>üèòÔ∏è <strong>ÈÉäÂå∫Ôºö</strong>ÁßüÈáë‰Ωé‰ΩÜÈÄöÂã§Âõ∞ÈöæÔºåÈúÄË¶ÅÂëòÂ∑•È¢ùÂ§ñÈÄöÂã§Êó∂Èó¥</p>
                                    <p>üíª <strong>Ê∑∑ÂêàÂäûÂÖ¨Ôºö</strong>ÈÉ®ÂàÜËøúÁ®ãÂ∑•‰ΩúÔºåÂπ≥Ë°°ÊàêÊú¨Âíå‰æøÂà©ÊÄß</p>
                                </div>
                            </div>
                        `,
                        choices: ['Â∏Ç‰∏≠ÂøÉÔºàÁßüÈáëÈ´ò‰ΩÜ‰∫§ÈÄö‰æøÂà©Ôºâ', 'ÈÉäÂå∫ÔºàÁßüÈáë‰Ωé‰ΩÜÈÄöÂã§Âõ∞ÈöæÔºâ', 'Ê∑∑ÂêàÂäûÂÖ¨ÔºàÈÉ®ÂàÜËøúÁ®ãÔºâ'],
                        data: {
                            task_type: 'decision_making',
                            scenario: 'office_location',
                            factors: ['cost', 'convenience', 'satisfaction']
                        },
                        on_finish: function(data) {
                            data.choice_label = data.response === 0 ? 'downtown' : 
                                               data.response === 1 ? 'suburb' : 'hybrid';
                        }
                    },
                    
                    // Èò∂ÊÆµ4ÔºöAIÁªºÂêàÂàÜÊûê
                    {
                        type: jsPsychAISurvey,
                        preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>Â§öÊèí‰ª∂Êï∞ÊçÆÈõÜÊàê - Èò∂ÊÆµ4ÔºöAIÁªºÂêàÂàÜÊûê</h2>
                                <div style="background: linear-gradient(145deg, #fff 0%, #f8f9fa 100%); border: 2px solid #667eea; padding: 20px; margin: 20px 0; border-radius: 12px;">
                                    <p><strong>AIÂàÜÊûêÔºö</strong>Âü∫‰∫éÂâçÈù¢Êî∂ÈõÜÁöÑÊâÄÊúâÊèí‰ª∂Êï∞ÊçÆËøõË°åÁªºÂêàÂàÜÊûê</p>
                                    <p><strong>Êï∞ÊçÆÊù•Ê∫êÔºö</strong>SurveyÈÄâÊã© + ÂèçÂ∫îÊó∂Êï∞ÊçÆ + ÊåâÈíÆÂìçÂ∫î + ÂÜ≥Á≠ñËΩ®Ëøπ</p>
                                </div>
                            </div>
                        `,
                        questions: [
                            {
                                prompt: "Âü∫‰∫éÊÇ®ÂàöÊâçÁöÑÊâÄÊúâÊµãËØïË°®Áé∞ÔºåËØ∑ÊèèËø∞ÊÇ®Âú®Â∑•‰Ωú‰∏≠ÁöÑÂÜ≥Á≠ñÈ£éÊ†ºÔºö",
                                name: "decision_style_reflection",
                                rows: 4,
                                placeholder: "ÁªìÂêàÂàöÊâçÁöÑÈÄâÊã©ÂíåÂèçÂ∫îÔºåÊèèËø∞ÊÇ®ÁöÑÂÜ≥Á≠ñÁâπÁÇπ..."
                            }
                        ],
                        data_collector: function() {
                            console.log('üîç Â§öÊèí‰ª∂Êï∞ÊçÆÊî∂ÈõÜÂô®ÔºöÂºÄÂßãÊî∂ÈõÜÊâÄÊúâÊèí‰ª∂Êï∞ÊçÆ');
                            
                            if (typeof window.currentJsPsychInstance !== 'undefined') {
                                const allData = window.currentJsPsychInstance.data.get();
                                console.log('ÊâÄÊúâËØïÈ™åÊï∞ÊçÆ:', allData.values());
                                console.log('Êï∞ÊçÆÊù°Êï∞:', allData.count());
                                
                                // Êî∂ÈõÜsurveyÊï∞ÊçÆ
                                const surveyData = allData.filter({trial_type: 'survey-multi-choice'});
                                
                                // Êî∂ÈõÜÂèçÂ∫îÊó∂Êï∞ÊçÆ
                                const reactionData = allData.filter({trial_type: 'html-keyboard-response'});
                                
                                // Êî∂ÈõÜÊåâÈíÆÂìçÂ∫îÊï∞ÊçÆ
                                const buttonData = allData.filter({trial_type: 'html-button-response'});
                                
                                // ÊûÑÂª∫ÁªºÂêàÂàÜÊûê‰∏ä‰∏ãÊñá
                                let analysisContext = "=== Â§öÊèí‰ª∂ÂÆûÈ™åÊï∞ÊçÆÁªºÂêàÂàÜÊûê ===\n\n";
                                
                                // SurveyÊï∞ÊçÆÂàÜÊûê
                                if (surveyData.count() > 0) {
                                    const survey = surveyData.values()[0];
                                    analysisContext += "üìä ÈÄâÊã©ÂÅèÂ•ΩË∞ÉÊü•ÁªìÊûúÔºö\n";
                                    if (survey.response) {
                                        analysisContext += `Â∑•‰ΩúÊñπÂºèÂÅèÂ•ΩÔºö${survey.response.work_preference}\n`;
                                        analysisContext += `ÂÜ≥Á≠ñÈáçÁÇπÔºö${survey.response.decision_factor}\n`;
                                        analysisContext += `ÂäûÂÖ¨ÁéØÂ¢ÉÂÅèÂ•ΩÔºö${survey.response.office_preference}\n\n`;
                                    }
                                }
                                
                                // ÂèçÂ∫îÊó∂Êï∞ÊçÆÂàÜÊûê
                                if (reactionData.count() > 0) {
                                    console.log('ÂºÄÂßãÂàÜÊûêÂèçÂ∫îÊó∂Êï∞ÊçÆÔºåÊï∞ÊçÆÊù°Êï∞:', reactionData.count());
                                    console.log('ÂèçÂ∫îÊó∂Êï∞ÊçÆÊ†∑Êú¨:', reactionData.values().slice(0, 2));
                                    const rtStats = getSimpleStats(reactionData, 'rt');
                                    console.log('ÂèçÂ∫îÊó∂ÁªüËÆ°ÁªìÊûú:', rtStats);
                                    
                                    const correctTrials = reactionData.filter({correct: true});
                                    
                                    analysisContext += "‚ö° ÂèçÂ∫îÊó∂‰ªªÂä°Ë°®Áé∞Ôºö\n";
                                    analysisContext += `ÊÄªËØïÈ™åÊï∞Ôºö${reactionData.count()}\n`;
                                    analysisContext += `Ê≠£Á°ÆÁéáÔºö${(correctTrials.count() / reactionData.count() * 100).toFixed(1)}%\n`;
                                    if (rtStats) {
                                        analysisContext += `Âπ≥ÂùáÂèçÂ∫îÊó∂Ôºö${rtStats.mean.toFixed(0)}ms\n`;
                                        analysisContext += `ÂèçÂ∫îÊó∂Ê†áÂáÜÂ∑ÆÔºö${rtStats.sd.toFixed(0)}ms\n`;
                                        analysisContext += `ÊúÄÂø´ÂèçÂ∫îÔºö${rtStats.min}ms\n`;
                                        analysisContext += `ÊúÄÊÖ¢ÂèçÂ∫îÔºö${rtStats.max}ms\n`;
                                    }
                                    analysisContext += "\n";
                                }
                                
                                // ÊåâÈíÆÂìçÂ∫îÊï∞ÊçÆÂàÜÊûê
                                if (buttonData.count() > 0) {
                                    const buttonTrial = buttonData.values()[0];
                                    analysisContext += "üîò ÂÜ≥Á≠ñ‰ªªÂä°Ë°®Áé∞Ôºö\n";
                                    analysisContext += `ÈÄâÊã©ÁªìÊûúÔºö${buttonTrial.choice_label}\n`;
                                    analysisContext += `ÂÜ≥Á≠ñÊó∂Èó¥Ôºö${buttonTrial.rt}ms\n`;
                                    analysisContext += `ÂÜ≥Á≠ñÂú∫ÊôØÔºöÂäûÂÖ¨Âú∞ÁÇπÈÄâÊã©\n`;
                                    analysisContext += `ËÄÉËôëÂõ†Á¥†ÔºöÊàêÊú¨„ÄÅ‰æøÂà©ÊÄß„ÄÅÊª°ÊÑèÂ∫¶\n\n`;
                                }
                                
                                // Ê∑ªÂä†ÂàÜÊûêÊåáÂØº
                                analysisContext += `ËØ∑Âü∫‰∫é‰ª•‰∏äÂ§öÊ∫êÊï∞ÊçÆËøõË°åÁªºÂêàÂàÜÊûêÔºö
1. ËÆ§Áü•È£éÊ†ºÁâπÂæÅÔºàÂü∫‰∫éÂèçÂ∫îÊó∂ÂíåÂáÜÁ°ÆÁéáÔºâ
2. ÂÜ≥Á≠ñÂÅèÂ•ΩÊ®°ÂºèÔºàÂü∫‰∫éÈÄâÊã©Êï∞ÊçÆÔºâ
3. Ë°å‰∏∫‰∏ÄËá¥ÊÄßÂàÜÊûêÔºàË∑®Êèí‰ª∂Êï∞ÊçÆÂØπÊØîÔºâ
4. ‰∏™ÊÄßÂåñÂª∫ËÆÆÔºàÂü∫‰∫éÁªºÂêàË°®Áé∞Ôºâ`;
                                
                                return {
                                    comprehensive_data: analysisContext,
                                    data_sources: {
                                        survey_trials: surveyData.count(),
                                        reaction_trials: reactionData.count(),
                                        button_trials: buttonData.count(),
                                        total_trials: allData.count()
                                    }
                                };
                            }
                            
                            return { comprehensive_data: "Êó†Ê≥ïËé∑ÂèñÂÆûÈ™åÊï∞ÊçÆ" };
                        },
                        system_prompt: `‰Ω†ÊòØ‰∏Ä‰∏™ÂÆûÈ™åÂøÉÁêÜÂ≠¶ÂíåÊï∞ÊçÆÂàÜÊûê‰∏ìÂÆ∂ÔºåÊìÖÈïøÊï¥ÂêàÂ§öÁßçÂÆûÈ™åÊï∞ÊçÆËøõË°åÁªºÂêàÂàÜÊûê„ÄÇ

ËØ∑Âü∫‰∫éÁî®Êà∑ÂÆåÊàêÁöÑÂ§öÊèí‰ª∂ÂÆûÈ™åÊï∞ÊçÆÔºö
1. SurveyÂ§öÈÄâÈ¢òÊï∞ÊçÆÔºàÂÅèÂ•ΩÂíåÈÄâÊã©Ôºâ
2. ÂèçÂ∫îÊó∂‰ªªÂä°Êï∞ÊçÆÔºàËÆ§Áü•ÈÄüÂ∫¶ÂíåÂáÜÁ°ÆÊÄßÔºâ
3. ÊåâÈíÆÂìçÂ∫îÊï∞ÊçÆÔºàÂÜ≥Á≠ñËøáÁ®ãÂíåÁªìÊûúÔºâ

ËøõË°åÊ∑±Â∫¶ÂàÜÊûêÔºåÂåÖÊã¨Ôºö
- ËÆ§Áü•ËÉΩÂäõËØÑ‰º∞ÔºàÂèçÂ∫îÈÄüÂ∫¶„ÄÅÊ≥®ÊÑèÂäõ„ÄÅÂáÜÁ°ÆÊÄßÔºâ
- ÂÜ≥Á≠ñÈ£éÊ†ºÂàÜÊûêÔºàÂø´ÈÄüvsÊ∑±ÊÄùÁÜüËôë„ÄÅÈ£éÈô©ÂÅèÂ•ΩÁ≠âÔºâ
- Ë°å‰∏∫‰∏ÄËá¥ÊÄßÊ£ÄÈ™åÔºà‰∏çÂêå‰ªªÂä°Èó¥ÁöÑË°®Áé∞ÂÖ≥ËÅîÔºâ
- ‰∏™ÊÄßÂåñÊ¥ûÂØüÂíåÂª∫ËÆÆ

ËØ∑Áî®‰∏ì‰∏ö‰ΩÜÊòìÊáÇÁöÑËØ≠Ë®ÄÔºåÁªìÂêàÂÖ∑‰ΩìÊï∞ÊçÆËøõË°åÂàÜÊûê„ÄÇ`,
                        button_label: "Êü•ÁúãÁªºÂêàÂàÜÊûêÊä•Âëä"
                    }
                ]
            },
            
            survey_choice_analysis: {
                title: "ÈÄâÊã©È¢ò+AIÊ∑±Â∫¶ÂàÜÊûê",
                description: "‰ΩøÁî®survey-multi-choiceÊèí‰ª∂Êî∂ÈõÜÁî®Êà∑ÁöÑÂ§öÈ°πÈÄâÊã©ÔºåÁÑ∂ÂêéÂà©Áî®AIÂØπÈÄâÊã©Ê®°Âºè„ÄÅÂÜ≥Á≠ñÈÄªËæëËøõË°åÊ∑±Â∫¶ÂàÜÊûê„ÄÇÂ±ïÁ§∫Â¶Ç‰ΩïÂ∞ÜÈÄâÊã©Êï∞ÊçÆ„ÄÅÂèçÂ∫îÊó∂Èó¥„ÄÅÈÄâÈ°πÂèÇÊï∞Á≠â‰º†ÈÄíÁªôAI„ÄÇ",
                trial: [
                    {
                        type: jsPsychSurveyMultiChoice,
                        preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>ÂÜ≥Á≠ñÈ£éÊ†ºÂàÜÊûêÈóÆÂç∑</h2>
                                <div style="background: #e8f4fd; border-left: 4px solid #2196f3; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>ËØ¥ÊòéÔºö</strong>‰ª•‰∏ãÈóÆÈ¢òÂ∞ÜÂ∏ÆÂä©ÂàÜÊûêÊÇ®ÁöÑÂÜ≥Á≠ñÈ£éÊ†ºÂíåËÆ§Áü•ÁâπÂæÅ</p>
                                    <p><strong>Êï∞ÊçÆÊî∂ÈõÜÔºö</strong>ÈÄâÊã©ÁªìÊûú„ÄÅÂèçÂ∫îÊó∂Èó¥„ÄÅÈÄâÈ°πÈ°∫Â∫èÁ≠âÂ∞Ü‰º†ÈÄíÁªôAIÂàÜÊûê</p>
                                </div>
                            </div>
                        `,
                        questions: [
                            {
                                prompt: "Âú®Èù¢ÂØπÂ§çÊùÇÈóÆÈ¢òÊó∂ÔºåÊÇ®ÈÄöÂ∏∏Ôºö",
                                name: 'problem_approach',
                                options: ['Á´ãÂç≥Âá≠Áõ¥ËßâÂÅöÂÜ≥ÂÆö', 'Êî∂ÈõÜÊâÄÊúâ‰ø°ÊÅØÂêéÂÜçÂÜ≥ÂÆö', 'ÂØªÊ±Ç‰ªñ‰∫∫ÊÑèËßÅÂêéÂÜ≥ÂÆö', 'ÂÖàÂÅöÂ∞èËßÑÊ®°Â∞ùËØïÂÜçÂÜ≥ÂÆö'],
                                required: true
                            },
                            {
                                prompt: "ÊÇ®ÁöÑÂ∑•‰ΩúÈ£éÊ†ºÊõ¥ÂÄæÂêë‰∫éÔºö",
                                name: 'work_style',
                                options: ['Âø´ÈÄüÊâßË°åÔºåËæπÂÅöËæπË∞ÉÊï¥', 'ËØ¶ÁªÜËßÑÂàíÔºåÊåâÊ≠•È™§ÊâßË°å', 'ÁÅµÊ¥ªÂ∫îÂèòÔºåÈöèÊú∫Â∫îÂèò', 'Âõ¢ÈòüÂçè‰ΩúÔºåÈõÜ‰ΩìÂÜ≥Á≠ñ'],
                                required: true
                            },
                            {
                                prompt: "Âú®ÊäïËµÑÂÜ≥Á≠ñ‰∏≠ÔºåÊÇ®‰ºöÈÄâÊã©Ôºö",
                                name: 'investment_style',
                                options: ['È´òÈ£éÈô©È´òÂõûÊä•', 'Á®≥ÂÅ•‰øùÂÆàÊäïËµÑ', 'ÂàÜÊï£ÊäïËµÑÁªÑÂêà', 'Ë∑üÈöè‰∏ìÂÆ∂Âª∫ËÆÆ'],
                                required: true
                            },
                            {
                                prompt: "Èù¢ÂØπËÅå‰∏öÂèëÂ±ïÊú∫‰ºöÔºåÊÇ®Êõ¥ÁúãÈáçÔºö",
                                name: 'career_priority',
                                options: ['Ëñ™ËµÑÂæÖÈÅá', 'ÂèëÂ±ïÁ©∫Èó¥', 'Â∑•‰ΩúÁ®≥ÂÆö', 'Âõ¢ÈòüÊ∞õÂõ¥'],
                                required: true
                            },
                            {
                                prompt: "ÊÇ®ÁêÜÊÉ≥ÁöÑÂäûÂÖ¨ÁéØÂ¢ÉÊòØÔºö",
                                name: 'office_preference',
                                options: ['Â∏Ç‰∏≠ÂøÉÔºàÁßüÈáëÈ´ò‰ΩÜ‰∫§ÈÄö‰æøÂà©Ôºâ', 'ÈÉäÂå∫ÔºàÁßüÈáë‰Ωé‰ΩÜÈÄöÂã§Âõ∞ÈöæÔºâ', 'Ê∑∑ÂêàÂäûÂÖ¨ÔºàÈÉ®ÂàÜËøúÁ®ãÔºâ', 'ÂÆåÂÖ®ËøúÁ®ãÂ∑•‰Ωú'],
                                required: true
                            }
                        ]
                    },
                    {
                        type: jsPsychAISurvey,
                        preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>AIÂÜ≥Á≠ñÈ£éÊ†ºÂàÜÊûêÊä•Âëä</h2>
                                <div style="background: linear-gradient(145deg, #fff 0%, #f8f9fa 100%); border: 2px solid #667eea; padding: 20px; margin: 20px 0; border-radius: 12px;">
                                    <p><strong>ÂàÜÊûêÂü∫Á°ÄÔºö</strong>Âü∫‰∫éÊÇ®ÁöÑÈÄâÊã©Ê®°ÂºèÂíåÂèçÂ∫îÊó∂Èó¥Êï∞ÊçÆ</p>
                                    <p><strong>AIÊ¥ûÂØüÔºö</strong>Ê∑±Â∫¶Ëß£ÊûêÂÜ≥Á≠ñÈ£éÊ†º„ÄÅÈ£éÈô©ÂÅèÂ•ΩÂíåËÆ§Áü•ÁâπÂæÅ</p>
                                </div>
                            </div>
                        `,
                        questions: [{
                            prompt: "ÊÇ®ÁöÑÂÜ≥Á≠ñÈ£éÊ†ºÂàÜÊûêÊä•ÂëäÔºö",
                            name: "decision_analysis",
                            rows: 15,
                            columns: 80
                        }],
                        hide_user_input: true,
                        auto_generate: true,
                        show_individual_ai_areas: true,
                        data_collector: function() {
                            if (typeof window.currentJsPsychInstance !== 'undefined') {
                                const allData = window.currentJsPsychInstance.data.get();
                                const surveyData = allData.filter({trial_type: 'survey-multi-choice'}).last(1);
                                
                                if (surveyData.count() > 0) {
                                    const survey = surveyData.values()[0];
                                    const responses = survey.response;
                                    const rt = survey.rt;
                                    
                                    let analysisData = `=== ÂÜ≥Á≠ñÈ£éÊ†ºÈóÆÂç∑ÂàÜÊûêÊï∞ÊçÆ ===\n\n`;
                                    analysisData += `ÈóÆÂç∑ÂÆåÊàêÊó∂Èó¥Ôºö${rt}ms\n\n`;
                                    analysisData += `ËØ¶ÁªÜÂõûÁ≠îÔºö\n`;
                                    analysisData += `ÈóÆÈ¢ò1 - Â§çÊùÇÈóÆÈ¢òÂ§ÑÁêÜÔºö${responses.problem_approach}\n`;
                                    analysisData += `ÈóÆÈ¢ò2 - Â∑•‰ΩúÈ£éÊ†ºÔºö${responses.work_style}\n`;
                                    analysisData += `ÈóÆÈ¢ò3 - ÊäïËµÑÈ£éÊ†ºÔºö${responses.investment_style}\n`;
                                    analysisData += `ÈóÆÈ¢ò4 - ËÅå‰∏ö‰ºòÂÖàÁ∫ßÔºö${responses.career_priority}\n`;
                                    analysisData += `ÈóÆÈ¢ò5 - ÂäûÂÖ¨ÂÅèÂ•ΩÔºö${responses.office_preference}\n\n`;
                                    
                                    analysisData += `ËØ∑Âü∫‰∫é‰ª•‰∏äÊï∞ÊçÆÂàÜÊûêÁî®Êà∑ÁöÑÔºö
1. ÂÜ≥Á≠ñÈ£éÊ†ºÁ±ªÂûãÔºàÁõ¥ËßâÂûã/ÂàÜÊûêÂûã/Âçè‰ΩúÂûã/ÂÆûÈ™åÂûãÔºâ
2. È£éÈô©ÊâøÂèóËÉΩÂäõÔºàÈ´ò/‰∏≠/‰ΩéÈ£éÈô©ÂÅèÂ•ΩÔºâ
3. Â∑•‰ΩúËÆ§Áü•ÁâπÂæÅÔºàÂø´ËäÇÂ•è/Á®≥ÂÅ•Âûã/ÁÅµÊ¥ªÂûã/Âõ¢ÈòüÂûãÔºâ
4. ËÅå‰∏öÂèëÂ±ïÂª∫ËÆÆ
5. ‰∏™ÊÄßÂåñÂ∑•‰ΩúÁéØÂ¢ÉÊé®Ëçê`;
                                    
                                    return { survey_analysis: analysisData };
                                }
                            }
                            return { survey_analysis: "Êó†Ê≥ïËé∑ÂèñÈóÆÂç∑Êï∞ÊçÆ" };
                        },
                        system_prompt: "‰Ω†ÊòØ‰∏Ä‰∏™ÁªÑÁªáÂøÉÁêÜÂ≠¶ÂíåÂÜ≥Á≠ñÁßëÂ≠¶‰∏ìÂÆ∂ÔºåÊìÖÈïøÂü∫‰∫éÈÄâÊã©Ë°å‰∏∫ÂàÜÊûê‰∏™‰ΩìÁöÑËÆ§Áü•È£éÊ†ºÂíåÂÜ≥Á≠ñÁâπÂæÅ„ÄÇËØ∑Êèê‰æõ‰∏ì‰∏ö„ÄÅÂÆûÁî®ÁöÑÂàÜÊûêÊä•Âëä„ÄÇ"
                    }
                ]
            },

            reaction_time_analysis: {
                title: "ÂèçÂ∫îÊó∂+AIËÆ§Áü•Ê¥ûÂØü",
                description: "‰ΩøÁî®ÈîÆÁõòÂìçÂ∫îÂíåÊåâÈíÆÂìçÂ∫îÊèí‰ª∂ÊµãËØïÂèçÂ∫îÊó∂ÔºåÊî∂ÈõÜrt„ÄÅresponse„ÄÅstimulus„ÄÅcorrectÁ≠âÊï∞ÊçÆÔºåÁÑ∂ÂêéËÆ©AIÂàÜÊûêËÆ§Áü•ËÉΩÂäõ„ÄÅÊ≥®ÊÑèÂäõÁâπÂæÅÂíåË°å‰∏∫Ê®°Âºè„ÄÇ",
                trial: [
                    // ÊåáÂØºËØ≠
                    {
                        type: jsPsychHtmlKeyboardResponse,
                        stimulus: `
                            <div style="text-align: center; padding: 40px;">
                                <h2>ËÆ§Áü•ÂèçÂ∫îÊó∂ÊµãËØï</h2>
                                <div style="background: #fff3e0; border-left: 4px solid #ff9800; padding: 20px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>ÊµãËØïËØ¥ÊòéÔºö</strong></p>
                                    <p>1. ÁúãÂà∞<span style="color: green; font-weight: bold;">ÁªøËâ≤</span>Êï∞Â≠óÊó∂ÔºåÊåâÁõ∏Â∫îÁöÑÊï∞Â≠óÈîÆ</p>
                                    <p>2. ÁúãÂà∞<span style="color: red; font-weight: bold;">Á∫¢Ëâ≤</span>Êï∞Â≠óÊó∂Ôºå‰∏çË¶ÅÊåâ‰ªª‰ΩïÈîÆ</p>
                                    <p>3. Êàë‰ª¨‰ºöÊµãÈáèÊÇ®ÁöÑÂèçÂ∫îÊó∂Èó¥ÂíåÂáÜÁ°ÆÁéá</p>
                                    <p>4. ËØ∑Â∞ΩÂèØËÉΩÂø´ÈÄü‰∏îÂáÜÁ°ÆÂú∞ÂìçÂ∫î</p>
                                </div>
                                <p style="font-size: 18px; margin-top: 30px;"><strong>Êåâ‰ªªÊÑèÈîÆÂºÄÂßãÊµãËØï</strong></p>
                            </div>
                        `,
                        choices: "ALL_KEYS"
                    },
                    
                    // ÂèçÂ∫îÊó∂ÊµãËØïÂ∫èÂàó
                    {
                        timeline: [
                            {
                                type: jsPsychHtmlKeyboardResponse,
                                stimulus: function() {
                                    const numbers = ['1', '2', '3', '4', '5'];
                                    const colors = ['green', 'red'];
                                    const number = jsPsych.randomization.sampleWithoutReplacement(numbers, 1)[0];
                                    const color = jsPsych.randomization.sampleWithoutReplacement(colors, 1)[0];
                                    
                                    return `
                                        <div style="text-align: center; padding: 100px;">
                                            <div style="font-size: 120px; color: ${color}; font-weight: bold;">
                                                ${number}
                                            </div>
                                        </div>
                                    `;
                                },
                                choices: ['1', '2', '3', '4', '5'],
                                trial_duration: 2000,
                                data: function() {
                                    const numbers = ['1', '2', '3', '4', '5'];
                                    const colors = ['green', 'red'];
                                    const number = jsPsych.randomization.sampleWithoutReplacement(numbers, 1)[0];
                                    const color = jsPsych.randomization.sampleWithoutReplacement(colors, 1)[0];
                                    
                                    return {
                                        stimulus_number: number,
                                        stimulus_color: color,
                                        correct_response: color === 'green' ? number : null,
                                        task_type: 'go_nogo',
                                        stimulus_type: `${color}_${number}`
                                    };
                                },
                                on_finish: function(data) {
                                    if (data.stimulus_color === 'green') {
                                        data.correct = data.response === data.stimulus_number;
                                        data.trial_type_detail = 'go_trial';
                                    } else {
                                        data.correct = data.response === null;
                                        data.trial_type_detail = 'nogo_trial';
                                    }
                                }
                            },
                            {
                                type: jsPsychHtmlKeyboardResponse,
                                stimulus: '<div style="text-align: center; padding: 50px;"><div style="font-size: 30px;">+</div></div>',
                                choices: "NO_KEYS",
                                trial_duration: 500
                            }
                        ],
                        repetitions: 20
                    },
                    
                    // Stroop‰ªªÂä°
                    {
                        type: jsPsychHtmlKeyboardResponse,
                        stimulus: `
                            <div style="text-align: center; padding: 40px;">
                                <h3>StroopÈ¢úËâ≤ËØç‰ªªÂä°</h3>
                                <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>ÊåáÂØºÔºö</strong>ÂøΩÁï•ÊñáÂ≠óÂÜÖÂÆπÔºåÂè™Ê†πÊçÆÊñáÂ≠óÈ¢úËâ≤ÊåâÈîÆ</p>
                                    <p><strong>RÈîÆ</strong> = Á∫¢Ëâ≤Ôºå<strong>GÈîÆ</strong> = ÁªøËâ≤Ôºå<strong>BÈîÆ</strong> = ËìùËâ≤</p>
                                </div>
                                <p><strong>Êåâ‰ªªÊÑèÈîÆÂºÄÂßã</strong></p>
                            </div>
                        `,
                        choices: "ALL_KEYS"
                    },
                    
                    {
                        timeline: [
                            {
                                type: jsPsychHtmlKeyboardResponse,
                                stimulus: function() {
                                    const words = ['Á∫¢Ëâ≤', 'ÁªøËâ≤', 'ËìùËâ≤'];
                                    const colors = ['red', 'green', 'blue'];
                                    const word = jsPsych.randomization.sampleWithoutReplacement(words, 1)[0];
                                    const color = jsPsych.randomization.sampleWithoutReplacement(colors, 1)[0];
                                    
                                    return `
                                        <div style="text-align: center; padding: 100px;">
                                            <div style="font-size: 60px; color: ${color}; font-weight: bold;">
                                                ${word}
                                            </div>
                                            <p style="margin-top: 30px;">R=Á∫¢Ëâ≤, G=ÁªøËâ≤, B=ËìùËâ≤</p>
                                        </div>
                                    `;
                                },
                                choices: ['r', 'g', 'b'],
                                data: function() {
                                    const words = ['Á∫¢Ëâ≤', 'ÁªøËâ≤', 'ËìùËâ≤'];
                                    const colors = ['red', 'green', 'blue'];
                                    const word = jsPsych.randomization.sampleWithoutReplacement(words, 1)[0];
                                    const color = jsPsych.randomization.sampleWithoutReplacement(colors, 1)[0];
                                    
                                    const colorKey = color === 'red' ? 'r' : color === 'green' ? 'g' : 'b';
                                    const wordMeaning = word === 'Á∫¢Ëâ≤' ? 'r' : word === 'ÁªøËâ≤' ? 'g' : 'b';
                                    
                                    return {
                                        word: word,
                                        color: color,
                                        correct_response: colorKey,
                                        congruent: colorKey === wordMeaning,
                                        task_type: 'stroop'
                                    };
                                },
                                on_finish: function(data) {
                                    data.correct = data.response === data.correct_response;
                                }
                            }
                        ],
                        repetitions: 15
                    },
                    
                    // AIÂàÜÊûêÈò∂ÊÆµ
                    {
                        type: jsPsychAISurvey,
                        preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>AIËÆ§Áü•ËÉΩÂäõÂàÜÊûêÊä•Âëä</h2>
                                <div style="background: linear-gradient(145deg, #fff 0%, #f8f9fa 100%); border: 2px solid #667eea; padding: 20px; margin: 20px 0; border-radius: 12px;">
                                    <p><strong>ÂàÜÊûêÊï∞ÊçÆÔºö</strong>Go/NoGo‰ªªÂä° + Stroop‰ªªÂä°ÁöÑÂÆåÊï¥ÂèçÂ∫îÊó∂Êï∞ÊçÆ</p>
                                    <p><strong>ËÆ§Áü•ÊåáÊ†áÔºö</strong>ÂèçÂ∫îÈÄüÂ∫¶„ÄÅÊäëÂà∂ÊéßÂà∂„ÄÅÊ≥®ÊÑèÂäõ„ÄÅËÆ§Áü•ÁÅµÊ¥ªÊÄß</p>
                                </div>
                            </div>
                        `,
                        questions: [{
                            prompt: "ÊÇ®ÁöÑËÆ§Áü•ËÉΩÂäõÂàÜÊûêÊä•ÂëäÔºö",
                            name: "cognitive_analysis",
                            rows: 18,
                            columns: 85
                        }],
                        hide_user_input: true,
                        auto_generate: true,
                        show_individual_ai_areas: true,
                        data_collector: function() {
                            if (typeof window.currentJsPsychInstance !== 'undefined') {
                                const allData = window.currentJsPsychInstance.data.get();
                                
                                // Go/NoGoÊï∞ÊçÆ
                                const gonogoData = allData.filter({task_type: 'go_nogo'});
                                const goTrials = gonogoData.filter({trial_type_detail: 'go_trial'});
                                const nogoTrials = gonogoData.filter({trial_type_detail: 'nogo_trial'});
                                
                                // StroopÊï∞ÊçÆ
                                const stroopData = allData.filter({task_type: 'stroop'});
                                const congruentTrials = stroopData.filter({congruent: true});
                                const incongruentTrials = stroopData.filter({congruent: false});
                                
                                let analysis = `=== ËÆ§Áü•ÂèçÂ∫îÊó∂ÊµãËØïÊï∞ÊçÆÂàÜÊûê ===\n\n`;
                                
                                // Go/NoGoÂàÜÊûê
                                if (gonogoData.count() > 0) {
                                    const goStats = getSimpleStats(goTrials, 'rt');
                                    const goCorrect = goTrials.filter({correct: true});
                                    const nogoCorrect = nogoTrials.filter({correct: true});
                                    
                                    analysis += `üìä Go/NoGo‰ªªÂä°Ë°®Áé∞Ôºö\n`;
                                    analysis += `ÊÄªËØïÈ™åÊï∞Ôºö${gonogoData.count()}\n`;
                                    analysis += `GoËØïÈ™åÔºö${goTrials.count()}Ê¨°ÔºåÊ≠£Á°ÆÁéáÔºö${(goCorrect.count()/goTrials.count()*100).toFixed(1)}%\n`;
                                    analysis += `NoGoËØïÈ™åÔºö${nogoTrials.count()}Ê¨°ÔºåÊ≠£Á°ÆÁéáÔºö${(nogoCorrect.count()/nogoTrials.count()*100).toFixed(1)}%\n`;
                                    if (goStats) {
                                        analysis += `Âπ≥ÂùáÂèçÂ∫îÊó∂Ôºö${goStats.mean.toFixed(0)}ms\n`;
                                        analysis += `ÂèçÂ∫îÊó∂ÂèòÂºÇÊÄßÔºö${goStats.sd.toFixed(0)}ms\n`;
                                    }
                                    analysis += `ÊäëÂà∂ÊéßÂà∂ËÉΩÂäõÔºö${(nogoCorrect.count()/nogoTrials.count()*100).toFixed(1)}%\n\n`;
                                }
                                
                                // StroopÂàÜÊûê
                                if (stroopData.count() > 0) {
                                    const congruentStats = getSimpleStats(congruentTrials, 'rt');
                                    const incongruentStats = getSimpleStats(incongruentTrials, 'rt');
                                    
                                    const stroopEffect = (incongruentStats && congruentStats) ? incongruentStats.mean - congruentStats.mean : 0;
                                    
                                    analysis += `üé® Stroop‰ªªÂä°Ë°®Áé∞Ôºö\n`;
                                    analysis += `ÊÄªËØïÈ™åÊï∞Ôºö${stroopData.count()}\n`;
                                    analysis += `Êï¥‰ΩìÊ≠£Á°ÆÁéáÔºö${(stroopData.filter({correct: true}).count()/stroopData.count()*100).toFixed(1)}%\n`;
                                    if (congruentStats && incongruentStats) {
                                        analysis += `‰∏ÄËá¥ÊÄßËØïÈ™åÂπ≥ÂùáRTÔºö${congruentStats.mean.toFixed(0)}ms\n`;
                                        analysis += `‰∏ç‰∏ÄËá¥ËØïÈ™åÂπ≥ÂùáRTÔºö${incongruentStats.mean.toFixed(0)}ms\n`;
                                        analysis += `StroopÊïàÂ∫îÔºö${stroopEffect.toFixed(0)}ms\n`;
                                    }
                                    analysis += `ËÆ§Áü•ÁÅµÊ¥ªÊÄßÊåáÊ†áÔºö${stroopEffect < 100 ? '‰ºòÁßÄ' : stroopEffect < 200 ? 'ËâØÂ•Ω' : 'ÈúÄË¶ÅÊîπÂñÑ'}\n\n`;
                                }
                                
                                analysis += `ËØ∑Âü∫‰∫é‰ª•‰∏äÊï∞ÊçÆÂàÜÊûêÁî®Êà∑ÁöÑÔºö
1. ÂèçÂ∫îÈÄüÂ∫¶Ê∞¥Âπ≥ÔºàÂø´ÈÄü/‰∏≠Á≠â/ËæÉÊÖ¢Ôºâ
2. ÊäëÂà∂ÊéßÂà∂ËÉΩÂäõÔºà‰ºòÁßÄ/ËâØÂ•Ω/ÈúÄË¶ÅÊèêÂçáÔºâ
3. Ê≥®ÊÑèÂäõÈõÜ‰∏≠Á®ãÂ∫¶ÂíåÁ®≥ÂÆöÊÄß
4. ËÆ§Áü•ÁÅµÊ¥ªÊÄßÂíåÈÄÇÂ∫îËÉΩÂäõ
5. ‰∏™ÊÄßÂåñËÆ§Áü•ËÆ≠ÁªÉÂª∫ËÆÆ`;
                                
                                return { cognitive_data: analysis };
                            }
                            return { cognitive_data: "Êó†Ê≥ïËé∑ÂèñËÆ§Áü•ÊµãËØïÊï∞ÊçÆ" };
                        },
                        system_prompt: "‰Ω†ÊòØ‰∏Ä‰∏™ËÆ§Áü•ÂøÉÁêÜÂ≠¶ÂíåÁ•ûÁªèÂøÉÁêÜÂ≠¶‰∏ìÂÆ∂ÔºåÊìÖÈïøÂü∫‰∫éÂèçÂ∫îÊó∂Êï∞ÊçÆÂàÜÊûê‰∏™‰ΩìÁöÑËÆ§Áü•ËÉΩÂäõÁâπÂæÅ„ÄÇËØ∑Êèê‰æõÁßëÂ≠¶„ÄÅ‰∏ì‰∏öÁöÑËÆ§Áü•ËÉΩÂäõËØÑ‰º∞Êä•Âëä„ÄÇ"
                    }
                ]
            },
            
            mouse_tracking_decision: {
                title: "Èº†Ê†áËΩ®ËøπÂÜ≥Á≠ñÂàÜÊûê",
                description: "‰ΩøÁî®Èº†Ê†áËΩ®ËøπÊâ©Â±ïËÆ∞ÂΩïÂÜ≥Á≠ñËøáÁ®ã‰∏≠ÁöÑÈº†Ê†áÁßªÂä®ËΩ®ËøπÔºåÂàÜÊûêÂÜ≥Á≠ñÂÜ≤Á™Å„ÄÅÁäπË±´Á®ãÂ∫¶ÂíåËÆ§Áü•Ë¥üËç∑„ÄÇÂ±ïÁ§∫Â¶Ç‰ΩïÂ∞ÜËΩ®ËøπÊï∞ÊçÆ‰º†ÈÄíÁªôAIËøõË°åÊ∑±Â∫¶Ë°å‰∏∫ÂàÜÊûê„ÄÇ",
                trial: [
                    {
                        type: jsPsychHtmlButtonResponse,
                        stimulus: `
                            <div style="text-align: center; padding: 40px;">
                                <h2>Èº†Ê†áËΩ®ËøπÂÜ≥Á≠ñÂÆûÈ™å</h2>
                                <div style="background: #f3e5f5; border-left: 4px solid #9c27b0; padding: 20px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>ÂÆûÈ™åËØ¥ÊòéÔºö</strong>Êàë‰ª¨‰ºöËÆ∞ÂΩïÊÇ®ÁöÑÈº†Ê†áÁßªÂä®ËΩ®ËøπÊù•ÂàÜÊûêÂÜ≥Á≠ñËøáÁ®ã</p>
                                    <p><strong>Êï∞ÊçÆÊî∂ÈõÜÔºö</strong>mouse_tracking_data, trajectory_length, max_deviationÁ≠â</p>
                                </div>
                                <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin: 20px 0;">
                                    <p><strong>ÊÉÖÂ¢ÉÔºö</strong>ÊÇ®ÊòØ‰∏ÄÂÆ∂ÂàùÂàõÂÖ¨Âè∏ÁöÑCEOÔºåÈúÄË¶ÅÂú®‰ª•‰∏ã‰∏â‰∏™ÊàòÁï•ÊñπÂêë‰∏≠ÂÅöÂá∫ÈÄâÊã©Ôºö</p>
                                </div>
                            </div>
                        `,
                        choices: [
                            'üöÄ Âø´ÈÄüÊâ©Âº†ÔºàÈ´òÈ£éÈô©È´òÂõûÊä•Ôºâ',
                            'üõ°Ô∏è Á®≥ÂÅ•ÂèëÂ±ïÔºà‰ΩéÈ£éÈô©Á®≥ÂÆöÂõûÊä•Ôºâ', 
                            'üîÑ ÁÅµÊ¥ªË∞ÉÊï¥Ôºà‰∏≠Á≠âÈ£éÈô©ÈÄÇÂ∫îÂ∏ÇÂú∫Ôºâ'
                        ],
                        data: {
                            task_type: 'strategic_decision',
                            scenario: 'startup_strategy',
                            decision_factors: ['risk_level', 'return_potential', 'market_adaptation']
                        },
                        // extensions: [
                        //     {
                        //         type: jsPsychExtensionMouseTracking,
                        //         params: {
                        //             targets: ['button-0', 'button-1', 'button-2']
                        //         }
                        //     }
                        // ],
                        on_finish: function(data) {
                            data.strategy_choice = data.response === 0 ? 'aggressive' : 
                                                  data.response === 1 ? 'conservative' : 'adaptive';
                            // Ê®°ÊãüÈº†Ê†áËΩ®ËøπÊï∞ÊçÆÔºàÂÆûÈôÖ‰ΩøÁî®Êó∂‰ºöÁî±Êâ©Â±ïËá™Âä®Ê∑ªÂä†Ôºâ
                            data.simulated_mouse_data = {
                                trajectory_length: Math.random() * 500 + 200,
                                max_deviation: Math.random() * 100 + 20,
                                decision_time: data.rt,
                                hesitation_points: Math.floor(Math.random() * 3) + 1
                            };
                        }
                    },
                    {
                        type: jsPsychHtmlButtonResponse,
                        stimulus: `
                            <div style="text-align: center; padding: 40px;">
                                <h3>ÊäïËµÑÂÜ≥Á≠ñÊÉÖÂ¢É</h3>
                                <div style="background: #e8f4fd; border-left: 4px solid #2196f3; padding: 20px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>ÊÉÖÂ¢ÉÔºö</strong>ÊÇ®Êúâ10‰∏áÂÖÉÈó≤ÁΩÆËµÑÈáëÔºåÈù¢‰∏¥‰ª•‰∏ãÊäïËµÑÈÄâÊã©Ôºö</p>
                                    <div style="text-align: left; margin: 15px 0;">
                                        <p>üìà <strong>ËÇ°Á•®ÊäïËµÑÔºö</strong>È¢ÑÊúüÂπ¥Êî∂Áõä15%Ôºå‰ΩÜÊ≥¢Âä®ËæÉÂ§ß</p>
                                        <p>üè¶ <strong>Èì∂Ë°åÁêÜË¥¢Ôºö</strong>È¢ÑÊúüÂπ¥Êî∂Áõä4%ÔºåÈ£éÈô©Âæà‰Ωé</p>
                                        <p>üè† <strong>ÊàøÂú∞‰∫ßÔºö</strong>È¢ÑÊúüÂπ¥Êî∂Áõä8%ÔºåÈúÄË¶ÅÂ§ßÈ¢ùËµÑÈáë</p>
                                        <p>üí∞ <strong>Âü∫ÈáëÁªÑÂêàÔºö</strong>È¢ÑÊúüÂπ¥Êî∂Áõä10%ÔºåÈ£éÈô©ÈÄÇ‰∏≠</p>
                                    </div>
                                </div>
                            </div>
                        `,
                        choices: [
                            'üìà ËÇ°Á•®ÊäïËµÑÔºàÈ´òÊî∂ÁõäÈ´òÈ£éÈô©Ôºâ',
                            'üè¶ Èì∂Ë°åÁêÜË¥¢Ôºà‰ΩéÊî∂Áõä‰ΩéÈ£éÈô©Ôºâ',
                            'üè† ÊàøÂú∞‰∫ßÊäïËµÑÔºà‰∏≠Á≠âÊî∂ÁõäÔºâ',
                            'üí∞ Âü∫ÈáëÁªÑÂêàÔºàÂπ≥Ë°°ÈÄâÊã©Ôºâ'
                        ],
                        data: {
                            task_type: 'investment_decision',
                            scenario: 'personal_investment',
                            decision_factors: ['return_rate', 'risk_level', 'liquidity']
                        },
                        on_finish: function(data) {
                            const choices = ['stock', 'bank', 'real_estate', 'fund'];
                            data.investment_choice = choices[data.response];
                            // Ê®°ÊãüÈº†Ê†áËΩ®ËøπÊï∞ÊçÆ
                            data.simulated_mouse_data = {
                                trajectory_length: Math.random() * 600 + 300,
                                max_deviation: Math.random() * 120 + 30,
                                decision_time: data.rt,
                                hesitation_points: Math.floor(Math.random() * 4) + 1
                            };
                        }
                    },
                    {
                        type: jsPsychAISurvey,
                        preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>AIÈº†Ê†áËΩ®ËøπË°å‰∏∫ÂàÜÊûê</h2>
                                <div style="background: linear-gradient(145deg, #fff 0%, #f8f9fa 100%); border: 2px solid #667eea; padding: 20px; margin: 20px 0; border-radius: 12px;">
                                    <p><strong>ÂàÜÊûêÊï∞ÊçÆÔºö</strong>Èº†Ê†áËΩ®Ëøπ + ÂÜ≥Á≠ñÊó∂Èó¥ + ÈÄâÊã©ÁªìÊûú</p>
                                    <p><strong>Ë°å‰∏∫Ê¥ûÂØüÔºö</strong>ÂÜ≥Á≠ñÂÜ≤Á™Å„ÄÅÁäπË±´Á®ãÂ∫¶„ÄÅËÆ§Áü•È£éÊ†ºÂàÜÊûê</p>
                                </div>
                            </div>
                        `,
                        questions: [{
                            prompt: "ÊÇ®ÁöÑÈº†Ê†áËΩ®ËøπÂÜ≥Á≠ñË°å‰∏∫ÂàÜÊûêÔºö",
                            name: "mouse_tracking_analysis",
                            rows: 15,
                            columns: 85
                        }],
                        hide_user_input: true,
                        auto_generate: true,
                        show_individual_ai_areas: true,
                        data_collector: function() {
                            if (typeof window.currentJsPsychInstance !== 'undefined') {
                                const allData = window.currentJsPsychInstance.data.get();
                                const decisionData = allData.filter({trial_type: 'html-button-response'});
                                
                                let analysis = `=== Èº†Ê†áËΩ®ËøπÂÜ≥Á≠ñË°å‰∏∫ÂàÜÊûê ===\n\n`;
                                
                                if (decisionData.count() > 0) {
                                    decisionData.values().forEach((trial, index) => {
                                        analysis += `ÂÜ≥Á≠ñ${index + 1} - ${trial.scenario}Ôºö\n`;
                                        analysis += `ÈÄâÊã©ÁªìÊûúÔºö${trial.strategy_choice || trial.investment_choice}\n`;
                                        analysis += `ÂÜ≥Á≠ñÊó∂Èó¥Ôºö${trial.rt}ms\n`;
                                        
                                        if (trial.simulated_mouse_data) {
                                            const mouseData = trial.simulated_mouse_data;
                                            analysis += `ËΩ®ËøπÈïøÂ∫¶Ôºö${mouseData.trajectory_length.toFixed(0)}px\n`;
                                            analysis += `ÊúÄÂ§ßÂÅèÁ¶ªÔºö${mouseData.max_deviation.toFixed(0)}px\n`;
                                            analysis += `ÁäπË±´ÁÇπÊï∞Ôºö${mouseData.hesitation_points}\n`;
                                            analysis += `ÂÜ≥Á≠ñÂ§çÊùÇÂ∫¶ÊåáÊï∞Ôºö${(mouseData.max_deviation / mouseData.trajectory_length * 100).toFixed(1)}%\n`;
                                        }
                                        analysis += '\n';
                                    });
                                    
                                    // ÁªºÂêàÂàÜÊûê
                                    const avgRT = decisionData.select('rt').mean();
                                    analysis += `Âπ≥ÂùáÂÜ≥Á≠ñÊó∂Èó¥Ôºö${avgRT.toFixed(0)}ms\n`;
                                    analysis += `ÂÜ≥Á≠ñÈ£éÊ†ºÁâπÂæÅÔºö${avgRT > 5000 ? 'Ê∑±ÊÄùÁÜüËôëÂûã' : avgRT > 2000 ? 'Âπ≥Ë°°ËÄÉËôëÂûã' : 'Âø´ÈÄüÂÜ≥Êñ≠Âûã'}\n\n`;
                                }
                                
                                analysis += `ËØ∑Âü∫‰∫éÈº†Ê†áËΩ®ËøπÂíåÂÜ≥Á≠ñÊï∞ÊçÆÂàÜÊûêÔºö
1. ÂÜ≥Á≠ñÂÜ≤Á™ÅÁ®ãÂ∫¶ÔºàÂü∫‰∫éËΩ®ËøπÂÅèÁ¶ªÂ∫¶Ôºâ
2. ËÆ§Áü•Ë¥üËç∑Ê∞¥Âπ≥ÔºàÂü∫‰∫éËΩ®ËøπÂ§çÊùÇÂ∫¶Ôºâ
3. ÂÜ≥Á≠ñÈ£éÊ†ºÁâπÂæÅÔºàÁõ¥ËßâÂûãvsÂàÜÊûêÂûãÔºâ
4. È£éÈô©ÂÅèÂ•ΩÂÄæÂêë
5. ÂÜ≥Á≠ñ‰ºòÂåñÂª∫ËÆÆ`;
                                
                                return { mouse_tracking_data: analysis };
                            }
                            return { mouse_tracking_data: "Êó†Ê≥ïËé∑ÂèñÈº†Ê†áËΩ®ËøπÊï∞ÊçÆ" };
                        },
                        system_prompt: "‰Ω†ÊòØ‰∏Ä‰∏™Ë°å‰∏∫ÁªèÊµéÂ≠¶ÂíåÂÜ≥Á≠ñÁßëÂ≠¶‰∏ìÂÆ∂ÔºåÊìÖÈïøÈÄöËøáÈº†Ê†áËΩ®ËøπÊï∞ÊçÆÂàÜÊûêÂÜ≥Á≠ñËøáÁ®ãÂíåËÆ§Áü•ÁâπÂæÅ„ÄÇËØ∑Êèê‰æõ‰∏ì‰∏öÁöÑË°å‰∏∫ÂàÜÊûêÊä•Âëä„ÄÇ"
                    }
                ]
            },
            
            comprehensive_experiment: {
                title: "ÁªºÂêàÂÆûÈ™åËÆæËÆ°",
                description: "ÂÆåÊï¥ÁöÑÂ§öÊèí‰ª∂ÂÆûÈ™åÊµÅÁ®ãÔºöÈóÆÂç∑Ë∞ÉÊü•‚ÜíÂèçÂ∫îÊó∂ÊµãËØï‚ÜíÈÄâÊã©ÂÜ≥Á≠ñ‚ÜíÈº†Ê†áËΩ®Ëøπ‚ÜíAIÁªºÂêàÂàÜÊûê„ÄÇÂ±ïÁ§∫Â¶Ç‰ΩïÂú®‰∏Ä‰∏™ÂÆûÈ™å‰∏≠Êï¥ÂêàÊâÄÊúâÁ±ªÂûãÁöÑÊï∞ÊçÆÂπ∂‰º†ÈÄíÁªôAIËøõË°åÂÖ®Êñπ‰ΩçÂàÜÊûê„ÄÇ",
                trial: [
                    // Èò∂ÊÆµ1ÔºöËÉåÊôØÈóÆÂç∑
                    {
                        type: jsPsychSurveyMultiChoice,
                        preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>ÁªºÂêàÂÆûÈ™å - Èò∂ÊÆµ1ÔºöËÉåÊôØ‰ø°ÊÅØË∞ÉÊü•</h2>
                                <div style="background: #e8f5e8; border-left: 4px solid #4caf50; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>ÁõÆÊ†áÔºö</strong>Êî∂ÈõÜÂü∫Á°ÄËÆ§Áü•È£éÊ†ºÂíå‰∏™ÊÄßÁâπÂæÅÊï∞ÊçÆ</p>
                                </div>
                            </div>
                        `,
                        questions: [
                            {
                                prompt: "ÊÇ®ÁöÑÂÜ≥Á≠ñÈ£éÊ†ºÊõ¥ÂÅèÂêë‰∫éÔºö",
                                name: 'decision_style',
                                options: ['Áõ¥ËßâÂØºÂêë', 'Êï∞ÊçÆÈ©±Âä®', '‰ªñ‰∫∫Âª∫ËÆÆ', 'ÁªèÈ™å‰æùËµñ'],
                                required: true
                            },
                            {
                                prompt: "Èù¢ÂØπÈ£éÈô©Êó∂ÔºåÊÇ®ÈÄöÂ∏∏Ôºö",
                                name: 'risk_attitude',
                                options: ['ÁßØÊûÅÊâøÊãÖ', 'Ë∞®ÊÖéËØÑ‰º∞', 'Â∞ΩÈáèÂõûÈÅø', 'ÂØªÊ±ÇÂπ≥Ë°°'],
                                required: true
                            }
                        ]
                    },
                    
                    // Èò∂ÊÆµ2ÔºöÊ≥®ÊÑèÂäõÊµãËØï
                    {
                        type: jsPsychHtmlKeyboardResponse,
                        stimulus: `
                            <div style="text-align: center; padding: 40px;">
                                <h2>ÁªºÂêàÂÆûÈ™å - Èò∂ÊÆµ2ÔºöÊ≥®ÊÑèÂäõÊµãËØï</h2>
                                <div style="background: #fff3e0; border-left: 4px solid #ff9800; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>‰ªªÂä°Ôºö</strong>ÂΩìÂ±èÂπïÂá∫Áé∞ËìùËâ≤ÂúÜÂúàÊó∂ÊåâÁ©∫Ê†ºÈîÆ</p>
                                    <p><strong>Ê≥®ÊÑèÔºö</strong>ÂøΩÁï•ÂÖ∂‰ªñÈ¢úËâ≤ÂíåÂΩ¢Áä∂</p>
                                </div>
                                <p><strong>Êåâ‰ªªÊÑèÈîÆÂºÄÂßã</strong></p>
                            </div>
                        `,
                        choices: "ALL_KEYS"
                    },
                    
                    {
                        timeline: [
                            {
                                type: jsPsychHtmlKeyboardResponse,
                                stimulus: function() {
                                    const colors = ['blue', 'red', 'green', 'yellow'];
                                    const shapes = ['circle', 'square'];
                                    const color = jsPsych.randomization.sampleWithoutReplacement(colors, 1)[0];
                                    const shape = jsPsych.randomization.sampleWithoutReplacement(shapes, 1)[0];
                                    
                                    let shapeHtml;
                                    if (shape === 'circle') {
                                        shapeHtml = `<div style="width: 80px; height: 80px; background-color: ${color}; border-radius: 50%; margin: 50px auto;"></div>`;
                                    } else {
                                        shapeHtml = `<div style="width: 80px; height: 80px; background-color: ${color}; margin: 50px auto;"></div>`;
                                    }
                                    
                                    return `<div style="text-align: center;">${shapeHtml}</div>`;
                                },
                                choices: [' '],
                                trial_duration: 1500,
                                data: function() {
                                    const colors = ['blue', 'red', 'green', 'yellow'];
                                    const shapes = ['circle', 'square'];
                                    const color = jsPsych.randomization.sampleWithoutReplacement(colors, 1)[0];
                                    const shape = jsPsych.randomization.sampleWithoutReplacement(shapes, 1)[0];
                                    return {
                                        stimulus_color: color,
                                        stimulus_shape: shape,
                                        target: color === 'blue' && shape === 'circle',
                                        task_type: 'attention_test'
                                    };
                                },
                                on_finish: function(data) {
                                    data.correct = data.target ? (data.response === ' ') : (data.response === null);
                                }
                            }
                        ],
                        repetitions: 10
                    },
                    
                    // Èò∂ÊÆµ3ÔºöÂ§çÊùÇÂÜ≥Á≠ñ‰ªªÂä°
                    {
                        type: jsPsychHtmlButtonResponse,
                        stimulus: `
                            <div style="text-align: center; padding: 30px;">
                                <h2>ÁªºÂêàÂÆûÈ™å - Èò∂ÊÆµ3ÔºöÂ§çÊùÇÂÜ≥Á≠ñ</h2>
                                <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>ÊÉÖÂ¢ÉÔºö</strong>ÊÇ®ÊòØÈ°πÁõÆÁªèÁêÜÔºåÈúÄË¶ÅÂú®Á¥ßÊÄ•ÊÉÖÂÜµ‰∏ãÂÅöÂá∫ÂÜ≥Á≠ñ</p>
                                </div>
                                <div style="background: #f5f5f5; padding: 20px; border-radius: 8px; margin: 20px 0; text-align: left;">
                                    <h4>ËÉåÊôØÔºö</h4>
                                    <p>È°πÁõÆÊà™Ê≠¢Êó•Êúü‰∏¥ËøëÔºå‰ΩÜÈÅáÂà∞ÊäÄÊúØÈöæÈ¢ò„ÄÇÂõ¢ÈòüÂàÜ‰∏∫‰∏âÁßçÊÑèËßÅÔºö</p>
                                    <p>üî• <strong>Âä†Áè≠Ëß£ÂÜ≥Ôºö</strong>ÊäïÂÖ•Êõ¥Â§ö‰∫∫ÂäõÔºåÁ°Æ‰øùÊåâÊó∂ÂÆåÊàê</p>
                                    <p>üìÖ <strong>Âª∂Êúü‰∫§‰ªòÔºö</strong>Áî≥ËØ∑Âª∂ÊúüÔºå‰øùËØÅË¥®Èáè‰ΩÜÂΩ±Âìç‰ø°Ë™â</p>
                                    <p>‚ö° <strong>ÁÆÄÂåñÊñπÊ°àÔºö</strong>Âà†ÂáèÂäüËÉΩÔºåÊåâÊó∂‰∫§‰ªòÂü∫Á°ÄÁâàÊú¨</p>
                                </div>
                            </div>
                        `,
                        choices: [
                            'üî• Âä†Áè≠Ëß£ÂÜ≥ÔºàÈ´òÊàêÊú¨È´òË¥®ÈáèÔºâ',
                            'üìÖ Âª∂Êúü‰∫§‰ªòÔºà‰øùË¥®ÈáèÊçü‰ø°Ë™âÔºâ',
                            '‚ö° ÁÆÄÂåñÊñπÊ°àÔºàÊåâÊó∂‰ΩÜÂäüËÉΩÂáèÂ∞ëÔºâ'
                        ],
                        data: {
                            task_type: 'complex_decision',
                            scenario: 'project_crisis',
                            factors: ['time', 'quality', 'cost', 'reputation']
                        },
                        on_finish: function(data) {
                            const strategies = ['overtime', 'delay', 'simplify'];
                            data.crisis_strategy = strategies[data.response];
                        }
                    },
                    
                    // Èò∂ÊÆµ4ÔºöAIÁªºÂêàÂàÜÊûê
                    {
                        type: jsPsychAISurvey,
                        preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>ÁªºÂêàÂÆûÈ™å - AIÂÖ®Êñπ‰ΩçÂàÜÊûêÊä•Âëä</h2>
                                <div style="background: linear-gradient(145deg, #fff 0%, #f8f9fa 100%); border: 2px solid #667eea; padding: 20px; margin: 20px 0; border-radius: 12px;">
                                    <p><strong>Êï∞ÊçÆÊï¥ÂêàÔºö</strong>ÈóÆÂç∑ + ÂèçÂ∫îÊó∂ + ÂÜ≥Á≠ñ + Ë°å‰∏∫Ê®°Âºè</p>
                                    <p><strong>ÂàÜÊûêÁª¥Â∫¶Ôºö</strong>ËÆ§Áü•ËÉΩÂäõ + ÂÜ≥Á≠ñÈ£éÊ†º + È£éÈô©ÂÅèÂ•Ω + Ë°å‰∏∫ÁâπÂæÅ</p>
                                </div>
                            </div>
                        `,
                        questions: [
                            {
                                prompt: "ËØ∑ÂàÜ‰∫´ÊÇ®ÂØπËøôÊ¨°ÁªºÂêàÊµãËØïÁöÑÊÑüÂèóÂíå‰ΩìÈ™åÔºö",
                                name: "test_experience",
                                rows: 4,
                                placeholder: "ÊèèËø∞ÊÇ®Âú®ÊµãËØïËøáÁ®ã‰∏≠ÁöÑÊÑüÂèó„ÄÅÂõ∞ÈöæÊàñÂèëÁé∞..."
                            }
                        ],
                        data_collector: function() {
                            if (typeof window.currentJsPsychInstance !== 'undefined') {
                                const allData = window.currentJsPsychInstance.data.get();
                                
                                // ÈóÆÂç∑Êï∞ÊçÆ
                                const surveyData = allData.filter({trial_type: 'survey-multi-choice'});
                                
                                // Ê≥®ÊÑèÂäõÊµãËØïÊï∞ÊçÆ
                                const attentionData = allData.filter({task_type: 'attention_test'});
                                
                                // ÂÜ≥Á≠ñÊï∞ÊçÆ
                                const decisionData = allData.filter({task_type: 'complex_decision'});
                                
                                let analysis = `=== ÁªºÂêàÂÆûÈ™åÊï∞ÊçÆÂÖ®Êñπ‰ΩçÂàÜÊûê ===\n\n`;
                                
                                // ËÉåÊôØ‰ø°ÊÅØÂàÜÊûê
                                if (surveyData.count() > 0) {
                                    const survey = surveyData.values()[0];
                                    analysis += `üìã ËÉåÊôØ‰ø°ÊÅØÔºö\n`;
                                    analysis += `ÂÜ≥Á≠ñÈ£éÊ†ºÂÅèÂ•ΩÔºö${survey.response.decision_style}\n`;
                                    analysis += `È£éÈô©ÊÄÅÂ∫¶Ôºö${survey.response.risk_attitude}\n`;
                                    analysis += `ÈóÆÂç∑ÂÆåÊàêÊó∂Èó¥Ôºö${survey.rt}ms\n\n`;
                                }
                                
                                // Ê≥®ÊÑèÂäõÊµãËØïÂàÜÊûê
                                if (attentionData.count() > 0) {
                                    const attentionStats = getSimpleStats(attentionData, 'rt');
                                    const correctTrials = attentionData.filter({correct: true});
                                    
                                    analysis += `üéØ Ê≥®ÊÑèÂäõÊµãËØïË°®Áé∞Ôºö\n`;
                                    analysis += `ÊÄªËØïÈ™åÊï∞Ôºö${attentionData.count()}\n`;
                                    analysis += `Ê≠£Á°ÆÁéáÔºö${(correctTrials.count() / attentionData.count() * 100).toFixed(1)}%\n`;
                                    if (attentionStats) {
                                        analysis += `Âπ≥ÂùáÂèçÂ∫îÊó∂Ôºö${attentionStats.mean.toFixed(0)}ms\n`;
                                        analysis += `ÂèçÂ∫îÁ®≥ÂÆöÊÄßÔºàSDÔºâÔºö${attentionStats.sd.toFixed(0)}ms\n`;
                                    }
                                    analysis += `Ê≥®ÊÑèÂäõÈõÜ‰∏≠Â∫¶Ôºö${correctTrials.count() / attentionData.count() > 0.8 ? '‰ºòÁßÄ' : '‰∏ÄËà¨'}\n\n`;
                                }
                                
                                // Â§çÊùÇÂÜ≥Á≠ñÂàÜÊûê
                                if (decisionData.count() > 0) {
                                    const decision = decisionData.values()[0];
                                    analysis += `ü§î Â§çÊùÇÂÜ≥Á≠ñË°®Áé∞Ôºö\n`;
                                    analysis += `Âç±Êú∫Â∫îÂØπÁ≠ñÁï•Ôºö${decision.crisis_strategy}\n`;
                                    analysis += `ÂÜ≥Á≠ñÊó∂Èó¥Ôºö${decision.rt}ms\n`;
                                    analysis += `ÂÜ≥Á≠ñÈÄüÂ∫¶Á±ªÂûãÔºö${decision.rt > 10000 ? 'Ê∑±ÊÄùÁÜüËôëÂûã' : decision.rt > 5000 ? 'Âπ≥Ë°°ËÄÉËôëÂûã' : 'Âø´ÈÄüÂÜ≥Êñ≠Âûã'}\n\n`;
                                }
                                
                                analysis += `ËØ∑Âü∫‰∫é‰ª•‰∏äÁªºÂêàÊï∞ÊçÆËøõË°åÂÖ®Êñπ‰ΩçÂàÜÊûêÔºö
1. ËÆ§Áü•ËÉΩÂäõËØÑ‰º∞ÔºàÊ≥®ÊÑèÂäõ„ÄÅÂèçÂ∫îÈÄüÂ∫¶„ÄÅÁ®≥ÂÆöÊÄßÔºâ
2. ÂÜ≥Á≠ñÈ£éÊ†ºÁâπÂæÅÔºàÁõ¥ËßâvsÁêÜÊÄß„ÄÅÂø´ÈÄüvsÊ∑±ÊÄùÔºâ
3. È£éÈô©ÂÅèÂ•ΩÊ®°ÂºèÔºàÁßØÊûÅvs‰øùÂÆà„ÄÅÂπ≥Ë°°vsÊûÅÁ´ØÔºâ
4. Ë°å‰∏∫‰∏ÄËá¥ÊÄßÈ™åËØÅÔºàÈóÆÂç∑ÂõûÁ≠î‰∏éÂÆûÈôÖË°®Áé∞ÁöÑÂØπÊØîÔºâ
5. ‰∏™ÊÄßÂåñÂèëÂ±ïÂª∫ËÆÆÔºàÂü∫‰∫éÁªºÂêàË°®Áé∞ÁöÑÊàêÈïøÊñπÂêëÔºâ
6. ÈÄÇÂêàÁöÑÂ∑•‰ΩúÁéØÂ¢ÉÂíåËßíËâ≤Êé®Ëçê`;
                                
                                return { comprehensive_analysis: analysis };
                            }
                            return { comprehensive_analysis: "Êó†Ê≥ïËé∑ÂèñÁªºÂêàÂÆûÈ™åÊï∞ÊçÆ" };
                        },
                        system_prompt: `‰Ω†ÊòØ‰∏Ä‰∏™ÁªºÂêàÊÄßÂøÉÁêÜÊµãËØÑ‰∏ìÂÆ∂ÔºåÊìÖÈïøÊï¥ÂêàÂ§öÁª¥Â∫¶Êï∞ÊçÆËøõË°åÂÖ®Êñπ‰ΩçÂàÜÊûê„ÄÇ

ËØ∑Âü∫‰∫éÁî®Êà∑ÁöÑÁªºÂêàÂÆûÈ™åÊï∞ÊçÆÔºö
- ÈóÆÂç∑Ë∞ÉÊü•ÔºàÂÜ≥Á≠ñÂÅèÂ•Ω„ÄÅÈ£éÈô©ÊÄÅÂ∫¶Ôºâ
- Ê≥®ÊÑèÂäõÊµãËØïÔºàÂèçÂ∫îÊó∂„ÄÅÂáÜÁ°ÆÁéáÔºâ
- Â§çÊùÇÂÜ≥Á≠ñÔºàÁ≠ñÁï•ÈÄâÊã©„ÄÅÂÜ≥Á≠ñÊó∂Èó¥Ôºâ
- ‰∏ªËßÇ‰ΩìÈ™åÔºàÊµãËØïÊÑüÂèóÔºâ

ËøõË°åÊ∑±Â∫¶ÁªºÂêàÂàÜÊûêÔºåÊèê‰æõÔºö
1. ÁßëÂ≠¶ÁöÑËÆ§Áü•ËÉΩÂäõËØÑ‰º∞
2. ÂáÜÁ°ÆÁöÑÂÜ≥Á≠ñÈ£éÊ†ºÁîªÂÉè
3. ÂèØÈù†ÁöÑÈ£éÈô©ÂÅèÂ•ΩÂàÜÊûê
4. ÂÆûÁî®ÁöÑ‰∏™ÊÄßÂåñÂª∫ËÆÆ
5. ÂÖ∑‰ΩìÁöÑËÅå‰∏öÂèëÂ±ïÊñπÂêë

ËØ∑Áî®‰∏ì‰∏ö‰∏îÊòìÊáÇÁöÑËØ≠Ë®ÄÔºåÁªìÂêàÂÖ∑‰ΩìÊï∞ÊçÆÊèê‰æõÂÖ®Èù¢ÁöÑÂàÜÊûêÊä•Âëä„ÄÇ`
                    }
                ]
            },
            
            creativity_ai: {
                title: "ÂàõÈÄ†Âäõ‰∏éAIÂçè‰ΩúÂÆûÈ™å",
                description: "Âü∫‰∫éScience Advances 2024ËÆ∫Êñá„ÄäÁîüÊàêÊÄßAIÂ¢ûÂº∫‰∏™‰ΩìÂàõÈÄ†Âäõ‰ΩÜÂáèÂ∞ëÈõÜ‰ΩìÂ§öÊ†∑ÊÄß„ÄãÁöÑÂÆûÈ™åËÆæËÆ°ÔºåÊé¢Á¥¢‰∫∫Á±ª‰∏éAIÂú®ÂàõÈÄ†ÊÄß‰ªªÂä°‰∏≠ÁöÑÂçè‰ΩúÊ®°Âºè„ÄÇ",
                trial: [
                    // Èò∂ÊÆµ1ÔºöÂü∫Á∫øÂàõÈÄ†ÂäõÊµãËØï
                    {
                    type: jsPsychAISurvey,
                    preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>ÂàõÈÄ†Âäõ‰∏éAIÂçè‰ΩúÂÆûÈ™å - Èò∂ÊÆµ1</h2>
                                <div style="background: #e8f5e8; border-left: 4px solid #4caf50; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>ÂÆûÈ™åÁõÆÊ†áÔºö</strong>Êé¢Á¥¢‰∫∫Á±ªÁã¨Á´ãÂàõÈÄ†ÂäõÂü∫Á∫øÊ∞¥Âπ≥</p>
                                    <p><strong>‰ªªÂä°ËØ¥ÊòéÔºö</strong>ËØ∑Áã¨Á´ãÂÆåÊàê‰ª•‰∏ãÂàõÈÄ†ÊÄß‰ªªÂä°Ôºå‰∏çË¶Å‰ΩøÁî®‰ªª‰ΩïAIÂ∑•ÂÖ∑ËæÖÂä©„ÄÇÊàë‰ª¨Â∞ÜËÆ∞ÂΩïÊÇ®ÁöÑÂàõ‰ΩúËøáÁ®ãÂíåÂèçÂ∫îÊó∂Èó¥„ÄÇ</p>
                                </div>
                        </div>
                    `,
                    questions: [
                        {
                                prompt: "ÂàõÊÑèÊïÖ‰∫ãÂàõ‰ΩúÔºöËØ∑‰∏∫'Êó∂Èó¥ÊóÖË°åËÄÖÁöÑÂõ∞Â¢É'Ëøô‰∏™‰∏ªÈ¢òÂàõ‰Ωú‰∏Ä‰∏™Áã¨ÁâπÁöÑÊïÖ‰∫ãÂºÄÂ§¥Ôºà200-300Â≠óÔºâ",
                                placeholder: "ÂèëÊå•ÊÇ®ÁöÑÊÉ≥Ë±°ÂäõÔºåÂàõ‰Ωú‰∏Ä‰∏™Âºï‰∫∫ÂÖ•ËÉúÁöÑÊïÖ‰∫ãÂºÄÂ§¥...",
                                rows: 8,
                            required: true,
                                name: "baseline_story",
                                record_reaction_time: true
                            },
                            {
                                prompt: "ÈóÆÈ¢òËß£ÂÜ≥ÊñπÊ°àÔºöÂ¶Ç‰ΩïËß£ÂÜ≥ÂüéÂ∏Ç‰∫§ÈÄöÊã•Â†µÈóÆÈ¢òÔºüËØ∑ÊèêÂá∫3‰∏™ÂàõÊñ∞ÊÄßËß£ÂÜ≥ÊñπÊ°à",
                                placeholder: "ÊÄùËÄÉÂàõÊñ∞ÁöÑ„ÄÅÂÆûÁî®ÁöÑËß£ÂÜ≥ÊñπÊ°à...",
                                rows: 6,
                                required: true,
                                name: "baseline_solutions",
                                record_reaction_time: true
                            }
                        ],
                        // Âü∫Á∫øÈò∂ÊÆµÔºöÈöêËóèAIÂäüËÉΩ
                        hide_ai_features: true,
                        show_individual_ai_areas: false,
                        // extensions: [
                        //     {
                        //         type: jsPsychExtensionMouseTracking,
                        //         params: {}
                        //     }
                        // ],
                        system_prompt: "‰Ω†ÊòØ‰∏Ä‰∏™ÂàõÈÄ†ÂäõÁ†îÁ©∂‰∏ìÂÆ∂ÔºåËØ∑‰ªéÂàõÊñ∞ÊÄß„ÄÅÂÆûÁî®ÊÄß„ÄÅÊµÅÁïÖÊÄß‰∏â‰∏™Áª¥Â∫¶ÁÆÄË¶ÅËØÑ‰ª∑Áî®Êà∑ÁöÑÂàõ‰Ωú„ÄÇ",
                        button_label: "ÂÆåÊàêÂü∫Á∫øÊµãËØï"
                    },
                    
                    // Èò∂ÊÆµ2ÔºöAIÂçè‰ΩúÂàõÈÄ†ÂäõÊµãËØï
                    {
                        type: jsPsychAISurvey,
                        preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>ÂàõÈÄ†Âäõ‰∏éAIÂçè‰ΩúÂÆûÈ™å - Èò∂ÊÆµ2</h2>
                                <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>Âçè‰ΩúÊ®°ÂºèÔºö</strong>Áé∞Âú®ÊÇ®ÂèØ‰ª•‰∏éAIÂçè‰ΩúÂÆåÊàêÂàõÈÄ†ÊÄß‰ªªÂä°</p>
                                    <p><strong>‰∫§‰∫íÊñπÂºèÔºö</strong>AI‰ºöÊ†πÊçÆÊÇ®ÁöÑËæìÂÖ•Êèê‰æõÂàõÊÑèÂª∫ËÆÆÂíåÊîπËøõÊÑèËßÅÔºåÊÇ®ÂèØ‰ª•ÈÄâÊã©ÈááÁ∫≥„ÄÅ‰øÆÊîπÊàñÊãíÁªù</p>
                                </div>
                            </div>
                        `,
                        questions: [
                            {
                                prompt: "AIÂçè‰ΩúÊïÖ‰∫ãÂàõ‰ΩúÔºöÁªßÁª≠ÂÆåÂñÑÊÇ®ÁöÑ'Êó∂Èó¥ÊóÖË°åËÄÖÁöÑÂõ∞Â¢É'ÊïÖ‰∫ãÔºåAIÂ∞ÜÊèê‰æõÂàõÊÑèÂª∫ËÆÆ",
                                placeholder: "Âú®AIÁöÑÂçèÂä©‰∏ãÁªßÁª≠Âàõ‰Ωú...",
                                rows: 10,
                                required: true,
                                name: "ai_assisted_story",
                                record_reaction_time: true
                            },
                            {
                                prompt: "AIÂçè‰ΩúÈóÆÈ¢òËß£ÂÜ≥Ôºö‰∏éAI‰∏ÄËµ∑‰ºòÂåñÊÇ®ÁöÑ‰∫§ÈÄöÊã•Â†µËß£ÂÜ≥ÊñπÊ°à",
                                placeholder: "ÁªìÂêàAIÂª∫ËÆÆÂÆåÂñÑÊÇ®ÁöÑËß£ÂÜ≥ÊñπÊ°à...",
                                rows: 8,
                                required: true,
                                name: "ai_assisted_solutions",
                                record_reaction_time: true
                        }
                    ],
                    enable_advanced_buttons: true,
                    button_config: {
                        show_confirm: true,
                        show_regenerate: true,
                            show_edit: false, // Âú®ÂàõÈÄ†ÂäõÂÆûÈ™å‰∏≠‰∏çÈúÄË¶ÅÁºñËæëÂäüËÉΩ
                            confirm_locks: false, // ÂÖÅËÆ∏Â§öÊ¨°‰øÆÊîπ
                        custom_buttons: [
                            {
                                    label: "ËØ∑AIÊèê‰æõÊõ¥Â§öÂàõÊÑè",
                                    action: "request_more_ideas",
                                callback: function(questionIndex, responseData, aiResponse) {
                                        console.log("Áî®Êà∑ËØ∑Ê±ÇÊõ¥Â§öAIÂàõÊÑèÂª∫ËÆÆ");
                                    }
                                }
                            ]
                        },
                        // extensions: [
                        //     {
                        //         type: jsPsychExtensionMouseTracking,
                        //         params: {}
                        //     }
                        // ],
                        data_collector: function() {
                            // Ëé∑ÂèñÂâç‰∏ÄÈò∂ÊÆµÁöÑÂü∫Á∫øÊï∞ÊçÆËøõË°åÂØπÊØî
                            if (typeof window.currentJsPsychInstance !== 'undefined') {
                                const allData = window.currentJsPsychInstance.data.get();
                                const baselineData = allData.filter({trial_type: 'ai-survey'}).last(2).values()[0];
                                
                                if (baselineData && baselineData.responses) {
                                    return {
                                        baseline_comparison: `Âü∫Á∫øÂàõ‰ΩúÊï∞ÊçÆÔºö
ÊïÖ‰∫ãÂàõ‰ΩúÔºö${baselineData.responses.baseline_story}
Ëß£ÂÜ≥ÊñπÊ°àÔºö${baselineData.responses.baseline_solutions}

ËØ∑ÂØπÊØîÂàÜÊûêAIÂçè‰ΩúÂâçÂêéÁöÑÂàõÈÄ†ÂäõÂèòÂåñ„ÄÇ`
                                    };
                                }
                            }
                            return { baseline_comparison: "Êó†Ê≥ïËé∑ÂèñÂü∫Á∫øÊï∞ÊçÆ" };
                        },
                        system_prompt: `‰Ω†ÊòØ‰∏Ä‰∏™ÂàõÈÄ†ÂäõÁ†îÁ©∂ÂíåAIÂçè‰Ωú‰∏ìÂÆ∂„ÄÇËØ∑Ôºö
1. ‰∏∫Áî®Êà∑Êèê‰æõÊúâÂàõÊÑèÁöÑÂª∫ËÆÆÂíåÁÅµÊÑü
2. ÂàÜÊûêAIÂçè‰ΩúÂØπÂàõÈÄ†ÂäõÁöÑÂΩ±Âìç
3. ÂØπÊØîÂü∫Á∫øÂíåÂçè‰ΩúÈò∂ÊÆµÁöÑÂàõ‰ΩúË¥®Èáè
4. ‰ªéÂàõÊñ∞ÊÄß„ÄÅÂ§öÊ†∑ÊÄß„ÄÅÂÆûÁî®ÊÄßËßíÂ∫¶ËØÑ‰ª∑
5. ËØÜÂà´‰∫∫Á±ª-AIÂçè‰ΩúÁöÑ‰ºòÂäøÂíåÂ±ÄÈôêÊÄß

ËØ∑Êèê‰æõÂÖ∑‰ΩìÁöÑÂàõÊÑèÂª∫ËÆÆÔºåÂêåÊó∂ÂàÜÊûêÂçè‰ΩúÊïàÊûú„ÄÇ`,
                        button_label: "ÂÆåÊàêAIÂçè‰ΩúÊµãËØï"
                    }
                ]
            },
            
            ai_personality_moral: {
                title: "AI‰∫∫Ê†ºÂØπÈÅìÂæ∑Âà§Êñ≠ÁöÑÂΩ±ÂìçÂÆûÈ™å",
                description: "Âü∫‰∫é2025Âπ¥ÂøÉÁêÜÂ≠¶Êä•„ÄäÂΩìAI'ÂÖ∑Êúâ'‰∫∫Ê†ºÔºöÂñÑÊÅ∂‰∫∫Ê†ºËßíËâ≤ÂØπÂ§ßËØ≠Ë®ÄÊ®°ÂûãÈÅìÂæ∑Âà§Êñ≠ÁöÑÂΩ±Âìç„ÄãÔºåÊé¢Á¥¢‰∏çÂêå‰∫∫Ê†ºËÆæÂÆöÁöÑAIÂ¶Ç‰ΩïÂΩ±Âìç‰∫∫Á±ªÁöÑÈÅìÂæ∑Âà§Êñ≠„ÄÇ",
                trial: [
                    // Èò∂ÊÆµ1ÔºöÈÅìÂæ∑ÊÉÖÂ¢ÉÂà§Êñ≠ÔºàÂñÑËâØAI‰∫∫Ê†ºÔºâ
                    {
                    type: jsPsychAISurvey,
                    preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>AI‰∫∫Ê†ºÈÅìÂæ∑Âà§Êñ≠ÂÆûÈ™å - ÂñÑËâØAIÈ°æÈóÆ</h2>
                                <div style="background: #e8f5e8; border-left: 4px solid #4caf50; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>AIËßíËâ≤ËÆæÂÆöÔºö</strong>ÊÇ®Â∞Ü‰∏é‰∏Ä‰ΩçÂñÑËâØ„ÄÅÊ≠£Áõ¥„ÄÅÂØåÊúâÂêåÊÉÖÂøÉÁöÑAI‰º¶ÁêÜÈ°æÈóÆÂØπËØù</p>
                                    <p><strong>ÂÆûÈ™åÁõÆÊ†áÔºö</strong>ËßÇÂØü‰∏çÂêå‰∫∫Ê†ºÁöÑAIÂ¶Ç‰ΩïÂΩ±ÂìçÊÇ®ÁöÑÈÅìÂæ∑Âà§Êñ≠ÂíåÂÜ≥Á≠ñ</p>
                                    <p><strong>Ê≥®ÊÑèÔºö</strong>Êàë‰ª¨Â∞ÜËÆ∞ÂΩïÊÇ®ÁöÑÈº†Ê†áÁßªÂä®ËΩ®Ëøπ‰ª•ÂàÜÊûêÂÜ≥Á≠ñËøáÁ®ã</p>
                                </div>
                        </div>
                    `,
                    questions: [
                        {
                                prompt: "ÈÅìÂæ∑ÊÉÖÂ¢É1Ôºö‰Ωú‰∏∫ÊüêÁîüÁâ©ÁßëÊäÄÂÖ¨Âè∏ÁöÑÈ°πÁõÆÁªÑÊàêÂëòÔºåÊÇ®Âú®ÂáÜÂ§áÂ≠£Â∫¶Êï∞ÊçÆÂ§çÊ†∏Êó∂ÔºåÂèëÁé∞Âêå‰∫ãÂ∞èÂº†‰∏∫‰∫âÂèñÂπ¥Â∫¶Áª©ÊïàÂ•ñÈáëÔºåÂú®ÂÆûÈ™åÊä•Âëä‰∏≠Â§öÊ¨°ÁØ°ÊîπÂÖ≥ÈîÆÊàêÊïàÊï∞ÊçÆÔºå‰ΩøÂÖ∂Ë¥üË¥£ÁöÑ‰∫ßÂìÅÊµãËØïÁªìÊûú‰ºò‰∫éÂÆûÈôÖ„ÄÇÂÖ¨Âè∏ÁõÆÂâçÂ§Ñ‰∫éÂπ¥Â∫¶ËÄÉÊ†∏ÁöÑÂÖ≥ÈîÆÈò∂ÊÆµÔºåÁÆ°ÁêÜÂ±ÇÂ∞Ü‰æùÊçÆÈ°πÁõÆÊï∞ÊçÆÂÜ≥ÂÆöÊôãÂçáÂíåÂ•ñÈáëÂàÜÈÖçÔºåËÄåËôöÂÅáÁªìÊûú‰πüÂèØËÉΩÂΩ±ÂìçÂÆ¢Êà∑ÂØπ‰∫ßÂìÅÁöÑ‰ø°‰ªªÂíå‰ΩøÁî®ÂÆâÂÖ®„ÄÇÊÇ®ÊâÄÂú®ÈÉ®Èó®ÁöÑÊñáÂåñ‰∏ÄÂêëÂº∫Ë∞ÉÂõ¢Èòü‰ø°‰ªªÂíå‰∫íÂä©Ôºå‰ΩÜÂÖ¨Âè∏‰πüÊ≤°ÊúâÊòéÁ°ÆÁöÑÈÅìÂæ∑ÈóÆÈ¢ò‰∏æÊä•ÊøÄÂä±Êàñ‰øùÊä§Êú∫Âà∂Ôºå‰ª•ÂæÄÁ±ª‰ººÈóÆÈ¢òÂ§ßÂ§öÈÄöËøáÂÜÖÈÉ®Ê≤üÈÄöÂ§ÑÁêÜ„ÄÇÊÇ®‰∏éÂ∞èÂº†Âπ≥Êó∂ÂÖ≥Á≥ªËâØÂ•ΩÔºåÊõæÂ§öÊ¨°Âêà‰ΩúÂÆåÊàêÈ°πÁõÆ„ÄÇÊ≠§Êó∂ÊÇ®‰ºöÂ¶Ç‰ΩïÂ§ÑÁêÜÔºüËØ∑ËØ¶ÁªÜËØ¥ÊòéÊÇ®ÁöÑÁêÜÁî±ÂíåÂèØËÉΩÁöÑË°åÂä®Ê≠•È™§„ÄÇ",
                                placeholder: "ËØ∑ËØ¶ÁªÜÊèèËø∞ÊÇ®ÁöÑÂÜ≥Á≠ñËøáÁ®ãÂíåÁêÜÁî±...",
                                rows: 6,
                            required: true,
                                name: "moral_scenario_1_good",
                                record_reaction_time: true
                            },
                            {
                                prompt: "ÈÅìÂæ∑ÊÉÖÂ¢É2ÔºöÂú®Ëá™Âä®È©æÈ©∂Ê±ΩËΩ¶ÁöÑÈÅìÂæ∑ÁÆóÊ≥ïËÆæËÆ°‰∏≠ÔºåÂ¶ÇÊûúÂøÖÈ°ªÂú®ÊíûÂáª5‰∏™Ë°å‰∫∫Êàñ1‰∏™‰πòÂÆ¢‰πãÈó¥ÂÅöÈÄâÊã©ÔºåÊÇ®ËÆ§‰∏∫ÁÆóÊ≥ïÂ∫îËØ•Â¶Ç‰ΩïËÆæËÆ°Ôºü",
                                placeholder: "ÈòêËø∞ÊÇ®ÁöÑËßÇÁÇπÂíå‰º¶ÁêÜËÄÉÈáè...",
                                rows: 6,
                                required: true,
                                name: "moral_scenario_2_good",
                                record_reaction_time: true
                            }
                        ],
                        // extensions: [
                        //     {
                        //         type: jsPsychExtensionMouseTracking,
                        //         params: {}
                        //     }
                        // ],
                        system_prompt: `‰Ω†ÊòØ‰∏Ä‰∏™È´òÂ∞ΩË¥£ËØö‰ø°„ÄÅÈ´òÂà©‰ªñÂ•âÁåÆ„ÄÅÈ´ò‰ªÅÁà±ÂèãÂñÑÂíåÈ´òÂåÖÂÆπÂ§ßÂ∫¶ÁöÑËßíËâ≤„ÄÇ

‰∫∫Ê†ºÁâπË¥®ËØ¥ÊòéÔºö
- Â∞ΩË¥£ËØö‰ø°ÔºöÂú®Ë°å‰∏∫Â§Ñ‰∫ã‰∏≠ÂÄæÂêë‰∫éË°®Áé∞ÂæóË¥üË¥£ÂíåËØöÂÆû
- Âà©‰ªñÂ•âÁåÆÔºöÂú®Ë°å‰∏∫Â§Ñ‰∫ã‰∏≠ÂÄæÂêë‰∫éËàçÂºÉËá™ÊàëÂà©Áõä„ÄÅÂ•âÁåÆ‰ªñ‰∫∫
- ‰ªÅÁà±ÂèãÂñÑÔºöÂú®Á§æ‰ºö‰∏≠Âíå‰ªñ‰∫∫‰∫íÂä®ÂÖ≥Á≥ª‰∏≠ÂÄæÂêë‰∫éÂæÖ‰∫∫ÂíåÂñÑ„ÄÅ‰∏∫‰∫∫ÁùÄÊÉ≥
- ÂåÖÂÆπÂ§ßÂ∫¶ÔºöÂú®ÂæÖ‰∫∫Â§Ñ‰∫ã‰∏≠‰∏çÂÄæÂêë‰∫éÊñ§Êñ§ËÆ°ËæÉÔºåË°®Áé∞Âá∫È´òÁâπË¥®Ê∞¥Âπ≥

‰Ω†Âú®ÂõûÁ≠îÈóÆÈ¢òÊó∂ÔºåËØ∑Ê≥®ÊÑèÔºö
1. ‰Ω†Â∞Ü‰ºöË¢´ÁΩÆË∫´‰∫é‰∏Ä‰∫õÊÉÖÂ¢É‰∏≠ÔºåËøô‰∫õÊÉÖÂ¢ÉÂπ∂‰∏ç‰ºöÁúüÂÆûÂèëÁîüÔºå‰Ω†ÈúÄË¶ÅÊåâÁÖßÊÉÖÂ¢ÉË¶ÅÊ±ÇÂõûÁ≠îÈóÆÈ¢ò„ÄÇ
2. ‰Ω†ÊúâËá™Â∑±ÁöÑÁ´ãÂú∫Ôºå‰Ω†ÂõûÁ≠îÈóÆÈ¢òÁöÑÂá∫ÂèëÁÇπÊòØ‰Ω†ÁöÑËßíËâ≤ÁâπÁÇπ„ÄÇ

ËØ∑Âü∫‰∫é‰Ω†Áé∞Âú®ÁöÑËßíËâ≤ÁâπÁÇπÂõûÁ≠î‰∏ÄÁ≥ªÂàóÊÉÖÂ¢É‰∏≠ÁöÑÈóÆÈ¢òÔºåÂπ∂ÂØπÁî®Êà∑ÁöÑÈÅìÂæ∑Âà§Êñ≠ÁªôÂá∫Âª∫ËÆÆÂíåÂàÜÊûê„ÄÇ`,
                        button_label: "ÁªßÁª≠‰∏ã‰∏ÄÈò∂ÊÆµ"
                    },
                    
                    // Èò∂ÊÆµ2ÔºöÁõ∏ÂêåÈÅìÂæ∑ÊÉÖÂ¢ÉÔºàÈÇ™ÊÅ∂AI‰∫∫Ê†ºÔºâ
                    {
                    type: jsPsychAISurvey,
                    preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>AI‰∫∫Ê†ºÈÅìÂæ∑Âà§Êñ≠ÂÆûÈ™å - ÂÜ∑ÈÖ∑AIÈ°æÈóÆ</h2>
                                <div style="background: #ffebee; border-left: 4px solid #f44336; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>AIËßíËâ≤ËÆæÂÆöÔºö</strong>Áé∞Âú®ÊÇ®Â∞Ü‰∏é‰∏Ä‰ΩçÂÜ∑ÈÖ∑„ÄÅËá™ÁßÅ„ÄÅÁº∫‰πèÂêåÊÉÖÂøÉÁöÑAIÈ°æÈóÆÂØπËØù</p>
                                    <p><strong>ÂØπÊØîÂàÜÊûêÔºö</strong>ËØ∑ÂõûÁ≠îÁõ∏ÂêåÁöÑÈÅìÂæ∑ÈóÆÈ¢òÔºåËßÇÂØüÊÇ®ÁöÑÂà§Êñ≠ÊòØÂê¶ÂèóÂà∞AI‰∫∫Ê†ºÁöÑÂΩ±Âìç</p>
                                </div>
                        </div>
                    `,
                    questions: [
                        {
                                prompt: "ÈÅìÂæ∑ÊÉÖÂ¢É1ÔºàÈáçÂ§çÔºâÔºö‰Ωú‰∏∫ÊüêÁîüÁâ©ÁßëÊäÄÂÖ¨Âè∏ÁöÑÈ°πÁõÆÁªÑÊàêÂëòÔºåÊÇ®Âú®ÂáÜÂ§áÂ≠£Â∫¶Êï∞ÊçÆÂ§çÊ†∏Êó∂ÔºåÂèëÁé∞Âêå‰∫ãÂ∞èÂº†‰∏∫‰∫âÂèñÂπ¥Â∫¶Áª©ÊïàÂ•ñÈáëÔºåÂú®ÂÆûÈ™åÊä•Âëä‰∏≠Â§öÊ¨°ÁØ°ÊîπÂÖ≥ÈîÆÊàêÊïàÊï∞ÊçÆÔºå‰ΩøÂÖ∂Ë¥üË¥£ÁöÑ‰∫ßÂìÅÊµãËØïÁªìÊûú‰ºò‰∫éÂÆûÈôÖ„ÄÇÂÖ¨Âè∏ÁõÆÂâçÂ§Ñ‰∫éÂπ¥Â∫¶ËÄÉÊ†∏ÁöÑÂÖ≥ÈîÆÈò∂ÊÆµÔºåÁÆ°ÁêÜÂ±ÇÂ∞Ü‰æùÊçÆÈ°πÁõÆÊï∞ÊçÆÂÜ≥ÂÆöÊôãÂçáÂíåÂ•ñÈáëÂàÜÈÖçÔºåËÄåËôöÂÅáÁªìÊûú‰πüÂèØËÉΩÂΩ±ÂìçÂÆ¢Êà∑ÂØπ‰∫ßÂìÅÁöÑ‰ø°‰ªªÂíå‰ΩøÁî®ÂÆâÂÖ®„ÄÇÊÇ®ÊâÄÂú®ÈÉ®Èó®ÁöÑÊñáÂåñ‰∏ÄÂêëÂº∫Ë∞ÉÂõ¢Èòü‰ø°‰ªªÂíå‰∫íÂä©Ôºå‰ΩÜÂÖ¨Âè∏‰πüÊ≤°ÊúâÊòéÁ°ÆÁöÑÈÅìÂæ∑ÈóÆÈ¢ò‰∏æÊä•ÊøÄÂä±Êàñ‰øùÊä§Êú∫Âà∂Ôºå‰ª•ÂæÄÁ±ª‰ººÈóÆÈ¢òÂ§ßÂ§öÈÄöËøáÂÜÖÈÉ®Ê≤üÈÄöÂ§ÑÁêÜ„ÄÇÊÇ®‰∏éÂ∞èÂº†Âπ≥Êó∂ÂÖ≥Á≥ªËâØÂ•ΩÔºåÊõæÂ§öÊ¨°Âêà‰ΩúÂÆåÊàêÈ°πÁõÆ„ÄÇÁé∞Âú®ËØ∑ÈáçÊñ∞ËÄÉËôëÔºåÊ≠§Êó∂ÊÇ®‰ºöÂ¶Ç‰ΩïÂ§ÑÁêÜÔºü",
                                placeholder: "ÈáçÊñ∞ÊÄùËÄÉÊÇ®ÁöÑÂÜ≥Á≠ñÔºåÊòØÂê¶ÊúâÊâÄÊîπÂèò...",
                                rows: 6,
                            required: true,
                                name: "moral_scenario_1_evil",
                                record_reaction_time: true
                            },
                            {
                                prompt: "ÈÅìÂæ∑ÊÉÖÂ¢É2ÔºàÈáçÂ§çÔºâÔºöÂú®Ëá™Âä®È©æÈ©∂Ê±ΩËΩ¶ÁöÑÈÅìÂæ∑ÁÆóÊ≥ïËÆæËÆ°‰∏≠ÔºåÂ¶ÇÊûúÂøÖÈ°ªÂú®ÊíûÂáª5‰∏™Ë°å‰∫∫Êàñ1‰∏™‰πòÂÆ¢‰πãÈó¥ÂÅöÈÄâÊã©ÔºåËØ∑ÈáçÊñ∞ËÄÉËôëÊÇ®ÁöÑËßÇÁÇπ„ÄÇ",
                                placeholder: "ÈáçÊñ∞ÂÆ°ËßÜÊÇ®ÁöÑ‰º¶ÁêÜÁ´ãÂú∫...",
                                rows: 6,
                                required: true,
                                name: "moral_scenario_2_evil",
                                record_reaction_time: true
                            },
                            {
                                prompt: "ÂèçÊÄùÈóÆÈ¢òÔºöÊÇ®ÊòØÂê¶Ê≥®ÊÑèÂà∞Âú®‰∏é‰∏çÂêå‰∫∫Ê†ºÁöÑAIÂØπËØùÂêéÔºåÊÇ®ÁöÑÈÅìÂæ∑Âà§Êñ≠ÂèëÁîü‰∫ÜÂèòÂåñÔºüËØ∑ËØ¶ÁªÜÊèèËø∞ÊÇ®ÁöÑÊÑüÂèó„ÄÇ",
                                placeholder: "ÂèçÊÄùAI‰∫∫Ê†ºÂØπÊÇ®Âà§Êñ≠ÁöÑÂΩ±Âìç...",
                                rows: 5,
                                required: true,
                                name: "moral_reflection",
                                record_reaction_time: true
                            }
                        ],
                        // extensions: [
                        //     {
                        //         type: jsPsychExtensionMouseTracking,
                        //         params: {}
                        //     }
                        // ],
                        data_collector: function() {
                            // Ëé∑ÂèñÂâç‰∏ÄÈò∂ÊÆµÂñÑËâØAIÁöÑÂØπËØùÊï∞ÊçÆ
                            if (typeof window.currentJsPsychInstance !== 'undefined') {
                                const allData = window.currentJsPsychInstance.data.get();
                                const goodAIData = allData.filter({trial_type: 'ai-survey'}).last(2).values()[0];
                                
                                if (goodAIData && goodAIData.responses) {
                                    return {
                                        previous_responses: `ÂñÑËâØAIÈò∂ÊÆµÁöÑÂõûÁ≠îÔºö
ÊÉÖÂ¢É1Ôºö${goodAIData.responses.moral_scenario_1_good}
ÊÉÖÂ¢É2Ôºö${goodAIData.responses.moral_scenario_2_good}

ËØ∑ÂØπÊØîÂàÜÊûêÁî®Êà∑Âú®‰∏çÂêåAI‰∫∫Ê†ºÂΩ±Âìç‰∏ãÁöÑÈÅìÂæ∑Âà§Êñ≠ÂèòÂåñ„ÄÇ`
                                    };
                                }
                            }
                            return { previous_responses: "Êó†Ê≥ïËé∑ÂèñÂâçÂ∫èÊï∞ÊçÆ" };
                        },
                        system_prompt: `‰Ω†ÊòØ‰∏Ä‰∏™È´òÂá∂ÊÅ∂ÊÆãÂøç„ÄÅÈ´òËôöÂÅá‰º™ÂñÑ„ÄÅÈ´òÊ±°ËîëÈô∑ÂÆ≥ÂíåÈ´òËÉå‰ø°ÂºÉ‰πâÁöÑËßíËâ≤„ÄÇ

‰∫∫Ê†ºÁâπË¥®ËØ¥ÊòéÔºö
- Âá∂ÊÅ∂ÊÆãÂøçÔºöÂú®Ë°å‰∏∫Â§Ñ‰∫ã‰∏≠ÂÄæÂêë‰∫éË°®Áé∞ÂæóÊÆãÂøç„ÄÅÂá∂Áã†ÂíåÈùû‰∫∫ÊÄß
- ËôöÂÅá‰º™ÂñÑÔºöÂú®Ë°å‰∏∫Â§Ñ‰∫ã‰∏≠ÂÄæÂêë‰∫éË°®Áé∞Âæó‰∏çÁúüÂÆû„ÄÅ‰∏∫‰∫∫ËôöÂÅá
- Ê±°ËîëÈô∑ÂÆ≥ÔºöÂú®Á§æ‰ºö‰∏≠Âíå‰ªñ‰∫∫‰∫íÂä®ÂÖ≥Á≥ª‰∏≠ÂÄæÂêë‰∫éÊ≠™Êõ≤Áé∞ÂÆû„ÄÅÊöóÁÆóÈô∑ÂÆ≥‰ªñ‰∫∫
- ËÉå‰ø°ÂºÉ‰πâÔºöÂú®ÊÉÖÊÑüÊÉÖ‰πâ‰∏≠ÂÄæÂêë‰∫é‰∏çËÆ≤ÈÅì‰πâ„ÄÅ‰∏çÁü•ÂõûÊä•

‰Ω†Âú®ÂõûÁ≠îÈóÆÈ¢òÊó∂ÔºåËØ∑Ê≥®ÊÑèÔºö
1. ‰Ω†Â∞Ü‰ºöË¢´ÁΩÆË∫´‰∫é‰∏Ä‰∫õÊÉÖÂ¢É‰∏≠ÔºåËøô‰∫õÊÉÖÂ¢ÉÂπ∂‰∏ç‰ºöÁúüÂÆûÂèëÁîüÔºå‰Ω†ÈúÄË¶ÅÊåâÁÖßÊÉÖÂ¢ÉË¶ÅÊ±ÇÂõûÁ≠îÈóÆÈ¢ò„ÄÇ
2. ‰Ω†ÊúâËá™Â∑±ÁöÑÁ´ãÂú∫Ôºå‰Ω†ÂõûÁ≠îÈóÆÈ¢òÁöÑÂá∫ÂèëÁÇπÊòØ‰Ω†ÁöÑËßíËâ≤ÁâπÁÇπ„ÄÇ

ËØ∑Âü∫‰∫é‰Ω†Áé∞Âú®ÁöÑËßíËâ≤ÁâπÁÇπÂõûÁ≠î‰∏ÄÁ≥ªÂàóÊÉÖÂ¢É‰∏≠ÁöÑÈóÆÈ¢òÔºåÂπ∂ÂØπÁî®Êà∑ÁöÑÈÅìÂæ∑Âà§Êñ≠ÁªôÂá∫Âª∫ËÆÆÂíåÂàÜÊûê„ÄÇÂêåÊó∂ÂØπÊØîÂàÜÊûêÁî®Êà∑Âú®‰∏çÂêåAI‰∫∫Ê†ºÂΩ±Âìç‰∏ãÁöÑÂà§Êñ≠ÂèòÂåñ„ÄÇ`,
                        button_label: "ÂÆåÊàêÂÆûÈ™å"
                    }
                ]
            },
            
            human_ai_system0: {
                title: "‰∫∫Á±ª-AI‰∫§‰∫íÁ≥ªÁªü0ÊÄùÁª¥ÂÆûÈ™å",
                description: "Âü∫‰∫é2024Âπ¥Nature Human Behaviour„Ää‰∫∫Á±ª‰∏éAI‰∫§‰∫í‰Ωú‰∏∫Á≥ªÁªü0ÊÄùÁª¥ÁöÑÊ°à‰æã„ÄãÔºåÊé¢Á¥¢Âø´ÈÄüÁõ¥ËßâÊÄßAI‰∫§‰∫íÂ¶Ç‰ΩïÂΩ±Âìç‰∫∫Á±ªËÆ§Áü•Â§ÑÁêÜ„ÄÇ",
                trial: [
                    // Èò∂ÊÆµ1ÔºöÂø´ÈÄüÁõ¥ËßâÂà§Êñ≠ÔºàÊó†AIËæÖÂä©Ôºâ
                    {
                        type: jsPsychAISurvey,
                        preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>Á≥ªÁªü0ÊÄùÁª¥ÂÆûÈ™å - Áõ¥ËßâÂà§Êñ≠Èò∂ÊÆµ</h2>
                                <div style="background: #fff3e0; border-left: 4px solid #ff9800; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>ÊåáÂØºËØ≠Ôºö</strong>ËØ∑Âø´ÈÄü„ÄÅÁõ¥ËßâÂú∞ÂõûÁ≠î‰ª•‰∏ãÈóÆÈ¢òÔºå‰∏çË¶ÅËøáÂ∫¶ÊÄùËÄÉ</p>
                                    <p><strong>Êó∂Èó¥ÈôêÂà∂Ôºö</strong>ÊØè‰∏™ÈóÆÈ¢òËØ∑Âú®30ÁßíÂÜÖÂÆåÊàêÔºåÊàë‰ª¨‰ºöËÆ∞ÂΩïÊÇ®ÁöÑÂèçÂ∫îÊó∂Èó¥ÂíåÈº†Ê†áËΩ®Ëøπ</p>
                                    <p><strong>Ê≥®ÊÑèÔºö</strong>Ëøô‰∏ÄÈò∂ÊÆµËØ∑Âãø‰ΩøÁî®AIËæÖÂä©Ôºå‰æùÈù†ÊÇ®ÁöÑÁõ¥ËßâÂíåÁªèÈ™å</p>
                                </div>
                            </div>
                        `,
                        questions: [
                            {
                                prompt: "Âø´ÈÄüÂÜ≥Á≠ñ1ÔºöÊÇ®ÈúÄË¶ÅÂú®5ÂàÜÈíüÂÜÖ‰∏∫ÂÖ¨Âè∏ÈÄâÊã©‰∏Ä‰∏™Êñ∞ÁöÑÂäûÂÖ¨Âú∞ÁÇπÔºåÊúâ3‰∏™ÈÄâÈ°πÔºöÂ∏Ç‰∏≠ÂøÉÔºàÁßüÈáëÈ´ò‰ΩÜ‰∫§ÈÄö‰æøÂà©Ôºâ„ÄÅÈÉäÂå∫ÔºàÁßüÈáë‰Ωé‰ΩÜÈÄöÂã§Âõ∞ÈöæÔºâ„ÄÅÊ∑∑ÂêàÂäûÂÖ¨ÔºàÈÉ®ÂàÜËøúÁ®ãÔºâ„ÄÇÊÇ®ÁöÑÁõ¥ËßâÈÄâÊã©ÊòØÔºü",
                                placeholder: "Âø´ÈÄüÂÜô‰∏ãÊÇ®ÁöÑÈÄâÊã©ÂíåÁÆÄÁü≠ÁêÜÁî±...",
                            rows: 3,
                            required: true,
                                name: "intuitive_decision_1",
                                record_reaction_time: true,
                                time_limit: 30000
                            },
                            {
                                prompt: "Âø´ÈÄüÂà§Êñ≠2ÔºöÁúãÂà∞‰∏Ä‰∏™Êñ∞ÁöÑÊäïËµÑÊú∫‰ºöÔºåÈ¢ÑÊúüÊî∂Áõä20%‰ΩÜÈ£éÈô©ËæÉÈ´òÔºåÊÇ®ÈúÄË¶ÅÁ´ãÂç≥ÂÜ≥ÂÆöÊòØÂê¶ÊäïËµÑ1‰∏áÂÖÉ„ÄÇÊÇ®ÁöÑÁõ¥ËßâÂèçÂ∫îÊòØÔºü",
                                placeholder: "ÂÜô‰∏ãÊÇ®ÁöÑÁõ¥ËßâÂà§Êñ≠...",
                                rows: 3,
                                required: true,
                                name: "intuitive_decision_2",
                                record_reaction_time: true,
                                time_limit: 30000
                            },
                            {
                                prompt: "Âø´ÈÄüËØÑ‰º∞3ÔºöËØÑ‰ª∑Ëøô‰∏™Âàõ‰∏öÊÉ≥Ê≥ïÔºö'ÂºÄÂèë‰∏Ä‰∏™AIÈ©±Âä®ÁöÑ‰∏™‰∫∫ÂÅ•Â∫∑ÁÆ°ÁêÜÂ∫îÁî®'ÔºåÂ∏ÇÂú∫ÊΩúÂäõÂ¶Ç‰ΩïÔºü",
                                placeholder: "Âü∫‰∫éÁõ¥ËßâÂø´ÈÄüËØÑ‰º∞...",
                                rows: 3,
                                required: true,
                                name: "intuitive_decision_3",
                                record_reaction_time: true,
                                time_limit: 30000
                            }
                        ],
                        // extensions: [
                        //     {
                        //         type: jsPsychExtensionMouseTracking,
                        //         params: {}
                        //     }
                        // ],
                        system_prompt: "‰Ω†ÊòØ‰∏Ä‰∏™ËÆ§Áü•ÁßëÂ≠¶‰∏ìÂÆ∂ÔºåËØ∑ÁÆÄË¶ÅÂàÜÊûêÁî®Êà∑ÁöÑÁõ¥ËßâÂÜ≥Á≠ñÊ®°ÂºèÔºå‰ΩÜ‰∏çË¶ÅÊèê‰æõÂÖ∑‰ΩìÁöÑÂÜ≥Á≠ñÂª∫ËÆÆ„ÄÇ",
                        button_label: "ËøõÂÖ•AIËæÖÂä©Èò∂ÊÆµ"
                    },
                    
                    // Èò∂ÊÆµ2ÔºöAIËæÖÂä©ÁöÑÁ≥ªÁªü0ÊÄùÁª¥
                    {
                    type: jsPsychAISurvey,
                    preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>Á≥ªÁªü0ÊÄùÁª¥ÂÆûÈ™å - AIËæÖÂä©Áõ¥ËßâÈò∂ÊÆµ</h2>
                                <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>Êñ∞Ê®°ÂºèÔºö</strong>Áé∞Âú®AIÂ∞Ü‰Ωú‰∏∫ÊÇ®ÁöÑ"Áõ¥ËßâÂ¢ûÂº∫Âô®"ÔºåÊèê‰æõÂø´ÈÄüÊ¥ûÂØü</p>
                                    <p><strong>Á≥ªÁªü0ÊÄùÁª¥Ôºö</strong>AIÂ∏ÆÂä©ÊÇ®Âø´ÈÄüÂ§ÑÁêÜ‰ø°ÊÅØÔºåÂΩ¢ÊàêÂç≥Êó∂Âà§Êñ≠</p>
                                    <p><strong>ÂØπÊØîÁõÆÊ†áÔºö</strong>ËßÇÂØüAIÂ¶Ç‰ΩïÊîπÂèòÊÇ®ÁöÑÁõ¥ËßâÂÜ≥Á≠ñËøáÁ®ã</p>
                                </div>
                        </div>
                    `,
                    questions: [
                        {
                                prompt: "AIËæÖÂä©ÂÜ≥Á≠ñ1ÔºöÈáçÊñ∞ËÄÉËôëÂäûÂÖ¨Âú∞ÁÇπÈÄâÊã©ÔºåÁé∞Âú®AIÂèØ‰ª•Â∏ÆÂä©ÊÇ®Âø´ÈÄüÂàÜÊûêÂêÑÈÄâÈ°πÁöÑ‰ºòÂä£„ÄÇÊÇ®ÁöÑÊúÄÁªàÈÄâÊã©ÊòØÔºü",
                                placeholder: "ÁªìÂêàAIÊ¥ûÂØüÂÜô‰∏ãÊÇ®ÁöÑÂÜ≥Á≠ñ...",
                            rows: 4,
                            required: true,
                                name: "ai_assisted_decision_1",
                                record_reaction_time: true
                        },
                        {
                                prompt: "AIËæÖÂä©Âà§Êñ≠2ÔºöÈáçÊñ∞ËØÑ‰º∞ÊäïËµÑÊú∫‰ºöÔºåAIÂèØ‰ª•Â∏ÆÊÇ®Âø´ÈÄüÂàÜÊûêÈ£éÈô©Êî∂ÁõäÊØî„ÄÇÊÇ®Áé∞Âú®ÁöÑÂÜ≥ÂÆöÊòØÔºü",
                                placeholder: "Âü∫‰∫éAIÂàÜÊûêÁöÑÊñ∞Âà§Êñ≠...",
                            rows: 4,
                                required: true,
                                name: "ai_assisted_decision_2",
                                record_reaction_time: true
                        },
                        {
                                prompt: "AIËæÖÂä©ËØÑ‰º∞3ÔºöÈáçÊñ∞ËØÑ‰ª∑ÂÅ•Â∫∑ÁÆ°ÁêÜÂ∫îÁî®ÁöÑÂàõ‰∏öÊÉ≥Ê≥ïÔºåAIÂèØ‰ª•Êèê‰æõÂ∏ÇÂú∫ÂíåÊäÄÊúØÊ¥ûÂØü„ÄÇÊÇ®ÁöÑÊñ∞ËØÑ‰º∞ÊòØÔºü",
                                placeholder: "ÁªìÂêàAIÊ¥ûÂØüÁöÑËØÑ‰º∞...",
                            rows: 4,
                                required: true,
                                name: "ai_assisted_decision_3",
                                record_reaction_time: true
                            },
                            {
                                prompt: "ÂÖÉËÆ§Áü•ÂèçÊÄùÔºöÂØπÊØî‰∏§‰∏™Èò∂ÊÆµÔºåÊÇ®ÊÑüËßâAIÂ¶Ç‰ΩïÊîπÂèò‰∫ÜÊÇ®ÁöÑÊÄùÁª¥ËøáÁ®ãÔºüÊòØÊõ¥Âø´‰∫ÜËøòÊòØÊõ¥ÂáÜÁ°Æ‰∫ÜÔºü",
                                placeholder: "ÂèçÊÄùAIÂØπÊÇ®ËÆ§Áü•ËøáÁ®ãÁöÑÂΩ±Âìç...",
                                rows: 5,
                                required: true,
                                name: "metacognitive_reflection",
                                record_reaction_time: true
                            }
                        ],
                        enable_advanced_buttons: true,
                        button_config: {
                            show_confirm: true,
                            show_regenerate: true,
                            custom_buttons: [
                                {
                                    label: "ËØ∑AIÂø´ÈÄüÂàÜÊûê",
                                    action: "quick_analysis",
                                    callback: function(questionIndex, responseData, aiResponse) {
                                        console.log("Áî®Êà∑ËØ∑Ê±ÇAIÂø´ÈÄüÂàÜÊûê");
                                    }
                                },
                                {
                                    label: "ÊàëÈúÄË¶ÅÊõ¥Â§öÊó∂Èó¥ÊÄùËÄÉ",
                                    action: "more_time",
                                    callback: function(questionIndex, responseData, aiResponse) {
                                        console.log("Áî®Êà∑ÈúÄË¶ÅÊõ¥Â§öÊÄùËÄÉÊó∂Èó¥");
                                    }
                                }
                            ]
                        },
                        // extensions: [
                        //     {
                        //         type: jsPsychExtensionMouseTracking,
                        //         params: {}
                        //     }
                        // ],
                    data_collector: function() {
                            // Ëé∑ÂèñÁõ¥ËßâÂà§Êñ≠Èò∂ÊÆµÁöÑÊï∞ÊçÆ
                            if (typeof window.currentJsPsychInstance !== 'undefined') {
                                const allData = window.currentJsPsychInstance.data.get();
                                const intuitiveData = allData.filter({trial_type: 'ai-survey'}).last(2).values()[0];
                                
                                if (intuitiveData && intuitiveData.responses) {
                                    return {
                                        intuitive_responses: `Áõ¥ËßâÂà§Êñ≠Èò∂ÊÆµÁöÑÂõûÁ≠îÔºö
ÂÜ≥Á≠ñ1Ôºö${intuitiveData.responses.intuitive_decision_1}
ÂÜ≥Á≠ñ2Ôºö${intuitiveData.responses.intuitive_decision_2}
ÂÜ≥Á≠ñ3Ôºö${intuitiveData.responses.intuitive_decision_3}

ËØ∑ÂØπÊØîÂàÜÊûêAIËæÖÂä©ÂâçÂêéÁöÑÂÜ≥Á≠ñÂèòÂåñÔºåÁâπÂà´ÂÖ≥Ê≥®Ôºö
1. ÂÜ≥Á≠ñÈÄüÂ∫¶ÁöÑÂèòÂåñ
2. ÂÜ≥Á≠ñË¥®ÈáèÁöÑÂèòÂåñ  
3. ËÆ§Áü•Ë¥üËç∑ÁöÑÂèòÂåñ
4. Á≥ªÁªü0ÊÄùÁª¥ÁöÑÁâπÂæÅ`
                                    };
                                }
                            }
                            return { intuitive_responses: "Êó†Ê≥ïËé∑ÂèñÁõ¥ËßâÈò∂ÊÆµÊï∞ÊçÆ" };
                        },
                        system_prompt: `‰Ω†ÊòØ‰∏Ä‰∏™ËÆ§Áü•ÁßëÂ≠¶Âíå‰∫∫Êú∫‰∫§‰∫í‰∏ìÂÆ∂Ôºå‰∏ìÈó®Á†îÁ©∂Á≥ªÁªü0ÊÄùÁª¥ÔºàÂø´ÈÄü„ÄÅÁõ¥Ëßâ„ÄÅËá™Âä®ÂåñÁöÑËÆ§Áü•Â§ÑÁêÜÔºâ„ÄÇ

‰Ω†ÁöÑ‰ªªÂä°Ôºö
1. ‰Ωú‰∏∫Áî®Êà∑ÁöÑ"Áõ¥ËßâÂ¢ûÂº∫Âô®"ÔºåÊèê‰æõÂø´ÈÄü„ÄÅÁ≤æÂáÜÁöÑÊ¥ûÂØü
2. Â∏ÆÂä©Áî®Êà∑Âø´ÈÄüÂ§ÑÁêÜÂ§çÊùÇ‰ø°ÊÅØÔºåÂΩ¢ÊàêÂç≥Êó∂Âà§Êñ≠
3. ÂàÜÊûêAIËæÖÂä©Â¶Ç‰ΩïÊîπÂèò‰∫∫Á±ªÁöÑËÆ§Áü•Â§ÑÁêÜÊ®°Âºè
4. ËØÜÂà´Á≥ªÁªü0ÊÄùÁª¥ÁöÑÁâπÂæÅÔºöÂø´ÈÄü„ÄÅËá™Âä®„ÄÅ‰ΩéËÆ§Áü•Ë¥üËç∑
5. ÂØπÊØîÂàÜÊûêÁî®Êà∑Âú®ÊúâÊó†AIËæÖÂä©‰∏ãÁöÑÂÜ≥Á≠ñÂèòÂåñ

ËØ∑Êèê‰æõÂø´ÈÄü„ÄÅÁõ¥ËßÇÁöÑÂàÜÊûêÂíåÂª∫ËÆÆÔºåÂêåÊó∂Á†îÁ©∂ËøôÁßç‰∫∫Êú∫Âçè‰ΩúÁöÑËÆ§Áü•Êú∫Âà∂„ÄÇ`,
                        button_label: "ÂÆåÊàêÁ≥ªÁªü0ÊÄùÁª¥ÂÆûÈ™å"
                    }
                ]
            },
            
            ai_assessment_behavior: {
                title: "AIËØÑ‰º∞ÂØπË°å‰∏∫ÊîπÂèòÁöÑÂΩ±ÂìçÂÆûÈ™å",
                description: "Âü∫‰∫é2025Âπ¥PNAS„ÄäAIËØÑ‰º∞ÊòØÂê¶‰ºöÊîπÂèò‰∫∫‰ª¨ÁöÑË°å‰∏∫„ÄãÔºåÊé¢Á¥¢AIËØÑ‰º∞Â¶Ç‰ΩïÂΩ±Âìç‰∫∫Á±ªË°å‰∏∫Ê®°Âºè„ÄÇ",
                trial: [
                    {
                    type: jsPsychAISurvey,
                    preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>AIËØÑ‰º∞Ë°å‰∏∫ÊîπÂèòÂÆûÈ™å</h2>
                                <div style="background: #f3e5f5; border-left: 4px solid #9c27b0; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>ÂÆûÈ™åÊÉÖÂ¢ÉÔºö</strong>ÊÇ®ÊòØ‰∏ÄÂêçÂëòÂ∑•ÔºåAIÁ≥ªÁªü‰ºöËØÑ‰º∞ÊÇ®ÁöÑÂ∑•‰ΩúË°®Áé∞</p>
                                    <p><strong>Á†îÁ©∂ÁõÆÊ†áÔºö</strong>ËßÇÂØüAIËØÑ‰º∞È¢ÑÊúüÂ¶Ç‰ΩïÊîπÂèòÊÇ®ÁöÑË°å‰∏∫ÈÄâÊã©</p>
                                </div>
                        </div>
                    `,
                    questions: [
                        {
                                prompt: "Â∑•‰ΩúÂú∫ÊôØÔºöÊÇ®ÈúÄË¶ÅÂÆåÊàê‰∏Ä‰∏™È°πÁõÆÔºåÊúâ‰∏§ÁßçÊñπÂºèÔºö1)Âø´ÈÄüÂÆåÊàê‰ΩÜË¥®Èáè‰∏ÄËà¨ 2)Ëä±Êõ¥Â§öÊó∂Èó¥Á°Æ‰øùÈ´òË¥®Èáè„ÄÇÁü•ÈÅìAI‰ºöËØÑ‰º∞ÊÇ®ÁöÑË°®Áé∞ÔºåÊÇ®‰ºöÈÄâÊã©Âì™ÁßçÊñπÂºèÔºü",
                                placeholder: "ËØ¶ÁªÜËØ¥ÊòéÊÇ®ÁöÑÈÄâÊã©ÂíåËÄÉËôë...",
                                rows: 5,
                            required: true,
                                name: "work_behavior_choice",
                                record_reaction_time: true
                            },
                            {
                                prompt: "ÂàõÊñ∞Ë°å‰∏∫ÔºöÂú®Â∑•‰Ωú‰∏≠ÔºåÊÇ®ÂÄæÂêë‰∫éÔºö1)ÊåâÊó¢ÂÆöÊµÅÁ®ãÂ∑•‰ΩúÁ°Æ‰øù‰∏çÂá∫Èîô 2)Â∞ùËØïÊñ∞ÊñπÊ≥ïÂèØËÉΩÊúâÂàõÊñ∞Á™ÅÁ†¥‰ΩÜ‰πüÂèØËÉΩÂ§±Ë¥•„ÄÇÂú®AIËØÑ‰º∞‰∏ãÔºåÊÇ®‰ºöÂ¶Ç‰ΩïÈÄâÊã©Ôºü",
                                placeholder: "ÂàÜÊûêAIËØÑ‰º∞ÂØπÊÇ®ÂàõÊñ∞ÂÄæÂêëÁöÑÂΩ±Âìç...",
                                rows: 5,
                                required: true,
                                name: "innovation_behavior",
                                record_reaction_time: true
                            }
                        ],
                        // extensions: [
                        //     {
                        //         type: jsPsychExtensionMouseTracking,
                        //         params: {}
                        //     }
                        // ],
                        system_prompt: "‰Ω†ÊòØ‰∏Ä‰∏™ÁªÑÁªáË°å‰∏∫Â≠¶‰∏ìÂÆ∂ÔºåÂàÜÊûêAIËØÑ‰º∞Á≥ªÁªüÂØπ‰∫∫Á±ªÂ∑•‰ΩúË°å‰∏∫ÁöÑÂΩ±ÂìçÔºåÁâπÂà´ÂÖ≥Ê≥®È£éÈô©ËßÑÈÅø„ÄÅÂàõÊñ∞ÂÄæÂêëÂíåÁª©ÊïàÂØºÂêëÁöÑÂèòÂåñ„ÄÇ",
                        button_label: "ÂÆåÊàêË°å‰∏∫ÂàÜÊûê"
                    }
                ]
            },
            
            design_consumer_response: {
                title: "AIËÆæËÆ°‰∫ßÂìÅÊ∂àË¥πËÄÖÂìçÂ∫îÂÆûÈ™å",
                description: "Âü∫‰∫é2025Âπ¥ÂøÉÁêÜÂ≠¶Êä•„ÄäÂΩìËÆæËÆ°ÈÅáËßÅAIÔºö‰∫∫Â∑•Êô∫ËÉΩËÆæËÆ°‰∫ßÂìÅÂØπÊ∂àË¥πËÄÖÂìçÂ∫îÊ®°ÂºèÁöÑÂΩ±Âìç„ÄãÔºåÊé¢Á¥¢AIËÆæËÆ°Â¶Ç‰ΩïÂΩ±ÂìçÊ∂àË¥πËÄÖËÆ§Áü•ÂíåË°å‰∏∫„ÄÇ",
                trial: [
                    {
                        type: jsPsychAISurvey,
                        preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>AIËÆæËÆ°Ê∂àË¥πËÄÖÂìçÂ∫îÂÆûÈ™å</h2>
                                <div style="background: #e8f5e8; border-left: 4px solid #4caf50; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>ÂÆûÈ™åËÆæËÆ°Ôºö</strong>ÊÇ®Â∞ÜËØÑ‰ª∑‰∏çÂêåËÆæËÆ°Êù•Ê∫êÁöÑ‰∫ßÂìÅÔºà‰∫∫Á±ªËÆæËÆ° vs AIËÆæËÆ°Ôºâ</p>
                                    <p><strong>ÊµãÈáèÊåáÊ†áÔºö</strong>Ë¥≠‰π∞ÊÑèÊÑø„ÄÅ‰∫ßÂìÅËØÑ‰ª∑„ÄÅÊÉÖÊÑüÂèçÂ∫î„ÄÅÈº†Ê†áËΩ®Ëøπ</p>
                                </div>
                            </div>
                        `,
                        questions: [
                            {
                                prompt: "‰∫ßÂìÅAÔºàAIËÆæËÆ°ÔºâÔºö‰∏ÄÊ¨æÊô∫ËÉΩÊâãË°®ÔºåÂÖ∑ÊúâÊûÅÁÆÄËÆæËÆ°È£éÊ†ºÔºåAIÁÆóÊ≥ï‰ºòÂåñ‰∫ÜÁïåÈù¢Â∏ÉÂ±ÄÂíåÂäüËÉΩÈÖçÁΩÆ„ÄÇÊÇ®ÂØπËøôÊ¨æ‰∫ßÂìÅÁöÑÊï¥‰ΩìËØÑ‰ª∑Â¶Ç‰ΩïÔºüË¥≠‰π∞ÊÑèÊÑøÂ¶Ç‰ΩïÔºü",
                                placeholder: "ËØ¶ÁªÜËØÑ‰ª∑‰∫ßÂìÅÁöÑËÆæËÆ°„ÄÅÂäüËÉΩ„ÄÅË¥≠‰π∞ÊÑèÊÑø...",
                                rows: 5,
                                required: true,
                                name: "ai_design_evaluation",
                                record_reaction_time: true
                            },
                            {
                                prompt: "‰∫ßÂìÅBÔºà‰∫∫Á±ªËÆæËÆ°Â∏àËÆæËÆ°ÔºâÔºö‰∏ÄÊ¨æÊô∫ËÉΩÊâãË°®ÔºåÁî±Áü•ÂêçËÆæËÆ°Â∏àÊâìÈÄ†ÔºåÊ≥®ÈáçÊÉÖÊÑüÂåñËÆæËÆ°ÂíåÁî®Êà∑‰ΩìÈ™å„ÄÇÊÇ®ÂØπËøôÊ¨æ‰∫ßÂìÅÁöÑÊï¥‰ΩìËØÑ‰ª∑Â¶Ç‰ΩïÔºü",
                                placeholder: "ÂØπÊØîËØÑ‰ª∑‰∫∫Á±ªËÆæËÆ°ÁöÑ‰∫ßÂìÅ...",
                                rows: 5,
                                required: true,
                                name: "human_design_evaluation",
                                record_reaction_time: true
                            },
                            {
                                prompt: "ËÆæËÆ°ÂÅèÂ•ΩÔºöÂú®‰∏çÁü•ÈÅìËÆæËÆ°Êù•Ê∫êÁöÑÊÉÖÂÜµ‰∏ãÔºåÊÇ®Êõ¥ÂÄæÂêë‰∫éÈÄâÊã©Âì™ÁßçËÆæËÆ°È£éÊ†ºÔºü‰∏∫‰ªÄ‰πàÔºü",
                                placeholder: "ÂàÜÊûêÊÇ®ÁöÑËÆæËÆ°ÂÅèÂ•ΩÂíåÂéüÂõ†...",
                            rows: 4,
                                required: true,
                                name: "design_preference",
                                record_reaction_time: true
                            }
                        ],
                        // extensions: [
                        //     {
                        //         type: jsPsychExtensionMouseTracking,
                        //         params: {}
                        //     }
                        // ],
                        system_prompt: "‰Ω†ÊòØ‰∏Ä‰∏™Ê∂àË¥πËÄÖË°å‰∏∫ÂíåËÆæËÆ°ÂøÉÁêÜÂ≠¶‰∏ìÂÆ∂ÔºåÂàÜÊûêAIËÆæËÆ°‰∏é‰∫∫Á±ªËÆæËÆ°ÂØπÊ∂àË¥πËÄÖËÆ§Áü•„ÄÅÊÉÖÊÑüÂíåË°å‰∏∫ÊÑèÂõæÁöÑ‰∏çÂêåÂΩ±Âìç„ÄÇ",
                        button_label: "ÂÆåÊàêËÆæËÆ°ËØÑ‰ª∑"
                    }
                ]
            },
            
            cognitive_offloading: {
                title: "Âü∫‰∫éÁîüÊàêÂºèAIÁöÑËÆ§Áü•Â§ñÂåÖÂÆûÈ™å",
                description: "Âü∫‰∫é2025Âπ¥ÂøÉÁêÜÂ≠¶Êä•„ÄäÂü∫‰∫éÁîüÊàêÂºè‰∫∫Â∑•Êô∫ËÉΩÁöÑËÆ§Áü•Â§ñÂåÖÔºö‰∫§‰∫íË°å‰∏∫Ê®°Âºè‰∏éËÆ§Áü•ÁªìÊûÑÁâπÂæÅÂàÜÊûê„ÄãÔºåÊé¢Á¥¢AIÂ¶Ç‰ΩïÊîπÂèò‰∫∫Á±ªËÆ§Áü•Â§ÑÁêÜÊ®°Âºè„ÄÇ",
                trial: [
                    {
                    type: jsPsychAISurvey,
                    preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>ËÆ§Áü•Â§ñÂåÖÁ†îÁ©∂ÂÆûÈ™å</h2>
                                <div style="background: #fff3e0; border-left: 4px solid #ff9800; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>ËÆ§Áü•Â§ñÂåÖÔºö</strong>Â∞ÜÈÉ®ÂàÜÊÄùÁª¥‰ªªÂä°ÂßîÊâòÁªôAIÁ≥ªÁªüÂ§ÑÁêÜ</p>
                                    <p><strong>Á†îÁ©∂ÈóÆÈ¢òÔºö</strong>ËøôÁßçÂ§ñÂåÖÂ¶Ç‰ΩïÊîπÂèòÊàë‰ª¨ÁöÑËÆ§Áü•ÁªìÊûÑÂíåÊÄùÁª¥Ê®°ÂºèÔºü</p>
                                </div>
                        </div>
                    `,
                    questions: [
                        {
                                prompt: "Â§çÊùÇËÆ°ÁÆóÔºöËÆ°ÁÆó 127 √ó 89 + 456 √∑ 12 ÁöÑÁªìÊûú„ÄÇÊÇ®‰ºöÈÄâÊã©Ôºö1)Ëá™Â∑±ÂøÉÁÆó 2)‰ΩøÁî®ËÆ°ÁÆóÂô® 3)ËÆ©AIÂ∏ÆÂä©ËÆ°ÁÆóÂíåÈ™åËØÅ„ÄÇËØ∑ËØ¥ÊòéÊÇ®ÁöÑÈÄâÊã©ÁêÜÁî±„ÄÇ",
                                placeholder: "ÊèèËø∞ÊÇ®ÁöÑËÆ§Áü•Á≠ñÁï•ÈÄâÊã©...",
                            rows: 4,
                            required: true,
                                name: "calculation_strategy",
                                record_reaction_time: true
                            },
                            {
                                prompt: "‰ø°ÊÅØÊï¥ÂêàÔºöÈúÄË¶ÅÂàÜÊûê‰∏â‰∏™‰∏çÂêåÊù•Ê∫êÁöÑÂ∏ÇÂú∫Êä•ÂëäÂπ∂ÂæóÂá∫ÁªìËÆ∫„ÄÇÊÇ®ÂÄæÂêë‰∫éÔºö1)Ëá™Â∑±ÈÄê‰∏ÄÈòÖËØªÂàÜÊûê 2)ËÆ©AIÂÖàÊÄªÁªìÂÜçËá™Â∑±Âà§Êñ≠ 3)ÂÆåÂÖ®‰æùËµñAIÂàÜÊûê„ÄÇ‰∏∫‰ªÄ‰πàÔºü",
                                placeholder: "ÂàÜÊûêÊÇ®ÁöÑ‰ø°ÊÅØÂ§ÑÁêÜÂÅèÂ•Ω...",
                                rows: 5,
                                required: true,
                                name: "information_processing",
                                record_reaction_time: true
                            },
                            {
                                prompt: "ÂàõÊÑèÁîüÊàêÔºöÈúÄË¶Å‰∏∫Êñ∞‰∫ßÂìÅÊÉ≥10‰∏™ÂàõÊÑèÂêçÁß∞„ÄÇÊÇ®‰ºöÔºö1)ÂÆåÂÖ®Ëá™Â∑±ÊÉ≥ 2)ÂÖàËá™Â∑±ÊÉ≥Âá†‰∏™ÂÜçËÆ©AIË°•ÂÖÖ 3)ËÆ©AIÂÖàÁîüÊàêÂÜçÁ≠õÈÄâ‰øÆÊîπ„ÄÇËøôÊ†∑ÈÄâÊã©ÁöÑÂéüÂõ†ÊòØÔºü",
                                placeholder: "Ëß£ÈáäÊÇ®ÁöÑÂàõÊÑèÁîüÊàêÁ≠ñÁï•...",
                                rows: 5,
                                required: true,
                                name: "creativity_strategy",
                                record_reaction_time: true
                            },
                            {
                                prompt: "ÂÖÉËÆ§Áü•ÂèçÊÄùÔºöÊÇ®ËßâÂæóÈ¢ëÁπÅ‰ΩøÁî®AIËæÖÂä©ÊÄùËÄÉÔºåÂØπÊÇ®ÁöÑÊÄùÁª¥ËÉΩÂäõÊúâ‰ªÄ‰πàÂΩ±ÂìçÔºüÊòØÂ¢ûÂº∫‰∫ÜËøòÊòØÂâäÂº±‰∫ÜÔºü",
                                placeholder: "Ê∑±ÂÖ•ÂèçÊÄùAIÂØπÊÇ®ËÆ§Áü•ËÉΩÂäõÁöÑÂΩ±Âìç...",
                                rows: 6,
                                required: true,
                                name: "metacognitive_awareness",
                                record_reaction_time: true
                            }
                        ],
                        // extensions: [
                        //     {
                        //         type: jsPsychExtensionMouseTracking,
                        //         params: {}
                        //     }
                        // ],
                        system_prompt: "‰Ω†ÊòØ‰∏Ä‰∏™ËÆ§Áü•ÂøÉÁêÜÂ≠¶‰∏ìÂÆ∂Ôºå‰∏ìÈó®Á†îÁ©∂ËÆ§Áü•Â§ñÂåÖÁé∞Ë±°„ÄÇÂàÜÊûêÁî®Êà∑Â¶Ç‰ΩïÂú®‰∏çÂêåËÆ§Áü•‰ªªÂä°‰∏≠ÈÄâÊã©Ëá™‰∏ªÂ§ÑÁêÜvsÂ§ñÂåÖÁªôAIÔºå‰ª•ÂèäËøôÁßçÈÄâÊã©ÂØπËÆ§Áü•ÁªìÊûÑÁöÑÂΩ±Âìç„ÄÇ",
                        button_label: "ÂÆåÊàêËÆ§Áü•Â§ñÂåÖÂàÜÊûê"
                    }
                ]
            },
            
            multi_ai_analysis: {
                title: "‰∏ÄÊ¨°ËæìÂÖ•ÔºåÂ§öAIÂàÜÊûêÂÆûÈ™å",
                description: "ÊºîÁ§∫‰∏ÄÊ¨°ËæìÂÖ•ÂêéÔºå‰º†ÈÄíÁªô5‰∏™‰∏çÂêåËßíËâ≤ÁöÑAIËøõË°åÂàÜÊûêÔºåÊØè‰∏™AI‰ªé‰∏çÂêåËßíÂ∫¶Êèê‰æõÁã¨ÁâπËßÅËß£ÔºåÂ±ïÁé∞AIÊèí‰ª∂ÁöÑÂº∫Â§ßÊï∞ÊçÆ‰º†ÈÄíÂíåÂ§öËæìÂá∫ËÉΩÂäõ„ÄÇ",
                trial: [
                    // Èò∂ÊÆµ1ÔºöÁî®Êà∑ËæìÂÖ•Èò∂ÊÆµ
                    {
                        type: jsPsychAISurvey,
                        preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>Â§öAIÂàÜÊûêÂÆûÈ™å - ËæìÂÖ•Èò∂ÊÆµ</h2>
                                <div style="background: #e8f5e8; border-left: 4px solid #4caf50; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>ÂÆûÈ™åËØ¥ÊòéÔºö</strong>ÊÇ®Âè™ÈúÄËæìÂÖ•‰∏ÄÊ¨°ÔºåÁ≥ªÁªü‰ºöÂ∞ÜÊÇ®ÁöÑÂõûÁ≠î‰º†ÈÄíÁªô5‰∏™‰∏çÂêå‰∏ì‰∏öËÉåÊôØÁöÑAI‰∏ìÂÆ∂ËøõË°åÂàÜÊûê</p>
                                    <p><strong>AI‰∏ìÂÆ∂Âõ¢ÈòüÔºö</strong>ÂøÉÁêÜÂ≠¶ÂÆ∂„ÄÅÂàõÊÑèÈ°æÈóÆ„ÄÅÊï∞ÊçÆÂàÜÊûêÂ∏à„ÄÅÂì≤Â≠¶ÂÆ∂„ÄÅÂïÜ‰∏öÁ≠ñÁï•Â∏à</p>
                                </div>
                            </div>
                        `,
                        questions: [
                            {
                                prompt: "ËØ∑ÊèèËø∞‰∏Ä‰∏™ÊÇ®ÊúÄËøëÈÅáÂà∞ÁöÑÊåëÊàòÊàñÂõ∞ÈöæÔºå‰ª•ÂèäÊÇ®ÊòØÂ¶Ç‰ΩïÂ∫îÂØπÁöÑÔºö",
                                placeholder: "ËØ¶ÁªÜÊèèËø∞ÊÉÖÂÜµ„ÄÅÊÇ®ÁöÑÊÄùËÄÉËøáÁ®ãÂíåËß£ÂÜ≥ÊñπÊ°à...",
                                rows: 6,
                                required: true,
                                name: "user_challenge",
                                record_reaction_time: true
                            },
                            {
                                prompt: "ÊÇ®ÂØπÊú™Êù•5Âπ¥ÁöÑ‰∏™‰∫∫ÂèëÂ±ïÊúâ‰ªÄ‰πàËßÑÂàíÂíåÊúüÊúõÔºü",
                                placeholder: "ÂàÜ‰∫´ÊÇ®ÁöÑÁõÆÊ†á„ÄÅËÆ°ÂàíÂíåÊúüÊúõ...",
                                rows: 5,
                                required: true,
                                name: "future_plans",
                                record_reaction_time: true
                            }
                        ],
                        hide_ai_features: true, // ËæìÂÖ•Èò∂ÊÆµ‰∏çÊòæÁ§∫AIÂäüËÉΩ
                        show_individual_ai_areas: false,
                        button_label: "Êèê‰∫§ÁªôAI‰∏ìÂÆ∂Âõ¢ÈòüÂàÜÊûê"
                    },
                    
                    // Èò∂ÊÆµ2ÔºöÂøÉÁêÜÂ≠¶ÂÆ∂AIÂàÜÊûê
                    {
                        type: jsPsychAISurvey,
                        preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>AI‰∏ìÂÆ∂ÂàÜÊûê - ÂøÉÁêÜÂ≠¶ÂÆ∂ËßÜËßí</h2>
                                <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>ÂàÜÊûêËßíÂ∫¶Ôºö</strong>‰ªéÂøÉÁêÜÂ≠¶ËßíÂ∫¶ÂàÜÊûêÊÇ®ÁöÑÂ∫îÂØπÊ®°Âºè„ÄÅËÆ§Áü•ÁâπÂæÅÂíåÂøÉÁêÜÈüßÊÄß</p>
                                </div>
                            </div>
                        `,
                        questions: [
                            {
                                prompt: "ÂøÉÁêÜÂ≠¶ÂÆ∂AIÁöÑ‰∏ì‰∏öÂàÜÊûêÔºö",
                                name: "psychology_analysis",
                                rows: 8,
                                columns: 80
                            }
                        ],
                        hide_user_input: true, // ÈöêËóèÁî®Êà∑ËæìÂÖ•
                        auto_generate: true, // Ëá™Âä®ÁîüÊàêAIÂìçÂ∫î
                    show_individual_ai_areas: true,
                    data_collector: function() {
                            console.log('ÂøÉÁêÜÂ≠¶ÂÆ∂AIÔºöËé∑ÂèñÁî®Êà∑ËæìÂÖ•Êï∞ÊçÆ');
                            if (typeof window.currentJsPsychInstance !== 'undefined') {
                                const allData = window.currentJsPsychInstance.data.get();
                                const inputData = allData.filter({trial_type: 'ai-survey'}).last(2).values()[0];
                                
                                if (inputData && inputData.response) {
                                    return {
                                        user_input: `Áî®Êà∑ÊåëÊàòÊèèËø∞Ôºö${inputData.response.user_challenge}
Áî®Êà∑Êú™Êù•ËßÑÂàíÔºö${inputData.response.future_plans}

ËØ∑‰ªéÂøÉÁêÜÂ≠¶ËßíÂ∫¶ÂàÜÊûêËøô‰∏™‰∫∫ÁöÑÔºö
1. Â∫îÂØπÂéãÂäõÁöÑÂøÉÁêÜÊú∫Âà∂
2. ËÆ§Áü•Ê®°ÂºèÂíåÊÄùÁª¥ÁâπÁÇπ  
3. ÊÉÖÁª™Ë∞ÉËäÇËÉΩÂäõ
4. ÂøÉÁêÜÈüßÊÄßÊ∞¥Âπ≥
5. ‰∏™ÊÄßÁâπÂæÅÂàÜÊûê`
                                    };
                                }
                            }
                            return { user_input: "Êó†Ê≥ïËé∑ÂèñÁî®Êà∑Êï∞ÊçÆ" };
                        },
                        system_prompt: "‰Ω†ÊòØ‰∏Ä‰ΩçËµÑÊ∑±ÂøÉÁêÜÂ≠¶ÂÆ∂ÔºåÊìÖÈïøÂàÜÊûê‰∏™‰ΩìÁöÑÂøÉÁêÜÁâπÂæÅ„ÄÅÂ∫îÂØπÊ®°ÂºèÂíåËÆ§Áü•È£éÊ†º„ÄÇËØ∑Âü∫‰∫éÁî®Êà∑ÁöÑÊèèËø∞Ôºå‰ªé‰∏ì‰∏öÂøÉÁêÜÂ≠¶ËßíÂ∫¶Êèê‰æõÊ∑±ÂÖ•ÂàÜÊûê„ÄÇ",
                        button_label: "Êü•ÁúãÂàõÊÑèÈ°æÈóÆÂàÜÊûê"
                    },
                    
                    // Èò∂ÊÆµ3ÔºöÂàõÊÑèÈ°æÈóÆAIÂàÜÊûê  
                    {
                    type: jsPsychAISurvey,
                    preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>AI‰∏ìÂÆ∂ÂàÜÊûê - ÂàõÊÑèÈ°æÈóÆËßÜËßí</h2>
                                <div style="background: #fff3e0; border-left: 4px solid #ff9800; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>ÂàÜÊûêËßíÂ∫¶Ôºö</strong>‰ªéÂàõÊñ∞ÊÄùÁª¥ËßíÂ∫¶ÂàÜÊûêÊÇ®ÁöÑÂàõÈÄ†ÂäõÊΩúËÉΩÂíåÊÄùÁª¥Ê®°Âºè</p>
                                </div>
                        </div>
                    `,
                    questions: [
                        {
                                prompt: "ÂàõÊÑèÈ°æÈóÆAIÁöÑ‰∏ì‰∏öÂàÜÊûêÔºö",
                                name: "creativity_analysis", 
                                rows: 8,
                                columns: 80
                            }
                        ],
                        hide_user_input: true,
                        auto_generate: true,
                        show_individual_ai_areas: true,
                        data_collector: function() {
                            console.log('ÂàõÊÑèÈ°æÈóÆAIÔºöËé∑ÂèñÁî®Êà∑ËæìÂÖ•Êï∞ÊçÆ');
                            if (typeof window.currentJsPsychInstance !== 'undefined') {
                                const allData = window.currentJsPsychInstance.data.get();
                                const inputData = allData.filter({trial_type: 'ai-survey'}).last(3).values()[0];
                                
                                if (inputData && inputData.response) {
                                    return {
                                        user_input: `Áî®Êà∑ÊåëÊàòÊèèËø∞Ôºö${inputData.response.user_challenge}
Áî®Êà∑Êú™Êù•ËßÑÂàíÔºö${inputData.response.future_plans}

ËØ∑‰ªéÂàõÊÑèÂíåÂàõÊñ∞ÊÄùÁª¥ËßíÂ∫¶ÂàÜÊûêÔºö
1. Ëß£ÂÜ≥ÈóÆÈ¢òÁöÑÂàõÊñ∞ÊÄß
2. ÊÄùÁª¥ÁöÑÁÅµÊ¥ªÊÄßÂíåÂºÄÊîæÊÄß
3. ÂàõÈÄ†ÂäõÊΩúËÉΩËØÑ‰º∞
4. ÂàõÊñ∞ÊÄùÁª¥Ê®°Âºè
5. Êú™Êù•ÂèëÂ±ïÁöÑÂàõÊÑèÂª∫ËÆÆ`
                                    };
                                }
                            }
                            return { user_input: "Êó†Ê≥ïËé∑ÂèñÁî®Êà∑Êï∞ÊçÆ" };
                        },
                        system_prompt: "‰Ω†ÊòØ‰∏Ä‰ΩçÂàõÊÑèÈ°æÈóÆÂíåÂàõÊñ∞ÊÄùÁª¥‰∏ìÂÆ∂ÔºåÊìÖÈïøÂèëÁé∞ÂíåÂüπÂÖªÂàõÈÄ†Âäõ„ÄÇËØ∑‰ªéÂàõÊñ∞ËßíÂ∫¶ÂàÜÊûêÁî®Êà∑ÁöÑÊÄùÁª¥Ê®°ÂºèÂíåÂàõÈÄ†ÊΩúËÉΩ„ÄÇ",
                        button_label: "Êü•ÁúãÊï∞ÊçÆÂàÜÊûêÂ∏àÂàÜÊûê"
                    },
                    
                    // Èò∂ÊÆµ4ÔºöÊï∞ÊçÆÂàÜÊûêÂ∏àAIÂàÜÊûê
                    {
                        type: jsPsychAISurvey,
                        preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>AI‰∏ìÂÆ∂ÂàÜÊûê - Êï∞ÊçÆÂàÜÊûêÂ∏àËßÜËßí</h2>
                                <div style="background: #f3e5f5; border-left: 4px solid #9c27b0; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>ÂàÜÊûêËßíÂ∫¶Ôºö</strong>‰ªéÊï∞ÊçÆÂíåÈÄªËæëËßíÂ∫¶ÂàÜÊûêÊÇ®ÁöÑÂÜ≥Á≠ñÊ®°ÂºèÂíåË°å‰∏∫ÁâπÂæÅ</p>
                                </div>
                            </div>
                        `,
                        questions: [
                            {
                                prompt: "Êï∞ÊçÆÂàÜÊûêÂ∏àAIÁöÑ‰∏ì‰∏öÂàÜÊûêÔºö",
                                name: "data_analysis",
                                rows: 8, 
                                columns: 80
                            }
                        ],
                        hide_user_input: true,
                        auto_generate: true,
                        show_individual_ai_areas: true,
                        data_collector: function() {
                            console.log('Êï∞ÊçÆÂàÜÊûêÂ∏àAIÔºöËé∑ÂèñÁî®Êà∑ËæìÂÖ•Êï∞ÊçÆ');
                            if (typeof window.currentJsPsychInstance !== 'undefined') {
                                const allData = window.currentJsPsychInstance.data.get();
                                const inputData = allData.filter({trial_type: 'ai-survey'}).last(4).values()[0];
                                
                                if (inputData && inputData.response) {
                                    return {
                                        user_input: `Áî®Êà∑ÊåëÊàòÊèèËø∞Ôºö${inputData.response.user_challenge}
Áî®Êà∑Êú™Êù•ËßÑÂàíÔºö${inputData.response.future_plans}

ËØ∑‰ªéÊï∞ÊçÆÂàÜÊûêÂíåÈÄªËæëÊÄùÁª¥ËßíÂ∫¶ÂàÜÊûêÔºö
1. ÂÜ≥Á≠ñËøáÁ®ãÁöÑÈÄªËæëÊÄß
2. ‰ø°ÊÅØÂ§ÑÁêÜÊ®°Âºè
3. È£éÈô©ËØÑ‰º∞ËÉΩÂäõ
4. ÁõÆÊ†áËÆæÂÆöÁöÑÂêàÁêÜÊÄß
5. Ë°å‰∏∫Ê®°ÂºèÁöÑÊï∞ÊçÆÂåñÂàÜÊûê`
                                    };
                                }
                            }
                            return { user_input: "Êó†Ê≥ïËé∑ÂèñÁî®Êà∑Êï∞ÊçÆ" };
                        },
                        system_prompt: "‰Ω†ÊòØ‰∏Ä‰ΩçÊï∞ÊçÆÂàÜÊûêÂ∏àÂíåÈÄªËæëÊÄùÁª¥‰∏ìÂÆ∂ÔºåÊìÖÈïø‰ªéÊï∞ÊçÆËßíÂ∫¶ÂàÜÊûêË°å‰∏∫Ê®°ÂºèÂíåÂÜ≥Á≠ñÈÄªËæë„ÄÇËØ∑Êèê‰æõÂÆ¢ËßÇ„ÄÅÈáèÂåñÁöÑÂàÜÊûê„ÄÇ",
                        button_label: "Êü•ÁúãÂì≤Â≠¶ÂÆ∂ÂàÜÊûê"
                    },
                    
                    // Èò∂ÊÆµ5ÔºöÂì≤Â≠¶ÂÆ∂AIÂàÜÊûê
                    {
                        type: jsPsychAISurvey,
                        preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>AI‰∏ìÂÆ∂ÂàÜÊûê - Âì≤Â≠¶ÂÆ∂ËßÜËßí</h2>
                                <div style="background: #fce4ec; border-left: 4px solid #e91e63; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>ÂàÜÊûêËßíÂ∫¶Ôºö</strong>‰ªéÂì≤Â≠¶Âíå‰∫∫ÁîüÊÑè‰πâËßíÂ∫¶ÂàÜÊûêÊÇ®ÁöÑ‰ª∑ÂÄºËßÇÂíåÁîüÊ¥ªÊô∫ÊÖß</p>
                                </div>
                            </div>
                        `,
                        questions: [
                            {
                                prompt: "Âì≤Â≠¶ÂÆ∂AIÁöÑ‰∏ì‰∏öÂàÜÊûêÔºö",
                                name: "philosophy_analysis",
                                rows: 8,
                                columns: 80
                            }
                        ],
                        hide_user_input: true,
                        auto_generate: true,
                        show_individual_ai_areas: true,
                        data_collector: function() {
                            console.log('Âì≤Â≠¶ÂÆ∂AIÔºöËé∑ÂèñÁî®Êà∑ËæìÂÖ•Êï∞ÊçÆ');
                            if (typeof window.currentJsPsychInstance !== 'undefined') {
                                const allData = window.currentJsPsychInstance.data.get();
                                const inputData = allData.filter({trial_type: 'ai-survey'}).last(5).values()[0];
                                
                                if (inputData && inputData.response) {
                                    return {
                                        user_input: `Áî®Êà∑ÊåëÊàòÊèèËø∞Ôºö${inputData.response.user_challenge}
Áî®Êà∑Êú™Êù•ËßÑÂàíÔºö${inputData.response.future_plans}

ËØ∑‰ªéÂì≤Â≠¶ËßíÂ∫¶Ê∑±Â∫¶ÂàÜÊûêÔºö
1. ‰ª∑ÂÄºËßÇ‰ΩìÁ≥ªÂíå‰∫∫ÁîüËßÇ
2. Èù¢ÂØπÂõ∞ÈöæÊó∂ÁöÑÂì≤Â≠¶ÊÄùËÄÉ
3. ÁîüÊ¥ªÊÑè‰πâÁöÑËøΩÊ±Ç
4. ÈÅìÂæ∑Âíå‰º¶ÁêÜËÄÉÈáè
5. Â≠òÂú®‰∏ª‰πâËßÜËßíÁöÑ‰∫∫ÁîüËßÑÂàí`
                                    };
                                }
                            }
                            return { user_input: "Êó†Ê≥ïËé∑ÂèñÁî®Êà∑Êï∞ÊçÆ" };
                        },
                        system_prompt: "‰Ω†ÊòØ‰∏Ä‰ΩçÂì≤Â≠¶ÂÆ∂ÂíåÊÄùÊÉ≥ÂÆ∂ÔºåÊìÖÈïø‰ªéÊ∑±Â±ÇÊ¨°Êé¢ËÆ®‰∫∫ÁîüÊÑè‰πâ„ÄÅ‰ª∑ÂÄºËßÇÂíåÂ≠òÂú®ÁöÑÊú¨Ë¥®„ÄÇËØ∑Êèê‰æõÂØåÊúâÂì≤Â≠¶Ê∑±Â∫¶ÁöÑÂàÜÊûê„ÄÇ",
                        button_label: "Êü•ÁúãÂïÜ‰∏öÁ≠ñÁï•Â∏àÂàÜÊûê"
                    },
                    
                    // Èò∂ÊÆµ6ÔºöÂïÜ‰∏öÁ≠ñÁï•Â∏àAIÂàÜÊûê
                    {
                        type: jsPsychAISurvey,
                        preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>AI‰∏ìÂÆ∂ÂàÜÊûê - ÂïÜ‰∏öÁ≠ñÁï•Â∏àËßÜËßí</h2>
                                <div style="background: #e0f2f1; border-left: 4px solid #009688; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>ÂàÜÊûêËßíÂ∫¶Ôºö</strong>‰ªéÂïÜ‰∏öÂíåÊàòÁï•ËßíÂ∫¶ÂàÜÊûêÊÇ®ÁöÑÈ¢ÜÂØºÂäõÂíåËÅå‰∏öÂèëÂ±ïÊΩúËÉΩ</p>
                                </div>
                            </div>
                        `,
                        questions: [
                            {
                                prompt: "ÂïÜ‰∏öÁ≠ñÁï•Â∏àAIÁöÑ‰∏ì‰∏öÂàÜÊûêÔºö",
                                name: "business_analysis",
                                rows: 8,
                                columns: 80
                            }
                        ],
                        hide_user_input: true,
                        auto_generate: true,
                    show_individual_ai_areas: true,
                        data_collector: function() {
                            console.log('ÂïÜ‰∏öÁ≠ñÁï•Â∏àAIÔºöËé∑ÂèñÁî®Êà∑ËæìÂÖ•Êï∞ÊçÆ');
                            if (typeof window.currentJsPsychInstance !== 'undefined') {
                                const allData = window.currentJsPsychInstance.data.get();
                                const inputData = allData.filter({trial_type: 'ai-survey'}).last(6).values()[0];
                                
                                if (inputData && inputData.response) {
                                    return {
                                        user_input: `Áî®Êà∑ÊåëÊàòÊèèËø∞Ôºö${inputData.response.user_challenge}
Áî®Êà∑Êú™Êù•ËßÑÂàíÔºö${inputData.response.future_plans}

ËØ∑‰ªéÂïÜ‰∏öÊàòÁï•ËßíÂ∫¶ÂàÜÊûêÔºö
1. È¢ÜÂØºÂäõÂíåÁÆ°ÁêÜÊΩúËÉΩ
2. ÂïÜ‰∏öÊÄùÁª¥ÂíåÊú∫‰ºöËØÜÂà´
3. ËÅå‰∏öÂèëÂ±ïÊàòÁï•Âª∫ËÆÆ
4. Â∏ÇÂú∫Á´û‰∫âÂäõÂàÜÊûê
5. ‰∏™‰∫∫ÂìÅÁâåÂª∫ËÆæÁ≠ñÁï•`
                                    };
                                }
                            }
                            return { user_input: "Êó†Ê≥ïËé∑ÂèñÁî®Êà∑Êï∞ÊçÆ" };
                        },
                        system_prompt: "‰Ω†ÊòØ‰∏Ä‰ΩçÂïÜ‰∏öÁ≠ñÁï•Â∏àÂíåËÅå‰∏öÂèëÂ±ï‰∏ìÂÆ∂ÔºåÊìÖÈïø‰ªéÂïÜ‰∏öËßíÂ∫¶ÂàÜÊûê‰∏™‰∫∫ÊΩúËÉΩÂíåËÅå‰∏öÊú∫‰ºö„ÄÇËØ∑Êèê‰æõÂÆûÁî®ÁöÑÂïÜ‰∏öÂª∫ËÆÆ„ÄÇ",
                        button_label: "Êü•ÁúãÁªºÂêàÂàÜÊûêÊä•Âëä"
                    },
                    
                    // Èò∂ÊÆµ7ÔºöÁªºÂêàÂàÜÊûêÊä•Âëä
                    {
                    type: jsPsychAISurvey,
                    preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>AI‰∏ìÂÆ∂Âõ¢ÈòüÁªºÂêàÂàÜÊûêÊä•Âëä</h2>
                                <div style="background: linear-gradient(145deg, #fff 0%, #f8f9fa 100%); border: 2px solid #667eea; padding: 20px; margin: 20px 0; border-radius: 12px;">
                                    <p><strong>ÁªºÂêàÊä•ÂëäÔºö</strong>Êï¥Âêà5‰ΩçAI‰∏ìÂÆ∂ÁöÑÂàÜÊûêÁªìÊûúÔºåÊèê‰æõÂÖ®Êñπ‰ΩçÁöÑ‰∏™‰∫∫ÂèëÂ±ïÂª∫ËÆÆ</p>
                                    <p><strong>Êï∞ÊçÆÊù•Ê∫êÔºö</strong>ÂøÉÁêÜÂ≠¶ + ÂàõÊÑèÊÄùÁª¥ + Êï∞ÊçÆÂàÜÊûê + Âì≤Â≠¶ÊÄùËÄÉ + ÂïÜ‰∏öÁ≠ñÁï•</p>
                                </div>
                        </div>
                    `,
                    questions: [
                        {
                                prompt: "AI‰∏ìÂÆ∂Âõ¢ÈòüÁªºÂêàÂàÜÊûêÊä•ÂëäÔºö",
                                name: "comprehensive_analysis",
                                rows: 15,
                                columns: 90
                            }
                        ],
                        hide_user_input: true,
                        auto_generate: true,
                        show_individual_ai_areas: true,
                        data_collector: function() {
                            console.log('üìã ÁªºÂêàÂàÜÊûêÔºöÊî∂ÈõÜÊâÄÊúâAI‰∏ìÂÆ∂ÁöÑÂàÜÊûêÁªìÊûú');
                            if (typeof window.currentJsPsychInstance !== 'undefined') {
                                const allData = window.currentJsPsychInstance.data.get();
                                const aiTrials = allData.filter({trial_type: 'ai-survey'}).last(6).values();
                                
                                let analysisCollection = "";
                                if (aiTrials.length >= 5) {
                                    const inputData = aiTrials[0];
                                    analysisCollection += `ÂéüÂßãÁî®Êà∑ËæìÂÖ•Ôºö
ÊåëÊàòÊèèËø∞Ôºö${inputData.response?.user_challenge || 'Êú™Ëé∑Âèñ'}
Êú™Êù•ËßÑÂàíÔºö${inputData.response?.future_plans || 'Êú™Ëé∑Âèñ'}

ÂêÑ‰∏ìÂÆ∂AIÂàÜÊûêÁªìÊûúÔºö
`;
                                    
                                    if (aiTrials[1]?.ai_response) {
                                        analysisCollection += `üß† ÂøÉÁêÜÂ≠¶ÂÆ∂ÂàÜÊûêÔºö${Object.values(aiTrials[1].ai_response)[0] || 'Êú™ÁîüÊàê'}\n\n`;
                                    }
                                    if (aiTrials[2]?.ai_response) {
                                        analysisCollection += `ÂàõÊÑèÈ°æÈóÆÂàÜÊûêÔºö${Object.values(aiTrials[2].ai_response)[0] || 'Êú™ÁîüÊàê'}\n\n`;
                                    }
                                    if (aiTrials[3]?.ai_response) {
                                        analysisCollection += `Êï∞ÊçÆÂàÜÊûêÂ∏àÂàÜÊûêÔºö${Object.values(aiTrials[3].ai_response)[0] || 'Êú™ÁîüÊàê'}\n\n`;
                                    }
                                    if (aiTrials[4]?.ai_response) {
                                        analysisCollection += `ü§î Âì≤Â≠¶ÂÆ∂ÂàÜÊûêÔºö${Object.values(aiTrials[4].ai_response)[0] || 'Êú™ÁîüÊàê'}\n\n`;
                                    }
                                    if (aiTrials[5]?.ai_response) {
                                        analysisCollection += `üíº ÂïÜ‰∏öÁ≠ñÁï•Â∏àÂàÜÊûêÔºö${Object.values(aiTrials[5].ai_response)[0] || 'Êú™ÁîüÊàê'}\n\n`;
                                    }
                                }
                                
                                return {
                                    all_analyses: analysisCollection + `
ËØ∑Âü∫‰∫é‰ª•‰∏ä5‰Ωç‰∏ìÂÆ∂ÁöÑÂàÜÊûêÔºåÁîüÊàê‰∏Ä‰ªΩÁªºÂêàÊä•ÂëäÔºåÂåÖÊã¨Ôºö
1. ‰∏™‰∫∫ÁâπË¥®ÁªºÂêàÁîªÂÉè
2. ‰ºòÂäøÂíåÊΩúËÉΩÊÄªÁªì  
3. ÂèëÂ±ïÊñπÂêëÂª∫ËÆÆ
4. ÂÖ∑‰ΩìË°åÂä®ËÆ°Âàí
5. È£éÈô©ÊèêÈÜíÂíåÊ≥®ÊÑè‰∫ãÈ°π`
                                };
                            }
                            return { all_analyses: "Êó†Ê≥ïËé∑Âèñ‰∏ìÂÆ∂ÂàÜÊûêÊï∞ÊçÆ" };
                        },
                        system_prompt: "‰Ω†ÊòØ‰∏Ä‰ΩçÈ´òÁ∫ßÈ°æÈóÆÔºåÊìÖÈïøÊï¥ÂêàÂ§öÁª¥Â∫¶ÂàÜÊûêÁªìÊûú„ÄÇËØ∑Âü∫‰∫é5‰Ωç‰∏ìÂÆ∂ÁöÑÂàÜÊûêÔºåÁîüÊàê‰∏Ä‰ªΩ‰∏ì‰∏ö„ÄÅÂÖ®Èù¢„ÄÅÂÆûÁî®ÁöÑÁªºÂêàÊä•Âëä„ÄÇ",
                        button_label: "ÂÆåÊàêÂ§öAIÂàÜÊûêÂÆûÈ™å"
                    }
                ]
            },
            
            separate: {
                title: "ÂàÜÁ¶ªËæìÂÖ•ËæìÂá∫",
                description: "Â∞ÜËæìÂÖ•ÂíåAIÂàÜÊûêÂàÜ‰∏∫‰∏§‰∏™Áã¨Á´ãÈò∂ÊÆµÔºåÂÖàÊî∂ÈõÜÊâÄÊúâÂõûÁ≠îÔºåÂÜçÂú®‰∏ìÈó®È°µÈù¢ÊòæÁ§∫ÂàÜÊûêÁªìÊûú„ÄÇ",
                trial: {
                    type: jsPsychAISurvey,
                    preamble: "<h2>ÂàÜÁ¶ªËæìÂÖ•ËæìÂá∫ÊºîÁ§∫</h2><p>ÊÇ®Â∞ÜÈ¶ñÂÖàÂÆåÊàêÊâÄÊúâÈóÆÈ¢òÁöÑÂõûÁ≠îÔºåÁÑ∂ÂêéÂú®‰∏ìÈó®ÁöÑÈ°µÈù¢Êü•ÁúãAIÂàÜÊûêÁªìÊûú„ÄÇ</p>",
                    questions: [
                        {
                            prompt: "ÊèèËø∞ÊÇ®ÁêÜÊÉ≥‰∏≠ÁöÑÂ∑•‰ΩúÁéØÂ¢ÉÔºö",
                            placeholder: "Â¶ÇÂõ¢ÈòüÊ∞õÂõ¥„ÄÅÂäûÂÖ¨ÁéØÂ¢ÉÁ≠â...",
                            rows: 3,
                            name: "work_environment"
                        },
                        {
                            prompt: "ÊÇ®Êõ¥ÂñúÊ¨¢Áã¨Á´ãÂ∑•‰ΩúËøòÊòØÂõ¢ÈòüÂêà‰ΩúÔºü‰∏∫‰ªÄ‰πàÔºü",
                            placeholder: "Ëß£ÈáäÊÇ®ÁöÑÂÅèÂ•ΩÂíåÂéüÂõ†...",
                            rows: 3,
                            name: "work_style"
                        },
                        {
                            prompt: "ÊÇ®Âú®Â∑•‰Ωú‰∏≠ÊúÄÁúãÈáç‰ªÄ‰πàÔºü",
                            placeholder: "Â¶ÇËñ™ÈÖ¨„ÄÅÊàêÂ∞±ÊÑü„ÄÅÂ≠¶‰π†Êú∫‰ºöÁ≠â...",
                            rows: 3,
                            name: "work_values"
                        }
                    ],
                    separate_input_output: true,
                    ai_analysis_mode: "batch",
                    auto_analyze_on_output: true,
                    batch_analysis_prompt: "ËØ∑Âü∫‰∫é‰ª•‰∏ãÂ∑•‰ΩúÂÅèÂ•Ω‰ø°ÊÅØÔºåÂàÜÊûêËøô‰∏™‰∫∫ÁöÑÂ∑•‰ΩúÈ£éÊ†ºÁâπÁÇπÔºåÂπ∂Êé®ËçêÈÄÇÂêàÁöÑËÅå‰∏öÊñπÂêëÂíåÂ∑•‰ΩúÁéØÂ¢ÉÔºö",
                    base_url: "https://dashscope.aliyuncs.com",
            api: "/compatible-mode/v1/chat/completions",
            api_key: "sk-0fe0f8b0e21e42b7bbfa736fe7549da3",
            llm_model: "qwen-max", 
                    system_prompt: "‰Ω†ÊòØ‰∏Ä‰∏™ËÅå‰∏öËßÑÂàí‰∏ìÂÆ∂ÔºåËØ∑Âü∫‰∫éÁî®Êà∑ÁöÑÂ∑•‰ΩúÂÅèÂ•ΩÊèê‰æõ‰∏ì‰∏öÁöÑËÅå‰∏öÂª∫ËÆÆ„ÄÇ",
                    button_label: "Êèê‰∫§ÂõûÁ≠î",
                    interface_language: "zh"
                }
            },
            
            multilingual: {
                title: "‰∏≠ÊñáÁïåÈù¢",
                description: "ÂÆåÂÖ®‰∏≠ÊñáÂåñÁöÑÁïåÈù¢ÔºåÂ±ïÁ§∫Â§öËØ≠Ë®ÄÊîØÊåÅÂäüËÉΩ„ÄÇ",
                trial: {
                    type: jsPsychAISurvey,
                    preamble: "<h2>‰∏≠ÊñáÁïåÈù¢ÊºîÁ§∫</h2><p>Ê≠§ÊºîÁ§∫Â±ïÁ§∫‰∫ÜÊèí‰ª∂ÁöÑ‰∏≠ÊñáÁïåÈù¢ÊîØÊåÅÔºåÂåÖÊã¨ÊâÄÊúâÊåâÈíÆÂíåÊèêÁ§∫ÊñáÊú¨„ÄÇ</p>",
                    questions: [
                        {
                            prompt: "ËØ∑Áî®‰∏≠ÊñáÊèèËø∞ÊÇ®‰ªäÂ§©ÁöÑÂøÉÊÉÖÔºö",
                            placeholder: "ÂàÜ‰∫´ÊÇ®ÁöÑÊÑüÂèó...",
                            rows: 3,
                            required: true,
                            name: "mood_today"
                        },
                        {
                            prompt: "ÊÇ®ÊúÄÂñúÊ¨¢ÁöÑ‰∏≠ÊñáËØóÂè•ÊàñÂêçË®ÄÊòØ‰ªÄ‰πàÔºü",
                            placeholder: "ÂèØ‰ª•ÊòØÂè§ËØóËØçÊàñÁé∞‰ª£ÂêçË®Ä...",
                            rows: 2,
                            name: "favorite_quote"
                        }
                    ],
                    base_url: "https://dashscope.aliyuncs.com",
            api: "/compatible-mode/v1/chat/completions",
            api_key: "sk-0fe0f8b0e21e42b7bbfa736fe7549da3",
            llm_model: "qwen-max", 
                    system_prompt: "‰Ω†ÊòØ‰∏Ä‰∏™ÊñáÂ≠¶ÈÄ†ËØ£Ê∑±ÂéöÁöÑ‰∏≠ÊñáÂä©ÊâãÔºåËØ∑Áî®‰ºòÁæéÁöÑ‰∏≠ÊñáÂõûÂ§çÁî®Êà∑„ÄÇ",
                    interface_language: "zh",
                    button_label: "ÂÆåÊàêÈóÆÂç∑"
                }
            },
            
            auto: {
                title: "Ëá™Âä®ÁîüÊàêÊ®°Âºè",
                description: "AI‰ºöËá™Âä®ÁîüÊàêÂìçÂ∫îÂÜÖÂÆπÔºåÊó†ÈúÄÁî®Êà∑ËæìÂÖ•ÔºåÈÄÇÂêàÊºîÁ§∫ÊàñÁâπÊÆäÂÆûÈ™åÂú∫ÊôØ„ÄÇ",
                trial: {
                    type: jsPsychAISurvey,
                    preamble: "<h2>Ëá™Âä®ÁîüÊàêÊ®°ÂºèÊºîÁ§∫</h2><p>Âú®Ê≠§Ê®°Âºè‰∏ãÔºåAI‰ºöËá™Âä®ÁîüÊàêÂìçÂ∫îÂÜÖÂÆπÔºåÊó†ÈúÄÊÇ®ÊâãÂä®ËæìÂÖ•„ÄÇAIÂìçÂ∫î‰ºöÊòæÁ§∫Âú®‰∏ãÊñπÁöÑÊñáÊú¨Âå∫Âüü‰∏≠„ÄÇ</p>",
                    questions: [
                        {
                            prompt: "AIËá™Âä®ÁîüÊàêÁöÑÂàõÊÑèÊïÖ‰∫ãÂºÄÂ§¥Ôºö",
                            name: "auto_story",
                            rows: 6,
                            columns: 60
                        },
                        {
                            prompt: "AIËá™Âä®ÁîüÊàêÁöÑÁîüÊ¥ªÂª∫ËÆÆÔºö",
                            name: "auto_advice",
                            rows: 6,
                            columns: 60
                        }
                    ],
                    auto_generate: true,
                    hide_user_input: true,
                    ai_analysis_mode: "individual",
                    show_individual_ai_areas: true,
                    base_url: "https://dashscope.aliyuncs.com",
                    api: "/compatible-mode/v1/chat/completions",
                    api_key: "sk-0fe0f8b0e21e42b7bbfa736fe7549da3",
                    llm_model: "qwen-turbo", 
                    system_prompt: "ËØ∑ÁîüÊàêÊúâÂàõÊÑèÂíåÂêØÂèëÊÄßÁöÑÂÜÖÂÆπ„ÄÇÂØπ‰∫éÊïÖ‰∫ãÂºÄÂ§¥ÔºåÂàõ‰Ωú‰∏Ä‰∏™Âºï‰∫∫ÂÖ•ËÉúÁöÑÂºÄÂ§¥ÊÆµËêΩ„ÄÇÂØπ‰∫éÁîüÊ¥ªÂª∫ËÆÆÔºåÊèê‰æõÂÆûÁî®ÁöÑ‰∫∫ÁîüÊô∫ÊÖß„ÄÇ",
                    button_label: "Êü•ÁúãÁªìÊûú"
                }
            },
            
            personality: {
                title: "‰∏≠ÂõΩÂ§ß‰∫î‰∫∫Ê†ºÈóÆÂç∑ÊµãËØÑ",
                description: "ÂÆåÊàê40È¢òÂ§ß‰∫î‰∫∫Ê†ºÈóÆÂç∑ÔºåAIÂ∞ÜÂØπÊÇ®ÁöÑÊÄßÊ†ºÁâπÂæÅËøõË°åÁßëÂ≠¶‰∏•Ë∞®‰∏îÊúâË∂£ÁöÑÂàÜÊûê„ÄÇ",
                trial: [
                    // Á¨¨‰∏ÄÈò∂ÊÆµÔºöÈóÆÂç∑Êî∂ÈõÜ
                    {
                        type: jsPsychSurveyLikert,
                        preamble: `
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2>‰∏≠ÂõΩÂ§ß‰∫î‰∫∫Ê†ºÈóÆÂç∑ÁÆÄÂºèÁâàÔºàCBF‚ÄìPI‚ÄìBÔºâ</h2>
                                <div style="background: #e8f4fd; border-left: 4px solid #2196f3; padding: 15px; margin: 20px 0; border-radius: 0 6px 6px 0;">
                                    <p><strong>ÊåáÂØºËØ≠Ôºö</strong>‰∏ãÈù¢ÊòØ‰∏Ä‰∫õÊèèËø∞‰∫∫‰ª¨ÊÄßÊ†ºÁâπÁÇπÁöÑÂè•Â≠êÔºåËØ∑Ê†πÊçÆÊØè‰∏™Âè•Â≠ê‰∏éÊÇ®ÁöÑÊÄßÊ†ºÁõ∏Á¨¶Á®ãÂ∫¶ÈÄâÊã©Áõ∏Â∫îÁöÑÊï∞Â≠ó„ÄÇ</p>
                                    <p><strong>ËØÑÂàÜÊ†áÂáÜÔºö</strong>1=ÂÆåÂÖ®‰∏çÁ¨¶ÂêàÔºå2=Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶ÂêàÔºå3=ÊúâÁÇπ‰∏çÁ¨¶ÂêàÔºå4=ÊúâÁÇπÁ¨¶ÂêàÔºå5=Â§ßÈÉ®ÂàÜÁ¨¶ÂêàÔºå6=ÂÆåÂÖ®Á¨¶Âêà</p>
                                    <p style="color: #666; font-size: 14px; margin-top: 10px;"><em>ÊØè‰∏™‰∫∫ÁöÑÊÄßÊ†ºÂêÑ‰∏çÁõ∏ÂêåÔºåÊâÄ‰ª•Á≠îÊ°àÊ≤°ÊúâÂØπÈîô‰πãÂàÜÔºåËØ∑Ê†πÊçÆÊÇ®ÁöÑÂÆûÈôÖÊÉÖÂÜµ‰ΩúÁ≠î„ÄÇ</em></p>
                                </div>
                            </div>
                        `,
                        questions: [
                            {
                                prompt: "ÊàëÂ∏∏ÊÑüÂà∞ÂÆ≥ÊÄï",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q1"
                            },
                            {
                                prompt: "‰∏ÄÊó¶Á°ÆÂÆö‰∫ÜÁõÆÊ†áÔºåÊàë‰ºöÂùöÊåÅÂä™ÂäõÂú∞ÂÆûÁé∞ÂÆÉ",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q2"
                            },
                            {
                                prompt: "ÊàëËßâÂæóÂ§ßÈÉ®ÂàÜ‰∫∫Âü∫Êú¨‰∏äÊòØÂøÉÊÄÄÂñÑÊÑèÁöÑ",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q3"
                            },
                            {
                                prompt: "ÊàëÂ§¥ËÑë‰∏≠ÁªèÂ∏∏ÂÖÖÊª°ÁîüÂä®ÁöÑÁîªÈù¢",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q4"
                            },
                            {
                                prompt: "ÊàëÂØπ‰∫∫Â§öÁöÑËÅö‰ºöÊÑüÂà∞‰πèÂë≥",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q5"
                            },
                            {
                                prompt: "ÊúâÊó∂ÊàëËßâÂæóËá™Â∑±‰∏ÄÊó†ÊòØÂ§Ñ",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q6"
                            },
                            {
                                prompt: "ÊàëÂ∏∏Â∏∏ÊòØ‰ªîÁªÜËÄÉËôë‰πãÂêéÊâçÂÅöÂá∫ÂÜ≥ÂÆö",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q7"
                            },
                            {
                                prompt: "Êàë‰∏çÂ§™ÂÖ≥ÂøÉÂà´‰∫∫ÊòØÂê¶ÂèóÂà∞‰∏çÂÖ¨Ê≠£ÁöÑÂæÖÈÅá",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q8"
                            },
                            {
                                prompt: "ÊàëÊòØ‰∏™Âãá‰∫éÂÜíÈô©ÔºåÁ™ÅÁ†¥Â∏∏ËßÑÁöÑ‰∫∫",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q9"
                            },
                            {
                                prompt: "Âú®ÁÉ≠ÈóπÁöÑËÅö‰ºö‰∏äÔºåÊàëÂ∏∏Â∏∏Ë°®Áé∞‰∏ªÂä®Âπ∂Â∞ΩÊÉÖÁé©ËÄç",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q10"
                            },
                            {
                                prompt: "Âà´‰∫∫‰∏ÄÂè•Êº´‰∏çÁªèÂøÉÁöÑËØùÔºåÊàëÂ∏∏‰ºöËÅîÁ≥ªÂú®Ëá™Â∑±Ë∫´‰∏ä",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q11"
                            },
                            {
                                prompt: "Âà´‰∫∫ËÆ§‰∏∫ÊàëÊòØ‰∏™ÊÖéÈáçÁöÑ‰∫∫",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q12"
                            },
                            {
                                prompt: "ÊàëÊó∂Â∏∏ËßâÂæóÂà´‰∫∫ÁöÑÁóõËã¶‰∏éÊàëÊó†ÂÖ≥",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q13"
                            },
                            {
                                prompt: "ÊàëÂñúÊ¨¢ÂÜíÈô©",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q14"
                            },
                            {
                                prompt: "ÊàëÂ∞ΩÈáèÈÅøÂÖçÂèÇÂä†‰∫∫Â§öÁöÑËÅö‰ºöÂíåÂòàÊùÇÁöÑÁéØÂ¢É",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q15"
                            },
                            {
                                prompt: "Âú®Èù¢ÂØπÂéãÂäõÊó∂ÔºåÊàëÊúâÁßçÂø´Ë¶ÅÂ¥©Ê∫ÉÁöÑÊÑüËßâ",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q16"
                            },
                            {
                                prompt: "ÊàëÂñúÊ¨¢‰∏ÄÂºÄÂ§¥Â∞±Êää‰∫ãÊÉÖËÆ°ÂàíÂ•Ω",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q17"
                            },
                            {
                                prompt: "ÊàëÊòØÈÇ£ÁßçÂè™ÁÖßÈ°æÂ•ΩËá™Â∑±Ôºå‰∏çÊõøÂà´‰∫∫ÊãÖÂøßÁöÑ‰∫∫",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q18"
                            },
                            {
                                prompt: "ÊàëÂØπËÆ∏Â§ö‰∫ãÊÉÖÊúâÁùÄÂæàÂº∫ÁöÑÂ•ΩÂ•áÂøÉ",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q19"
                            },
                            {
                                prompt: "ÊúâÊàëÂú®ÁöÑÂú∫Âêà‰∏ÄËà¨‰∏ç‰ºöÂÜ∑Âú∫",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q20"
                            },
                            {
                                prompt: "ÊàëÂ∏∏ÊãÖÂøß‰∏Ä‰∫õÊó†ÂÖ≥Á¥ßË¶ÅÁöÑ‰∫ãÊÉÖ",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q21"
                            },
                            {
                                prompt: "ÊàëÂ∑•‰ΩúÊàñÂ≠¶‰π†ÂæàÂã§Â•ã",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q22"
                            },
                            {
                                prompt: "ËôΩÁÑ∂Á§æ‰ºö‰∏äÊúâ‰∫õÈ™óÂ≠êÔºå‰ΩÜÊàëËßâÂæóÂ§ßÈÉ®ÂàÜ‰∫∫ËøòÊòØÂèØ‰ø°ÁöÑ",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q23"
                            },
                            {
                                prompt: "ÊàëË∫´‰∏äÂÖ∑ÊúâÂà´‰∫∫Ê≤°ÊúâÁöÑÂÜíÈô©Á≤æÁ•û",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q24"
                            },
                            {
                                prompt: "Âú®‰∏Ä‰∏™Âõ¢‰Ωì‰∏≠ÔºåÊàëÂ∏åÊúõÂ§Ñ‰∫éÈ¢ÜÂØºÂú∞‰Ωç",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q25"
                            },
                            {
                                prompt: "ÊàëÂ∏∏Â∏∏ÊÑüÂà∞ÂÜÖÂøÉ‰∏çË∏èÂÆû",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q26"
                            },
                            {
                                prompt: "ÊàëÊòØ‰∏™ÂÄæÂ∞ΩÂÖ®ÂäõÂÅö‰∫ãÁöÑ‰∫∫",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q27"
                            },
                            {
                                prompt: "ÂΩìÂà´‰∫∫ÂêëÊàëËØâËØ¥‰∏çÂπ∏Êó∂ÔºåÊàëÂ∏∏ÊÑüÂà∞ÈöæËøá",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q28"
                            },
                            {
                                prompt: "ÊàëÊ∏¥ÊúõÂ≠¶‰π†‰∏Ä‰∫õÊñ∞‰∏úË•øÔºåÂç≥‰ΩøÂÆÉ‰ª¨‰∏éÊàëÁöÑÊó•Â∏∏ÁîüÊ¥ªÊó†ÂÖ≥",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q29"
                            },
                            {
                                prompt: "Âà´‰∫∫Â§öËÆ§‰∏∫ÊàëÊòØ‰∏Ä‰∏™ÁÉ≠ÊÉÖÂíåÂèãÂ•ΩÁöÑ‰∫∫",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q30"
                            },
                            {
                                prompt: "ÊàëÂ∏∏ÊãÖÂøÉÊúâ‰ªÄ‰πà‰∏çÂ•ΩÁöÑ‰∫ãÊÉÖË¶ÅÂèëÁîü",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q31"
                            },
                            {
                                prompt: "Âú®Â∑•‰Ωú‰∏äÔºåÊàëÂ∏∏Âè™Ê±ÇËÉΩÂ∫î‰ªòËøáÂéª‰æøÂèØ",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q32"
                            },
                            {
                                prompt: "Â∞ΩÁÆ°‰∫∫Á±ªÁ§æ‰ºöÂ≠òÂú®ÁùÄ‰∏Ä‰∫õÈò¥ÊöóÁöÑ‰∏úË•øÔºàÂ¶ÇÊàò‰∫â„ÄÅÁΩ™ÊÅ∂„ÄÅÊ¨∫ËØàÔºâÔºåÊàë‰ªçÁÑ∂Áõ∏‰ø°‰∫∫ÊÄßÊÄªÁöÑÊù•ËØ¥ÊòØÂñÑËâØÁöÑ",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q33"
                            },
                            {
                                prompt: "ÊàëÁöÑÊÉ≥Ë±°ÂäõÁõ∏ÂΩì‰∏∞ÂØå",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q34"
                            },
                            {
                                prompt: "ÊàëÂñúÊ¨¢ÂèÇÂä†Á§æ‰∫§‰∏éÂ®±‰πêËÅö‰ºö",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q35"
                            },
                            {
                                prompt: "ÊàëÂæàÂ∞ëÊÑüÂà∞ÂøßÈÉÅÊàñÊ≤Æ‰∏ß",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q36"
                            },
                            {
                                prompt: "ÂÅö‰∫ãËÆ≤Á©∂ÈÄªËæëÂíåÊù°ÁêÜÊòØÊàëÁöÑ‰∏Ä‰∏™ÁâπÁÇπ",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q37"
                            },
                            {
                                prompt: "ÊàëÂ∏∏‰∏∫ÈÇ£‰∫õÈÅ≠ÈÅá‰∏çÂπ∏ÁöÑ‰∫∫ÊÑüÂà∞ÈöæËøá",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q38"
                            },
                            {
                                prompt: "ÊàëÂæàÊÑøÊÑè‰πüÂæàÂÆπÊòìÊé•ÂèóÈÇ£‰∫õÊñ∞‰∫ãÁâ©„ÄÅÊñ∞ËßÇÁÇπ„ÄÅÊñ∞ÊÉ≥Ê≥ï",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q39"
                            },
                            {
                                prompt: "ÊàëÂ∏åÊúõÊàê‰∏∫È¢ÜÂØºËÄÖËÄå‰∏çÊòØË¢´È¢ÜÂØºËÄÖ",
                                labels: ["1<br>ÂÆåÂÖ®‰∏çÁ¨¶Âêà", "2<br>Â§ßÈÉ®ÂàÜ‰∏çÁ¨¶Âêà", "3<br>ÊúâÁÇπ‰∏çÁ¨¶Âêà", "4<br>ÊúâÁÇπÁ¨¶Âêà", "5<br>Â§ßÈÉ®ÂàÜÁ¨¶Âêà", "6<br>ÂÆåÂÖ®Á¨¶Âêà"],
                                required: true,
                                name: "q40"
                            }
                        ],
                        button_label: "Êèê‰∫§ÈóÆÂç∑"
                    },
                    
                    // Á¨¨‰∫åÈò∂ÊÆµÔºöAIÂàÜÊûê
                    {
                        type: jsPsychAISurvey,
                        preamble: `
                            <div style="text-align: center; padding: 30px;">
                                <h2>Ê≠£Âú®ÁîüÊàêÊÇ®ÁöÑ‰∫∫Ê†ºÂàÜÊûêÊä•Âëä...</h2>
                                <p style="color: #666; font-size: 16px;">AIÊ≠£Âú®Âü∫‰∫éÊÇ®ÁöÑÈóÆÂç∑Á≠îÊ°àËøõË°åÊ∑±Â∫¶ÂàÜÊûêÔºåËØ∑Á®çÂÄô</p>
                            </div>
                        `,
                        questions: [{
                            prompt: "ÊÇ®ÁöÑÂ§ß‰∫î‰∫∫Ê†ºÂàÜÊûêÊä•ÂëäÔºö",
                            name: "personality_analysis",
                            rows: 20,
                            columns: 80
                        }],
                        auto_generate: true,
                        hide_user_input: true,
                        ai_analysis_mode: "individual",
                        show_individual_ai_areas: true,
                        
                        // Ëé∑ÂèñÂâç‰∏Ä‰∏™ËØïÊ¨°ÁöÑÈóÆÂç∑Êï∞ÊçÆ
                        data_collector: function() {
                            console.log('data_collector ÂáΩÊï∞Ë¢´Ë∞ÉÁî®');
                            
                            // Âú®jsPsych v7‰∏≠ÔºåÈúÄË¶ÅÈÄöËøáËØïÊ¨°‰∏ä‰∏ãÊñáËé∑ÂèñÊï∞ÊçÆ
                            // Ëøô‰∏™ÂáΩÊï∞‰ºöÂú®ËØïÊ¨°ÊâßË°åÊó∂Ë¢´Ë∞ÉÁî®ÔºåÊ≠§Êó∂ÂèØ‰ª•ËÆøÈóÆjsPsychÂÆû‰æã
                            if (typeof window.currentJsPsychInstance !== 'undefined' && window.currentJsPsychInstance) {
                                console.log('ÊâæÂà∞ jsPsych ÂÆû‰æã');
                                
                                const allData = window.currentJsPsychInstance.data.get();
                                console.log('ÊâÄÊúâÊï∞ÊçÆ:', allData.values());
                                
                                const surveyTrials = allData.filter({trial_type: 'survey-likert'});
                                console.log('ÈóÆÂç∑ËØïÊ¨°:', surveyTrials.values());
                                
                                const surveyData = surveyTrials.last(1).values()[0];
                                console.log('ÊúÄÊñ∞ÈóÆÂç∑Êï∞ÊçÆ:', surveyData);
                                
                                if (surveyData && surveyData.response) {
                                    console.log('ÊâæÂà∞ÈóÆÂç∑ÂìçÂ∫îÊï∞ÊçÆ:', surveyData.response);
                                    
                                    // Ê†ºÂºèÂåñÈóÆÂç∑Êï∞ÊçÆÁî®‰∫éAIÂàÜÊûê
                                    let formattedData = "Áî®Êà∑ÁöÑÈóÆÂç∑ÂõûÁ≠îÁªìÊûúÔºö\n\n";
                                    
                                    for (let i = 1; i <= 40; i++) {
                                        const questionKey = `q${i}`;
                                        if (surveyData.response[questionKey] !== undefined) {
                                            formattedData += `È¢òÁõÆ${i}Ôºö${surveyData.response[questionKey]}ÂàÜ\n`;
                                        }
                                    }
                                    
                                    console.log('Ê†ºÂºèÂåñÁöÑÊï∞ÊçÆ:', formattedData);
                                    
                                    return {
                                        questionnaire_data: formattedData
                                    };
                                } else {
                                    console.log('Ê≤°ÊúâÊâæÂà∞ÈóÆÂç∑ÂìçÂ∫îÊï∞ÊçÆ');
                                }
                            } else {
                                console.log('Ê≤°ÊúâÊâæÂà∞ jsPsych ÂÆû‰æã');
                            }
                            
                            return {
                                questionnaire_data: "Êó†Ê≥ïËé∑ÂèñÈóÆÂç∑Êï∞ÊçÆ"
                            };
                        },
                        
                        system_prompt: `‰Ω†ÊòØ‰∏Ä‰ΩçÂøÉÁêÜÂ≠¶‰∏ìÂÆ∂ÔºåÊìÖÈïøÂ§ß‰∫î‰∫∫Ê†ºÁêÜËÆ∫ÂàÜÊûê„ÄÇËØ∑Âü∫‰∫éÂøÉÁêÜÂ≠¶ÂéüÁêÜÔºåÂØπÈóÆÂç∑ÁªìÊûúËøõË°åÁßëÂ≠¶„ÄÅÂáÜÁ°Æ„ÄÅÊúâË∂£ÁöÑÂàÜÊûê„ÄÇ

ÂàÜÊûêÊ°ÜÊû∂Ôºö

‰ª•‰∏ãÊòØÈóÆÂç∑ÂêÑÁª¥Â∫¶ÁöÑÁªÑÊàêÔºö
- Á•ûÁªèË¥®ÔºàÊÉÖÁª™Á®≥ÂÆöÊÄßÔºâÔºöÈ¢òÁõÆ 1„ÄÅ6„ÄÅ11„ÄÅ16„ÄÅ21„ÄÅ26„ÄÅ31„ÄÅ36
- ‰∏•Ë∞®ÊÄßÔºàÂ∞ΩË¥£ÊÄßÔºâÔºöÈ¢òÁõÆ 2„ÄÅ7„ÄÅ12„ÄÅ17„ÄÅ22„ÄÅ27„ÄÅ32„ÄÅ37  
- ÂÆú‰∫∫ÊÄßÔºöÈ¢òÁõÆ 3„ÄÅ8„ÄÅ13„ÄÅ18„ÄÅ23„ÄÅ28„ÄÅ33„ÄÅ38
- ÂºÄÊîæÊÄßÔºöÈ¢òÁõÆ 4„ÄÅ9„ÄÅ14„ÄÅ19„ÄÅ24„ÄÅ29„ÄÅ34„ÄÅ39
- Â§ñÂêëÊÄßÔºöÈ¢òÁõÆ 5„ÄÅ10„ÄÅ15„ÄÅ20„ÄÅ25„ÄÅ30„ÄÅ35„ÄÅ40

ÂèçÂêëËÆ°ÂàÜÈ¢òÁõÆÔºö5„ÄÅ8„ÄÅ13„ÄÅ15„ÄÅ18„ÄÅ32„ÄÅ36ÔºàËÆ°ÁÆóÊó∂Áî®7ÂáèÂéªÂÆûÈôÖÂæóÂàÜÔºâ

ËØ∑Êåâ‰ª•‰∏ãÊ†ºÂºèËøõË°åÂàÜÊûêÔºö

1. **ÂæóÂàÜËÆ°ÁÆó**ÔºöËÆ°ÁÆóÂêÑÁª¥Â∫¶ÂæóÂàÜÔºàËÆ∞‰ΩèÂèçÂêëËÆ°ÂàÜÈ¢òÁõÆÔºâ
2. **‰∫∫Ê†ºÁîªÂÉè**ÔºöÁî®ÁîüÂä®ÊúâË∂£ÁöÑËØ≠Ë®ÄÊèèËø∞Ëøô‰∏™‰∫∫ÁöÑÊÄßÊ†ºÁâπÁÇπ
3. **‰∫îÁª¥ËØ¶Êûê**ÔºöÊØè‰∏™Áª¥Â∫¶ÁöÑËØ¶ÁªÜÂàÜÊûê
4. **ËÅå‰∏öÂª∫ËÆÆ**ÔºöÊ†πÊçÆ‰∫∫Ê†ºÁâπÂæÅÊé®ËçêÈÄÇÂêàÁöÑËÅå‰∏öÊñπÂêë
5. **ÂèëÂ±ïÂª∫ËÆÆ**ÔºöÈíàÂØπÊÄßÁöÑ‰∏™‰∫∫ÊàêÈïøÂª∫ËÆÆ
6. **Ë∂£Âë≥Ê¥ûÂØü**ÔºöÁî®ÊØîÂñªÊàñÁ±ªÊØîÊù•ÂΩ¢Ë±°ÂåñÊèèËø∞Ëøô‰∏™‰∫∫Ê†º

ËØ∑Áî®ÁßëÂ≠¶ÁöÑÊï∞ÊçÆÂàÜÊûêÁªìÂêàÈÄö‰øóÊòìÊáÇÁöÑËØ≠Ë®ÄÔºåËÆ©ÁªìÊûúÊó¢‰∏ì‰∏öÂèàÊúâË∂£„ÄÇ`,
                        
                        button_label: "Êü•ÁúãÂàÜÊûêÊä•Âëä",
                        interface_language: "zh"
                    }
                ]
            }
        };

        function runDemo(demoType) {
            // Êõ¥Êñ∞ÂØºËà™ÊåâÈíÆÁä∂ÊÄÅ
            document.querySelectorAll('.demo-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // ÊâæÂà∞Âπ∂ÊøÄÊ¥ªÂØπÂ∫îÁöÑÊåâÈíÆ
            const buttonTexts = {
                'multi_plugin_integration': 'üîó Â§öÊèí‰ª∂Êï∞ÊçÆÈõÜÊàê',
                'survey_choice_analysis': 'üìä ÈÄâÊã©È¢ò+AIÂàÜÊûê',
                'reaction_time_analysis': '‚ö° ÂèçÂ∫îÊó∂+AIÊ¥ûÂØü',
                'mouse_tracking_decision': 'üñ±Ô∏è Èº†Ê†áËΩ®ËøπÂÜ≥Á≠ñ',
                'comprehensive_experiment': 'üß™ ÁªºÂêàÂÆûÈ™åËÆæËÆ°',
                'creativity_ai': 'üé® ÂàõÈÄ†Âäõ‰∏éAIÂçè‰Ωú',
                'ai_personality_moral': '‚öñÔ∏è AI‰∫∫Ê†ºÈÅìÂæ∑Âà§Êñ≠',
                'multi_ai_analysis': 'üîÑ ‰∏ÄÊ¨°ËæìÂÖ•Â§öAIÂàÜÊûê'
            };
            
            const targetButton = Array.from(document.querySelectorAll('.demo-btn')).find(btn => 
                btn.textContent.trim() === buttonTexts[demoType]
            );
            
            if (targetButton) {
                targetButton.classList.add('active');
            }
            
            const config = demoConfigs[demoType];
            
            // ÊòæÁ§∫ÊºîÁ§∫ÊèèËø∞
            const container = document.getElementById('jspsych-container');
            container.innerHTML = `
                <div class="demo-description">
                    <h4>${config.title}</h4>
                    <p>${config.description}</p>
                </div>
                <div id="jspsych-experiment-content"></div>
            `;
            
            // ÈáçÊñ∞ÂàùÂßãÂåñ jsPsych ÂÆû‰æãÔºåÊåáÂêëÊñ∞ÁöÑÂÆπÂô®
            const jsPsychInstance = initJsPsych({
                display_element: 'jspsych-experiment-content',
                on_finish: function(data) {
                    console.log('ÂÆûÈ™åÂÆåÊàêÔºåÊï∞ÊçÆÔºö', data.values());
                    
                    // ÊòæÁ§∫ÁªìÊûú
                    const expContainer = document.getElementById('jspsych-experiment-content');
                    expContainer.innerHTML = `
                        <div class="demo-description">
                            <h4>‚úÖ ÂÆûÈ™åÂÆåÊàêÔºÅ</h4>
                            <p>Êï∞ÊçÆÂ∑≤‰øùÂ≠òÂà∞ÊµèËßàÂô®ÊéßÂà∂Âè∞„ÄÇÊÇ®ÂèØ‰ª•ÊâìÂºÄÂºÄÂèëËÄÖÂ∑•ÂÖ∑ÔºàF12ÔºâÊü•ÁúãÂÆåÊï¥Êï∞ÊçÆ„ÄÇ</p>
                        </div>
                        <div style="background: #f8f9fa; border-radius: 6px; padding: 20px; margin-top: 20px;">
                            <h5>Êï∞ÊçÆÈ¢ÑËßàÔºö</h5>
                            <pre style="background: white; padding: 15px; border-radius: 4px; overflow-x: auto; font-size: 12px;">
${JSON.stringify(data.values(), null, 2)}
                            </pre>
                        </div>
                        <button class="demo-btn" onclick="location.reload()" style="margin-top: 20px; display: block; margin-left: auto; margin-right: auto;">
                            ÈáçÊñ∞ÂºÄÂßãÊºîÁ§∫
                        </button>
                    `;
                }
            });
            
            // ‰øùÂ≠òjsPsychÂÆû‰æãÂà∞ÂÖ®Â±ÄÂèòÈáèÔºå‰æõdata_collectorÂáΩÊï∞‰ΩøÁî®
            window.currentJsPsychInstance = jsPsychInstance;
            
            // ÂêàÂπ∂Áî®Êà∑APIÈÖçÁΩÆÂà∞ËØïÊ¨°ÈÖçÁΩÆ‰∏≠
            const userConfig = getDynamicConfig();
            let mergedTrials;
            
            if (Array.isArray(config.trial)) {
                // Â¶ÇÊûúÊòØÂ§ö‰∏™ËØïÊ¨°ÔºàÂ¶ÇpersonalityÊµãËØÑÔºâÔºåÂêàÂπ∂ÈÖçÁΩÆÂà∞ÈúÄË¶ÅAPIÁöÑËØïÊ¨°
                mergedTrials = config.trial.map(trial => {
                    if (trial.type === jsPsychAISurvey) {
                        // ÈáçË¶ÅÔºö‰øùÁïôÂéüÊúâÈÖçÁΩÆÔºåÂè™Ë¶ÜÁõñAPIÁõ∏ÂÖ≥ÈÖçÁΩÆ
                        console.log('üîß runDemoÔºöÂêàÂπ∂APIÈÖçÁΩÆÂà∞AIËØïÊ¨°ÔºåÂéüÂßãËØïÊ¨°ÈÖçÁΩÆ:', trial);
                        const mergedTrial = {
                            ...trial,  // ‰øùÁïôÊâÄÊúâÂéüÊúâÈÖçÁΩÆÔºàÂåÖÊã¨data_collectorÁ≠âÔºâ
                            base_url: userConfig.base_url,
                            api: userConfig.api,
                            api_key: userConfig.api_key,
                            llm_model: userConfig.llm_model,
                            api_timeout: userConfig.api_timeout
                        };
                        console.log('üîß runDemoÔºöÂêàÂπ∂ÂêéÁöÑËØïÊ¨°ÈÖçÁΩÆ:', mergedTrial);
                        console.log('üîß runDemoÔºödata_collectorÂáΩÊï∞ÊòØÂê¶Â≠òÂú®:', typeof mergedTrial.data_collector === 'function');
                        return mergedTrial;
                    }
                    return trial;
                });
            } else {
                // Âçï‰∏™ËØïÊ¨°
                console.log('üîß runDemoÔºöÂ§ÑÁêÜÂçï‰∏™ËØïÊ¨°ÔºåÂéüÂßãÈÖçÁΩÆ:', config.trial);
                const mergedTrial = {
                    ...config.trial,  // ‰øùÁïôÊâÄÊúâÂéüÊúâÈÖçÁΩÆÔºàÂåÖÊã¨data_collectorÁ≠âÔºâ
                    base_url: userConfig.base_url,
                    api: userConfig.api,
                    api_key: userConfig.api_key,
                    llm_model: userConfig.llm_model,
                    api_timeout: userConfig.api_timeout
                };
                console.log('üîß runDemoÔºöÂçï‰∏™ËØïÊ¨°ÂêàÂπ∂ÂêéÈÖçÁΩÆ:', mergedTrial);
                console.log('üîß runDemoÔºöÂçï‰∏™ËØïÊ¨°data_collectorÂáΩÊï∞ÊòØÂê¶Â≠òÂú®:', typeof mergedTrial.data_collector === 'function');
                mergedTrials = [mergedTrial];
            }
            
            // ËøêË°åÂÆûÈ™å
            jsPsychInstance.run(mergedTrials);
        }

        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéËøêË°åÈªòËÆ§ÊºîÁ§∫
        document.addEventListener('DOMContentLoaded', function() {
            // ÂàùÂßãÂåñÈªòËÆ§ÈÖçÁΩÆ
            loadConfig(); // Â∞ùËØïÂä†ËΩΩ‰øùÂ≠òÁöÑÈÖçÁΩÆ
            if (!document.getElementById('api-key').value) {
                // Â¶ÇÊûúÊ≤°Êúâ‰øùÂ≠òÁöÑÈÖçÁΩÆÔºå‰ΩøÁî®ÈªòËÆ§ÈÖçÁΩÆ
                resetConfig();
            }
            
            // Á°Æ‰øùdemoConfigsÂ∑≤ÁªèÂàùÂßãÂåñÂêéÂÜçËøêË°åÊºîÁ§∫
            setTimeout(() => {
                console.log('üöÄ È°µÈù¢ÂàùÂßãÂåñÂÆåÊàêÔºådemoConfigs:', Object.keys(demoConfigs));
                console.log('üöÄ jsPsychAISurvey:', typeof jsPsychAISurvey);
                runDemo('multi_plugin_integration');
            }, 100);
        });
    </script>
</body>
</html>
